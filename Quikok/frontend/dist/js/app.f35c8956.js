(function(e){function t(t){for(var a,i,n=t[0],c=t[1],l=t[2],d=0,u=[];d<n.length;d++)i=n[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&u.push(r[i][0]),r[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);h&&h(t);while(u.length)u.shift()();return o.push.apply(o,l||[]),s()}function s(){for(var e,t=0;t<o.length;t++){for(var s=o[t],a=!0,i=1;i<s.length;i++){var n=s[i];0!==r[n]&&(a=!1)}a&&(o.splice(t--,1),e=c(c.s=s[0]))}return e}var a={},i={app:0},r={app:0},o=[];function n(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-3064fe14":"dca7e8e6"}[e]+".js"}function c(t){if(a[t])return a[t].exports;var s=a[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,c),s.l=!0,s.exports}c.e=function(e){var t=[],s={"chunk-3064fe14":1};i[e]?t.push(i[e]):0!==i[e]&&s[e]&&t.push(i[e]=new Promise((function(t,s){for(var a="css/"+({}[e]||e)+"."+{"chunk-3064fe14":"8ee5cc67"}[e]+".css",r=c.p+a,o=document.getElementsByTagName("link"),n=0;n<o.length;n++){var l=o[n],d=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(d===a||d===r))return t()}var u=document.getElementsByTagName("style");for(n=0;n<u.length;n++){l=u[n],d=l.getAttribute("data-href");if(d===a||d===r)return t()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=t,h.onerror=function(t){var a=t&&t.target&&t.target.src||r,o=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=a,delete i[e],h.parentNode.removeChild(h),s(o)},h.href=r;var f=document.getElementsByTagName("head")[0];f.appendChild(h)})).then((function(){i[e]=0})));var a=r[e];if(0!==a)if(a)t.push(a[2]);else{var o=new Promise((function(t,s){a=r[e]=[t,s]}));t.push(a[2]=o);var l,d=document.createElement("script");d.charset="utf-8",d.timeout=120,c.nc&&d.setAttribute("nonce",c.nc),d.src=n(e);var u=new Error;l=function(t){d.onerror=d.onload=null,clearTimeout(h);var s=r[e];if(0!==s){if(s){var a=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+a+": "+i+")",u.name="ChunkLoadError",u.type=a,u.request=i,s[1](u)}r[e]=void 0}};var h=setTimeout((function(){l({type:"timeout",target:d})}),12e4);d.onerror=d.onload=l,document.head.appendChild(d)}return Promise.all(t)},c.m=e,c.c=a,c.d=function(e,t,s){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(c.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)c.d(s,a,function(t){return e[t]}.bind(null,a));return s},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/static/",c.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],d=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var h=d;o.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"0a78":function(e,t,s){"use strict";s.d(t,"a",(function(){return a})),s.d(t,"b",(function(){return i}));var a=function(e){return function(t,s){return t[e]=s}},i=function(e){return function(t){return t[e]=!t[e]}}},"0b2b":function(e,t,s){e.exports=s.p+"img/boy_teacher.d852f4ff.jpg"},1612:function(e,t,s){"use strict";var a=s("cea7"),i=s.n(a);i.a},"1ae4":function(e,t,s){e.exports=s.p+"img/logo.9a3f4510.svg"},"222d":function(e,t,s){e.exports=s.p+"img/girl_teacher.d08c9e4b.jpg"},2609:function(e,t,s){"use strict";s.r(t),t["default"]={demo:!1,drawer:null,startdate:"2018-04-01",color:"red",theme:localStorage.getItem("theme")||"dark",shrink:"260",image:""}},2899:function(e,t,s){"use strict";var a=s("bdda"),i=s.n(a);i.a},"2a74":function(e,t,s){"use strict";s.r(t);s("28a5");var a=s("768b"),i=(s("a481"),s("ac6a"),s("c653")),r={};i.keys().forEach((function(e){if("./index.js"!==e){var t=e.replace(/(\.\/|\.js)/g,""),s=t.split("/"),o=Object(a["a"])(s,2),n=o[0],c=o[1];r[n]||(r[n]={namespaced:!0}),r[n][c]=i(e).default}})),t["default"]=r},"2ea1":function(e,t,s){e.exports=s.p+"img/lesson_card_bg1.04373b68.jpg"},"2f77":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"chatroom"}},["list"===e.doChatAction?s("div",[e._m(0),s("div",{staticClass:"middlebox"},[e.updateStatus?s("div",{staticClass:"loading"}):e._e(),s("div",{staticClass:"list-area"},e._l(e.chatroom,(function(t,a){return s("div",{key:"r"+a,staticClass:"list cursor-no-hover",class:{new:t.chatUnreadMessageQty>0},on:{click:function(s){e.chatroomIndex=a,e.chatroomChatroomID=t.chatroomID,e.$store.state.doChatAction="message",e.inChatroom(a)}}},[s("div",{staticClass:"photo",style:"background-image:url("+(""!==t.chatUserPath?e.root+t.chatUserPath:t.chatUsergender?"teacher"===t.chatUserType?e.boyTeacher:e.boyStudent:"teacher"===t.chatUserType?e.girlTeacher:e.girlStudent)+");"}),s("span",{staticClass:"name"},[e._v(e._s(t.chatUserName))]),s("span",{staticClass:"time"},[e._v(e._s(t.messageInfo.length>0?e.$moment(t.messageInfo[t.messageInfo.length-1].messageCreateTime).format("HH:mm"):""))]),s("p",[e._v(e._s(t.messageInfo.length>0?t.messageInfo[t.messageInfo.length-1].messageText:""))])])})),0)])]):e._e(),"message"===e.doChatAction?s("div",[s("div",{staticClass:"topbox row"},[s("v-icon",{staticClass:"col-1 cursor-no-hover",on:{click:function(t){e.outChatroom(e.chatroomIndex),e.$store.state.doChatAction="list"}}},[e._v("mdi-chevron-left")]),s("span",{staticClass:"col-10 text-center"},[s("div",{staticClass:"photo",style:"background-image:url("+(""!==e.chatroom[e.chatroomIndex].chatUserPath?e.root+e.chatroom[e.chatroomIndex].chatUserPath:e.chatroom[e.chatroomIndex].chatUsergender?"teacher"===e.chatroom[e.chatroomIndex].chatUserType?e.boyTeacher:e.boyStudent:"teacher"===e.chatroom[e.chatroomIndex].chatUserType?e.girlTeacher:e.girlStudent)+");"}),e._v(e._s(e.chatroom[e.chatroomIndex].chatUserName)+" ")]),"teacher"!==e.userInfo.type?s("v-icon",{staticClass:"col-1 text-white cursor-no-hover",on:{click:function(t){e.$router.history.current.path!=="/account/profile/"+(e.chatroom[e.chatroomIndex].chatUserID||"")&&e.$router.push("/account/profile/"+(e.chatroom[e.chatroomIndex].chatUserID||""))}}},[e._v("mdi-alert-circle-outline")]):e._e(),"teacher"===e.userInfo.type?s("v-icon",{staticClass:"col-1 text-white cursor-no-hover"}):e._e()],1),s("div",{staticClass:"booking cursor-no-hover"},[s("v-icon",{staticClass:"text-white left"},[e._v("mdi-chevron-double-right")]),e._v("立即預約"),s("v-icon",{staticClass:"text-white right"},[e._v("mdi-chevron-double-left")])],1),s("div",{staticClass:"middlebox bg-message",class:{"bg-booking":!e.loadingStatus&&e.chatroom[e.chatroomIndex].chatUserLessonList!==[]&&"teacher"!==e.userInfo.type},attrs:{id:"messagebox"}},e._l(e.chatroom[e.chatroomIndex].messageInfo,(function(t,a){return s("div",{key:"m"+a,staticClass:"message",class:{our:"1"!==t.messageType&&t.senderID===e.userInfo.user_id,other:"1"!==t.messageType&&t.senderID!==e.userInfo.user_id,system:"1"===t.messageType,booked:"2"===t.messageType}},[s("span",{staticClass:"time"},[e._v(e._s(e.$moment(t.messageCreateTime).format("HH:mm")))]),"0"===t.messageType?s("p",[e._v(e._s(t.messageText))]):e._e(),"1"===t.messageType?s("p",[s("span",[e._v(e._s(e.$moment(t.messageCreateTime).format("HH:mm")))]),s("br"),e._v(e._s(t.messageText))]):e._e(),"2"===t.messageType?s("div",[s("p",{staticClass:"subtitle"},[s("v-icon",{staticClass:"text-white mr-1"},[e._v("mdi-clock-alert-outline")]),e._v("預約資訊")],1),s("p",{staticClass:"title"},[e._v(e._s(JSON.parse(t.messageText).lesson_title))]),s("p",[s("span",[e._v("預約日期")]),e._v(e._s(e.$moment(JSON.parse(t.messageText).bookingDate).format("YYYY年MM月DD日")))]),s("p",[s("span",[e._v("預約時段")]),e._v(e._s(JSON.parse(t.messageText).bookingTime))]),s("v-btn",{staticClass:"m-0 mt-2 w-100 border border-white bg-select-color",attrs:{dark:"",flat:""},on:{click:function(t){e.$router.push("teacher"===e.userInfo.type?"/account/reservation":"/account/study")}}},[e._v(" "+e._s("預約管理")+" ")])],1):e._e(),s("span",{staticClass:"time"},[e._v(e._s(e.$moment(t.messageCreateTime).format("HH:mm")))])])})),0),s("div",{staticClass:"bottombox"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.messageText,expression:"messageText"}],attrs:{placeholder:"在此輸入訊息"},domProps:{value:e.messageText},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.websocketsend()},input:function(t){t.target.composing||(e.messageText=t.target.value)}}}),s("v-icon",{staticClass:"text-white mr-1 cursor",on:{click:function(t){return e.websocketsend()}}},[e._v("mdi-send")])],1)]):e._e(),"info"===e.doChatAction?s("div",[s("div",{staticClass:"topbox row"},[s("v-icon",{staticClass:"col-1 cursor-no-hover",on:{click:function(t){e.$store.state.doChatAction="message"}}},[e._v("mdi-chevron-left")]),"info"===e.doChatAction?s("span",{staticClass:"col-10 text-center"},[e._v("教師資訊")]):e._e(),s("div",{staticClass:"col-1"})],1),s("div",{staticClass:"middlebox"},[s("div",{staticClass:"profile"},[s("div",{staticClass:"photo",style:"background-image:url("+(""!==e.chatroom[e.chatroomIndex].chatUserPath?e.root+e.chatroom[e.chatroomIndex].chatUserPath:e.chatroom[e.chatroomIndex].chatUsergender?"teacher"===e.chatroom[e.chatroomIndex].chatUserType?e.boyTeacher:e.boyStudent:"teacher"===e.chatroom[e.chatroomIndex].chatUserType?e.girlTeacher:e.girlStudent)+");"}),s("p",{staticClass:"h4 subtitle mb-2"},[e._v("關於老師")]),s("p",{staticClass:"content"},[e._v(e._s(e.chatroom[e.chatroomIndex].chatUserIntro))]),s("p",{staticClass:"h4 subtitle mb-2"},[e._v("開設課程")]),s("div",{staticClass:"lesson",class:{loading:e.loadingStatus&&!e.chatroom[e.chatroomIndex].chatUserLessonList}},[e.loadingStatus||e.chatroom[e.chatroomIndex].chatUserLessonList!==[]?e._e():s("p",{staticClass:"text-center w-100"},[e._v("尚未開設課程")]),e._l(e.chatroom[e.chatroomIndex].chatUserLessonList,(function(t,a){return s("v-btn",{key:"l"+a,attrs:{dark:"",flat:""},on:{click:function(s){return e.$router.push("/lesson/main/view/"+t.value)}}},[e._v(" "+e._s(t.text)+" ")])}))],2),e.chatroom[e.chatroomIndex].chatUserLessonList&&e.chatroom[e.chatroomIndex].chatUserLessonList!==[]?s("v-btn",{attrs:{dark:"",flat:""}},[e._v(" 立即預約 ")]):e._e()],1)])]):e._e()])},i=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"topbox row"},[s("span",{staticClass:"col-12 text-center"},[e._v("Message")])])}],r=(s("8e6e"),s("456d"),s("ac6a"),s("bd86")),o=s("4328"),n=s.n(o),c=s("0b2b"),l=s.n(c),d=s("222d"),u=s.n(d),h=s("f6b8"),f=s.n(h),g=s("307a"),p=s.n(g),v=s("f8b2"),m=s.n(v),_=s("2f62");function b(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function y(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?b(Object(s),!0).forEach((function(t){Object(r["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):b(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var w={name:"Chatroom",data:function(){return{boyTeacher:l.a,girlTeacher:u.a,boyStudent:f.a,girlStudent:p.a,loading:m.a,loadingStatus:!1,updateStatus:!1,websock:[],websockSystem:[],chatroom:[],chatroomIndex:-1,chatroomChatroomID:0,messageText:""}},computed:y({},Object(_["c"])(["root","loginStatus","doChatView","doChatAction","doChatroomID","doReadStatus"]),{userInfo:function(){return JSON.parse(localStorage.getItem("user"))},chatUnreadMessageQty:function(){var e=0;return this.chatroom.forEach((function(t,s){e+=t.chatUnreadMessageQty})),e}}),watch:{loginStatus:function(e){},doChatView:function(e){e?this.doOpenChatWindows():this.doCloseChatWindows()},doChatAction:function(e){"list"===e?this.chatroomIndex=-1:"message"===e&&setTimeout((function(){document.getElementById("messagebox").scroll(0,document.getElementById("messagebox").scrollHeight)}),50)},doChatroomID:function(e){var t=this;if(e>=0){var s=!1;this.chatroom.forEach((function(a,i){a.chatroomID===e&&(t.chatroomIndex=i,t.$store.state.doChatAction="message",t.$emit("snackbar",["green","已進入與使用者"+t.chatroom[i].chatUserID+"的"+t.chatroom[i].chatroomID+"號聊天室"]),s=!0,t.updateStatus=!1,t.$store.state.doChatroomID=-1)})),s||this.doCreateChatroom(e)}},chatUnreadMessageQty:function(e){this.$store.state.doReadStatus=e>0},chatroomIndex:function(e){e>=0&&(this.chatroom[e].chatUnreadMessageQty=0),this.infoIntro="",this.infoLessonList=[]}},mounted:function(){var e=this;localStorage.getItem("token")?(this.websock=[],this.websockSystem=[],this.initSystemWebSocket(),this.getHistoricalMessage()):(this.chatroom.forEach((function(t,s){e.websock[s].close()})),this.$emit("snackbar",["red","已手動斷線"]))},methods:{getTeacherProfile:function(e){var t=this;this.chatroom.forEach((function(s,a){t.$emit("snackbar",["blue","準備取得老師(ID:"+s.chatUserID+")資料"+(e||"")]),e&&e!==s.chatroomID||(t.$emit("snackbar",["blue","取得老師(ID:"+s.chatUserID+")資料中"+(e||"")]),t.$http.get("/api/account/returnTeacherProfileForPublicViewing/?userID=".concat(s.chatUserID,"&type=teacher")).then((function(e){return e.data})).then((function(i){"success"===i.status?(t.$emit("snackbar",["green","已取得老師(ID:"+s.chatUserID+")資料"+(e||"")]),t.chatroom[a].chatUserIntro=i.data.intro):"failed"===i.status?t.$emit("snackbar",["red","error:"+i.errMsg]):t.$emit("snackbar",["orange","發生錯誤，請稍後再試"])})).catch((function(e){t.$emit("snackbar",["orange","發生錯誤，請稍後再試"]),console.log(e)})))}))},getLessonList:function(e){var t=this;this.loadingStatus=!0,this.chatroom.forEach((function(s,a){if(t.$emit("snackbar",["blue","準備取得老師(ID:"+s.chatUserID+")課程清單"+(e||"")]),!e||e===s.chatroomID){t.$emit("snackbar",["blue","取得老師(ID:"+s.chatUserID+")課程清單中"+(e||"")]),t.infoLessonList=[];var i={userID:t.userInfo?t.userInfo.user_id:-1,qty:-1,keywords:"",only_show_ones_favorites:!1,only_show_lessons_by_this_teacher_s_auth_id:s.chatUserID,ordered_by:"",filtered_by:""};t.$http.post("/api/lesson/getLessonCardsForCommonUsers/",n.a.stringify(i)).then((function(e){return e.data})).then((function(i){t.loadingStatus=!1,"success"===i.status?(t.$emit("snackbar",["green","已取得老師(ID:"+s.chatUserID+")課程清單"+(e||"")]),t.chatroom[a].chatUserLessonList=[],i.data.forEach((function(e){t.chatroom[a].chatUserLessonList.push({value:e.lessonID,text:e.lesson_title})}))):"failed"===i.status?t.$emit("snackbar",["red","error:"+i.errMsg]):t.$emit("snackbar",["orange","發生錯誤，請稍後再試"])})).catch((function(e){t.$emit("snackbar",["orange","發生錯誤，請稍後再試"]),console.log(e)}))}}))},doNewChatroomConnect:function(e){var t=this;if(this.$emit("snackbar",["blue","準備取得歷史訊息("+e+"端)"]),localStorage.getItem("token")){var s=[],a=[];this.chatroom.forEach((function(e,t){a.push(e.chatroomID)})),this.$emit("snackbar",["blue","取得歷史訊息中("+e+"端)"]);var i={userID:this.userInfo?this.userInfo.user_id:-1,user_type:this.userInfo.type};this.$http.post("/api/chat/contentAndHistoryOfChatroom/",n.a.stringify(i)).then((function(e){return e.data})).then((function(i){"success"===i.status?(t.$emit("snackbar",["green","已取得歷史訊息("+e+"端)"]),s=i.data,s.forEach((function(i,r){if(-1===a.indexOf(i.chatroomID)){t.chatroom.push(s[r]),t.$emit("snackbar",["blue","準備與"+i.chatroomID+"號聊天室連線("+e+"端)"]);var o=t.$ws+"/ws/chat/".concat(t.userInfo?t.userInfo.user_id:-1,"_chatroom_").concat(s[r].chatroomID,"_0/");t.websock.push(new WebSocket(o)),t.websock[t.websock.length-1].onmessage=t.websocketonmessage,t.websock[t.websock.length-1].onopen=t.websocketonopen(s[r].chatUserID,s[r].chatroomID),t.websock[t.websock.length-1].onerror=t.websocketonerror,t.websock[t.websock.length-1].onclose=t.websocketclose,"teacher"!==t.userInfo.type||"list"===t.$store.state.doChatAction?(t.$store.state.doChatroomID=i.chatroomID,t.chatroomChatroomID=i.chatroomID):t.updateStatus=!1}}))):"failed"===i.status?t.$emit("snackbar",["red","error:"+i.errMsg]):t.$emit("snackbar",["orange","發生錯誤，請稍後再試"])})).catch((function(e){t.$emit("snackbar",["orange","發生錯誤，請稍後再試"]),console.log(e)}))}else this.$store.state.dologinView=!0},getHistoricalMessage:function(e){var t=this;if(this.$emit("snackbar",["blue","準備取得歷史訊息"]),localStorage.getItem("token")){this.$emit("snackbar",["blue","取得歷史訊息中"]);var s={userID:this.userInfo?this.userInfo.user_id:-1,user_type:this.userInfo.type};this.$http.post("/api/chat/contentAndHistoryOfChatroom/",n.a.stringify(s)).then((function(e){return e.data})).then((function(s){"success"===s.status?(t.$emit("snackbar",["green","已取得歷史訊息"]),t.chatroom=s.data,t.initWebSocket(e),t.userInfo.type):"failed"===s.status?t.$emit("snackbar",["red","error:"+s.errMsg]):t.$emit("snackbar",["orange","發生錯誤，請稍後再試"])})).catch((function(e){t.$emit("snackbar",["orange","發生錯誤，請稍後再試"]),console.log(e)}))}else this.$store.state.dologinView=!0},initSystemWebSocket:function(){var e=this.$ws+"/ws/chat/".concat(this.userInfo?this.userInfo.user_id:-1,"_chatroom_").concat(localStorage.getItem("systemChatroomID"),"_1/");this.websockSystem=new WebSocket(e),this.websockSystem.onmessage=this.websocketSystemOnmessage,this.websockSystem.onopen=this.websocketSystemOnopen("system",localStorage.getItem("systemChatroomID")),this.websockSystem.onerror=this.websocketSystemOnerror,this.websockSystem.onclose=this.websocketSystemClose},initWebSocket:function(e){var t=this;this.chatroom.forEach((function(s,a){if(!e||e===s.chatroomID){var i=t.$ws+"/ws/chat/".concat(t.userInfo?t.userInfo.user_id:-1,"_chatroom_").concat(s.chatroomID,"_0/");t.websock.push(new WebSocket(i)),t.websock[a].onmessage=t.websocketonmessage,t.websock[a].onopen=t.websocketonopen(s.chatUserID,s.chatroomID),t.websock[a].onerror=t.websocketonerror,t.websock[a].onclose=t.websocketclose}}))},websocketonerror:function(){},websocketSystemOnerror:function(){},websocketonopen:function(e,t){this.$emit("snackbar",["green","與使用者"+e+"的"+t+"號聊天室已連線"])},websocketSystemOnopen:function(e,t){this.$emit("snackbar",["darkmagenta","與使用者"+e+"的"+t+"號聊天室已連線"])},websocketonmessage:function(e){var t=this,s=JSON.parse(e.data),a=!0;this.chatroom.forEach((function(i,r){if(s.chatroomID===i.chatroomID){a=!1,t.chatroom[r].messageInfo.push(s),t.$emit("snackbar",["blue","已接收訊息:"+e.data]);var o=t.chatroom[t.chatroomIndex]?t.chatroom[t.chatroomIndex].chatroomID:-1;o===s.chatroomID&&t.doChatView?setTimeout((function(){var e=document.getElementById("messagebox");e.scrollTop=document.getElementById("messagebox").scrollHeight}),50):t.chatroom[r].chatUnreadMessageQty=t.chatroom[r].chatUnreadMessageQty+1}})),a&&this.doUpdateChatroomList(s.chatroomID)},websocketSystemOnmessage:function(e){var t=JSON.parse(e.data);this.$emit("snackbar",["darkmagenta","(system)已接收訊息:"+e.data]),1===t.systemCode&&(this.updateStatus=!0,this.$emit("snackbar",["darkmagenta","(system)準備建立新聊天室"]),this.doNewChatroomConnect("老師",t.messageText.BtnCode),this.$store.state.doChatView=!0)},websocketsend:function(){if(this.messageText.length>0){var e={senderID:this.userInfo?this.userInfo.user_id:-1,chatroomID:this.chatroomChatroomID,messageType:"0",messageText:this.messageText};this.websock[this.chatroomIndex].send(JSON.stringify(e)),this.messageText="",this.$emit("snackbar",["green","已發送訊息:"+JSON.stringify(e)])}},websocketclose:function(){this.$emit("snackbar",["red","已自動斷線，將自動重新連線"]),this.initWebSocket()},websocketSystemClose:function(){this.$emit("snackbar",["darkmagenta","System已自動斷線，將自動重新連線"]),this.initSystemWebSocket()},doCreateChatroom:function(e){this.updateStatus=!0,this.$store.state.doChatroomID=-1,this.$emit("snackbar",["blue","已建立新聊天室，準備更新歷史訊息"]),this.doNewChatroomConnect("學生",e)},doUpdateChatroomList:function(e){this.updateStatus=!0,this.$emit("snackbar",["blue","接收到新聊天室的訊息，準備更新歷史訊息"]),this.doNewChatroomConnect("學生",e)},doOpenChatWindows:function(){this.$emit("snackbar",["green","已開啟"+this.$store.state.doChatAction+"聊天室區域"])},doCloseChatWindows:function(){this.$emit("snackbar",["black","已從"+this.$store.state.doChatAction+"關閉聊天室區域"])},inChatroom:function(e){this.$emit("snackbar",["green","已進入與使用者"+this.chatroom[e].chatUserID+"的"+this.chatroom[e].chatroomID+"號聊天室"])},outChatroom:function(e){this.$emit("snackbar",["black","已離開與使用者"+this.chatroom[e].chatUserID+"的"+this.chatroom[e].chatroomID+"號聊天室"])}}},k=w,x=(s("c01f"),s("2877")),C=Object(x["a"])(k,a,i,!1,null,null,null);t["default"]=C.exports},"307a":function(e,t,s){e.exports=s.p+"img/girl_student.51cf34d6.jpg"},"34a4":function(e,t,s){e.exports=s.p+"img/prove.37a07b43.png"},"3b15":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-content",{directives:[{name:"show",rawName:"v-show",value:e.loadingView,expression:"loadingView"}],attrs:{id:"homepage"}},[s("div",{staticClass:"pc homebannerbar d-none d-lg-inline-block d-xl-inline-block"},e._l(e.resBannerBarPC,(function(t,a){return s("div",{key:"topBarImg"+a,staticClass:"homebannerbar-img",class:{"homebannerbar-img-active":a===e.homeBannerBarSort,"homebannerbar-img-left":a===(e.homeBannerBarSort-1<0?e.homeBannerBarQty:e.homeBannerBarSort-1),"homebannerbar-img-right":a===(e.homeBannerBarSort+1>e.homeBannerBarQty?0:e.homeBannerBarSort+1)},style:"background-image:url("+e.root+t.img_url+")"})})),0),s("div",{staticClass:"mobile homebannerbar d-inline-block d-lg-none d-xl-none"},e._l(e.resBannerBarMobile,(function(t,a){return s("div",{key:"topBarImg"+a,staticClass:"homebannerbar-img",class:{"homebannerbar-img-active":a===e.homeBannerBarSort,"homebannerbar-img-left":a===(e.homeBannerBarSort-1<0?e.homeBannerBarQty:e.homeBannerBarSort-1),"homebannerbar-img-right":a===(e.homeBannerBarSort+1>e.homeBannerBarQty?0:e.homeBannerBarSort+1)},style:"background-image:url("+e.root+t.img_url+")"})})),0),s("div",{staticClass:"container"},[s("div",{staticClass:"homebannerbar-search-area d-flex d-lg-none d-xl-none"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.homebannerbarSearch,expression:"homebannerbarSearch"}],staticClass:"row-btn-50",attrs:{id:"homebannerbar-search-input",placeholder:"請輸入科目或老師"},domProps:{value:e.homebannerbarSearch},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.$router.push("/lesson/search?q="+e.homebannerbarSearch)},input:function(t){t.target.composing||(e.homebannerbarSearch=t.target.value)}}}),s("button",{staticClass:"homebannerbar-search-btn btn-50",on:{click:function(t){return e.$router.push("/lesson/search?q="+e.homebannerbarSearch)}}},[s("v-icon",[e._v("mdi-magnify")])],1)]),s("v-flex",{attrs:{"d-none":"","d-md-inline-block":"","text-center":"","w-50":"",xs6:"",md6:""},on:{mouseover:function(t){e.beTeacherHoverEvent=!0},mouseout:function(t){e.beTeacherHoverEvent=!1},click:function(t){return e.registerTeacherAlert()}}},[s("router-link",{staticClass:"cursor-no-hover",style:"background: url("+e.beTeacherHover+");display: flex;background-size: contain;background-size: cover;",attrs:{to:e.userInfo?"/":"/account/register/teacher"}},[s("img",{staticClass:"w-100",staticStyle:{transition:"0s"},style:e.beTeacherHoverEvent?"opacity:0;":"",attrs:{src:e.beTeacher}})])],1),s("v-flex",{attrs:{"d-none":"","d-md-inline-block":"","text-center":"","w-50":"",xs6:"",md6:""},on:{mouseover:function(t){e.searchLessonHoverEvent=!0},mouseout:function(t){e.searchLessonHoverEvent=!1}}},[s("router-link",{staticClass:"cursor-no-hover",style:"background: url("+e.searchLessonHover+");display: flex;background-size: contain;background-size: cover;",attrs:{to:"/lesson/search"}},[s("img",{staticClass:"w-100",staticStyle:{transition:"0s"},style:e.searchLessonHoverEvent?"opacity:0;":"",attrs:{src:e.searchLesson}})])],1),s("v-flex",{attrs:{"d-inline-block":"","d-md-none":"","text-center":"",xs12:""}},[s("router-link",{staticClass:"cursor-no-hover",attrs:{to:"/lesson/search"}},[s("img",{staticClass:"w-100",attrs:{src:e.searchLessonM}})])],1),s("v-flex",{attrs:{"d-inline-block":"","d-md-none":"","text-center":"",xs12:""},on:{click:function(t){return e.registerTeacherAlert()}}},[s("router-link",{staticClass:"cursor-no-hover",attrs:{to:e.userInfo?"/":"/account/register/teacher"}},[s("img",{staticClass:"w-100",attrs:{src:e.beTeacherM}})])],1),s("div",{staticClass:"are-alert"},[s("span",{staticClass:"are-alert-title"},[e._v("精選課程")])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-xs-12 col-md-12 text-center"},[s("router-link",{attrs:{to:"/lesson/search?q=英文"}},[s("v-chip",{staticClass:"h5 cursor p-1"},[e._v("英文")])],1),s("router-link",{attrs:{to:"/lesson/search?q=數學"}},[s("v-chip",{staticClass:"h5 cursor p-1"},[e._v("數學")])],1),s("router-link",{attrs:{to:"/lesson/search?q=物理"}},[s("v-chip",{staticClass:"h5 cursor p-1"},[e._v("物理")])],1),s("router-link",{attrs:{to:"/lesson/search?q=線上課程"}},[s("v-chip",{staticClass:"h5 cursor p-1"},[e._v("線上課程")])],1),s("router-link",{attrs:{to:"/lesson/search?q=實體課程"}},[s("v-chip",{staticClass:"h5 cursor p-1"},[e._v("實體課程")])],1),s("router-link",{attrs:{to:"/lesson/search"}},[s("v-chip",{staticClass:"h5 cursor p-1 text-white grey"},[s("v-icon",{staticClass:"text-white"},[e._v("mdi-dots-horizontal")])],1)],1)],1)]),s("div",{staticClass:"row",class:{loading:e.loadingStatus}},[e.loadingStatus||0!==e.resLessonRecommendList.length?e._e():s("p",{staticClass:"text-center w-100"},[e._v("尚無精選課程")]),e._l(e.resLessonRecommendList,(function(t,a){return s("div",{key:"c"+a,staticClass:"item-cube col-xs-12 col-md-6 my-2"},[s("div",{staticClass:"teacher-photo",style:"background-image: url('"+e.root+(""!==t.teacher_thumbnail_path?t.teacher_thumbnail_path:t.is_this_teacher_male?e.boyTeacher:e.girlTeacher)+"');"}),""!==t.best_sale?s("div",{staticClass:"best_sale"},[e._v(e._s(t.best_sale))]):e._e(),s("v-layout",{attrs:{"item-cube-main":"","justify-center":""}},[s("v-flex",{staticClass:"top",style:"background-image: url('"+e.root+(99===t.background_picture_code?t.background_picture_path:0===t.background_picture_code?e.cardBg1:1===t.background_picture_code?e.cardBg2:e.cardBg3)+"');"},[s("div",{style:"color:"+t.title_color+";"},[e._v(e._s(t.big_title))]),s("div",{style:"color:"+t.title_color+";"},[e._v(e._s(t.little_title))]),t.is_this_my_favorite_lesson?e._e():s("v-icon",{staticClass:"cursor",staticStyle:{color:"coral"},on:{click:function(s){return e.doFavorite(t.lessonID,!0)}}},[e._v("mdi-heart-outline")]),t.is_this_my_favorite_lesson?s("v-icon",{staticClass:"cursor",staticStyle:{color:"coral"},on:{click:function(s){return e.doFavorite(t.lessonID,!1)}}},[e._v("mdi-heart")]):e._e()],1),s("v-flex",{staticClass:"middle"},[s("p",{staticClass:"fraction md-font-18 xs-font-10 word-keep-all"},[e._v("評價"+e._s(t.lesson_avg_score)+" ("+e._s(t.lesson_reviewed_times)+")")]),s("span",{staticClass:"xs-font-18 md-font-25 float-left word-keep-all cursor",on:{click:function(s){return e.$router.push("/account/profile/"+t.teacher_auth_id)}}},[e._v(e._s(t.teacher_nickname))]),s("span",{staticClass:"xs-font-18 md-font-25 float-right word-keep-all"},[e._v("鐘點費NT$"+e._s(t.price_per_hour))])]),s("v-flex",{staticClass:"bottom"},[s("div",{staticClass:"text-left mb-2"},[s("p",{staticClass:"title mb-2 cursor",on:{click:function(s){return e.$router.push("/lesson/main/view/"+t.lessonID)}}},[e._v(e._s(t.lesson_title))]),s("p",{staticClass:"prove"},[t.education_is_approved?s("img",{attrs:{src:e.prove}}):e._e(),e._v(e._s(t.education))]),s("p",{staticClass:"prove"},[t.working_experience_is_approved?s("img",{attrs:{src:e.prove}}):e._e(),e._v(e._s(t.working_experience))])]),s("div",{staticClass:"text-left"},[""!==t.highlight_1?s("span",{staticClass:"tag md-font-13 xs-font-9 word-keep-all"},[e._v(e._s(t.highlight_1))]):e._e(),""!==t.highlight_2?s("span",{staticClass:"tag md-font-13 xs-font-9 word-keep-all"},[e._v(e._s(t.highlight_2))]):e._e(),""!==t.highlight_3?s("span",{staticClass:"tag md-font-13 xs-font-9 word-keep-all"},[e._v(e._s(t.highlight_3))]):e._e()])])],1)],1)}))],2)],1),s("v-snackbar",{attrs:{top:!0,color:e.color},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(" "+e._s(e.errorMessages)+" "),s("v-btn",{attrs:{dark:"",flat:""},on:{click:function(t){e.snackbar=!1}}},[e._v(" Close ")])],1)],1)},i=[],r=(s("8e6e"),s("456d"),s("ac6a"),s("bd86")),o=s("4328"),n=s.n(o),c=s("0b2b"),l=s.n(c),d=s("222d"),u=s.n(d),h=s("34a4"),f=s.n(h),g=s("2ea1"),p=s.n(g),v=s("750f"),m=s.n(v),_=s("df25"),b=s.n(_),y=s("cdc6"),w=s.n(y),k=s("ad73"),x=s.n(k),C=s("8fbe"),S=s.n(C),I=s("428f"),M=s.n(I),O=s("af8b"),P=s.n(O),E=s("ae8c"),T=s.n(E),V=s("f8b2"),j=s.n(V),B=s("2f62");function $(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function D(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?$(Object(s),!0).forEach((function(t){Object(r["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):$(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var R={name:"Home",metaInfo:function(){return{title:this.appName+"｜首頁"}},data:function(){return{boyTeacher:l.a,girlTeacher:u.a,prove:f.a,cardBg1:p.a,cardBg2:m.a,cardBg3:b.a,beTeacher:w.a,beTeacherM:x.a,beTeacherHover:S.a,beTeacherHoverEvent:!1,searchLesson:M.a,searchLessonM:P.a,searchLessonHover:T.a,searchLessonHoverEvent:!1,loading:j.a,loadingStatus:!1,loadingView:!1,snackbar:!1,color:"red",errorMessages:"",homebannerbarSearch:"",homeBannerBarSort:0,homeBannerBarQty:3,resBannerBarPC:[],resBannerBarMobile:[],resLessonRecommendList:[]}},computed:D({},Object(B["c"])(["root","appName","dologinView"]),{userInfo:function(){return JSON.parse(localStorage.getItem("user"))},isTeacherCB:function(){return!!this.userInfo&&this.userInfo.group.indexOf("test_teacher")>-1},isStudentCB:function(){return!!this.userInfo&&this.userInfo.group.indexOf("test_student")>-1}}),mounted:function(){var e=this,t=!0;if(this.loadingView=!0,localStorage.getItem("token")||t){var s={userId:this.userInfo?this.userInfo.user_id:-1,url:"/home"};this.$http.post("/api/account/authCheck/",n.a.stringify(s)).then((function(e){return e.data})).then((function(t){"success"===t.status?t.data.authority&&(e.$http.get("/api/getBannerBar/").then((function(e){return e.data})).then((function(t){e.resBannerBarPC=[],e.resBannerBarMobile=[],t.data.forEach((function(t){"pc"===t.type?e.resBannerBarPC.push(t):"mobile"===t.type&&e.resBannerBarMobile.push(t)}))})),e.getLessonRecommend()):localStorage.getItem("user")&&e.$store.dispatch("logout").then((function(){e.$router.go(0)}))})).catch((function(t){console.log(t),localStorage.getItem("user")&&e.$store.dispatch("logout").then((function(){e.$router.go(0)}))}))}},methods:{test:function(){alert("未開放")},registerTeacherAlert:function(){this.userInfo&&("teacher"===this.userInfo.type?alert("您目前已是老師身份了"):alert("請先登出後，再註冊老師身份專用帳號"))},getLessonRecommend:function(){var e=this;this.loadingStatus=!0;var t={userID:this.userInfo?this.userInfo.user_id:-1,qty:4,keywords:"",only_show_ones_favorites:!1,only_show_lessons_by_this_teacher_s_auth_id:-1,ordered_by:"",filtered_by:""};this.$http.post("/api/lesson/getLessonCardsForCommonUsers/",n.a.stringify(t)).then((function(e){return e.data})).then((function(t){e.loadingStatus=!1,"success"===t.status?e.resLessonRecommendList=t.data:t.status})).catch((function(e){console.log(e)}))},doFavorite:function(e,t){var s=this;if(localStorage.getItem("token")){var a={userID:this.userInfo?this.userInfo.user_id:-1,lessonID:e,status:t};this.$http.post("/api/lesson/addOrRemoveFavoriteLessons/",n.a.stringify(a)).then((function(e){return e.data})).then((function(e){"success"===e.status?(s.getLessonRecommend(),s.snackbar=!0,s.color="green",s.errorMessages="已"+(t?"加入":"移除")+"收藏"):"failed"===e.status?(s.snackbar=!0,s.color="red",s.errorMessages=e.errMsg):(s.snackbar=!0,s.color="orange",s.errorMessages="發生錯誤，請稍後再試")})).catch((function(e){s.snackbar=!0,s.color="orange",s.errorMessages="發生錯誤，請稍後再試",console.log(e)}))}else this.$store.state.dologinView=!0}}},N=R,L=s("2877"),F=Object(L["a"])(N,a,i,!1,null,null,null);t["default"]=F.exports},"3d75":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-content",{attrs:{id:"lessonmain"}},["preview"===e.action&&e.pageView?s("div",{staticClass:"lesson-preview"},[e._v(" 預覽模式 "),s("v-btn",{on:{click:function(t){return e.$router.push("/account/lesson")}}},[s("v-icon",{staticClass:"mr-2"},[e._v("mdi-close")]),e._v("關閉預覽")],1)],1):e._e(),e.pageView?s("div",{staticClass:"lesson-main-bannerbar",style:"background-color:rgb("+e.rgb.r+","+e.rgb.g+","+e.rgb.b+");"},[s("div",{staticClass:"container"},[s("img",{attrs:{id:"lessonbg",src:e.root+e.lessonCardBgPath}}),s("div",{staticClass:"lesson-main-bannerbar-img",style:"background-image:url("+e.root+e.lessonCardBgPath+")"},[s("div",{style:"color:"+e.lessonTextcolor+";"},[e._v(e._s(e.lessonTitle))]),s("div",{style:"color:"+e.lessonTextcolor+";"},[e._v(e._s(e.lessonSubtitle))])])])]):e._e(),e.pageView?s("div",{staticClass:"container pt-0"},[s("div",{staticClass:"row lesson-main-area"},[s("div",{staticClass:"top col-xs-12 col-md-12 border-bottom border-dark"},[s("div",{staticClass:"teacher-photo",style:"background-image: url('"+e.root+e.teacherPhoto+"');"}),s("div",{staticClass:"mb-2"},[s("p",{staticClass:"title mb-2"},[e._v(" "+e._s(e.teacherNickname)+" "),s("img",{attrs:{src:e.teacherGender}}),s("v-chip",{directives:[{name:"clipboard",rawName:"v-clipboard",value:e.copyContent,expression:"copyContent"},{name:"clipboard",rawName:"v-clipboard:success",value:e.clipboardSuccessHandler,expression:"clipboardSuccessHandler",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:e.clipboardErrorHandler,expression:"clipboardErrorHandler",arg:"error"}],staticClass:"h6 cursor text-white grey float-right m-0"},[s("v-icon",{staticClass:"mr-2 text-white"},[e._v("mdi-link")]),s("span",{staticClass:"font-weight-bold"},[e._v("分享課程")])],1)],1),""!==e.teacherEdu1?s("p",{staticClass:"prove"},[e.teacherEduApproved?s("img",{attrs:{src:e.prove}}):e._e(),e._v(e._s(e.teacherEdu1))]):e._e(),""!==e.teacherEdu2?s("p",{staticClass:"prove"},[e.teacherEduApproved?s("img",{attrs:{src:e.prove}}):e._e(),e._v(e._s(e.teacherEdu2))]):e._e(),""!==e.teacherEdu3?s("p",{staticClass:"prove"},[e.teacherEduApproved?s("img",{attrs:{src:e.prove}}):e._e(),e._v(e._s(e.teacherEdu3))]):e._e(),""!==e.teacherJob?s("p",{staticClass:"prove"},[e.teacherJobApproved?s("img",{attrs:{src:e.prove}}):e._e(),e._v(e._s(e.teacherJob))]):e._e(),""!==e.teacherExp?s("p",{staticClass:"prove"},[e.teacherExpApproved?s("img",{attrs:{src:e.prove}}):e._e(),e._v(e._s(e.teacherExp))]):e._e(),s("p",{staticClass:"prove d-block mr-1"},[e._v("教學資歷："+e._s(e.teacherYear)+" "),s("span",{staticClass:"h5 my-1 float-right cursor main-color align-center d-inline-flex",on:{click:function(t){return e.$router.push("/account/profile/"+e.teacherId)}}},[s("v-icon",[e._v("mdi-chevron-double-right")]),e._v("更多老師資訊")],1)])])]),s("div",{staticClass:"middle col-xs-12 col-lg-7 col-xl-8"},[s("div",{staticClass:"mb-2"},[s("span",{staticClass:"title mb-2"},[e._v("["+e._s("offline"===e.lessonType?"實體":"線上")+"]"+e._s(e.lessonName))])]),s("div",[""!==e.lessonSpecially1?s("span",{staticClass:"tag md-font-13 xs-font-9 word-keep-all"},[e._v(e._s(e.lessonSpecially1))]):e._e(),""!==e.lessonSpecially2?s("span",{staticClass:"tag md-font-13 xs-font-9 word-keep-all"},[e._v(e._s(e.lessonSpecially2))]):e._e(),""!==e.lessonSpecially3?s("span",{staticClass:"tag md-font-13 xs-font-9 word-keep-all"},[e._v(e._s(e.lessonSpecially3))]):e._e()]),s("div",{staticClass:"mt-2"},[s("p",{staticClass:"hashtag"},[e._v(e._s(e.lessonTag))])]),s("div",{staticClass:"text-left"},[s("p",{staticClass:"h4 subtitle mb-2"},[e._v("課程介紹")]),s("p",{staticClass:"content",class:{"text-muted":!e.lessonIntro}},[e._v(e._s(e.lessonIntro||"老師尚未填寫相關資訊"))])]),s("div",{staticClass:"text-left"},[s("p",{staticClass:"h4 subtitle mb-2"},[e._v("上課方式")]),s("p",{staticClass:"content",class:{"text-muted":!e.lessonWay}},[e._v(e._s(e.lessonWay||"老師尚未填寫相關資訊"))])]),s("div",{staticClass:"text-left"},[s("p",{staticClass:"h4 subtitle mb-2"},[e._v("授課對象")]),s("p",{staticClass:"content",class:{"text-muted":!e.lessonObject}},[e._v(e._s(e.lessonObject||"老師尚未填寫相關資訊"))])]),s("div",{staticClass:"text-left"},[s("p",{staticClass:"h4 subtitle mb-2"},[e._v("課程大綱")]),e.lessonOutline===e.lessonOutlineTemp?s("p",{staticClass:"content text-muted"},[e._v(e._s("老師尚未填寫相關資訊"))]):e._e(),e.lessonOutline!==e.lessonOutlineTemp?s("div",{staticClass:"lesson-outline",domProps:{innerHTML:e._s(e.lessonOutline)}}):e._e()]),s("div",{staticClass:"text-left"},[s("p",{staticClass:"h4 subtitle mb-2"},[e._v("注意事項")]),s("p",{staticClass:"content",class:{"text-muted":!e.lessonMemo}},[e._v(e._s(e.lessonMemo||"老師尚未填寫相關資訊"))])])]),s("div",{staticClass:"bottom col-xs-12 col-lg-5 col-xl-4"},[s("div",{staticClass:"text-left program"},[s("v-icon",[e._v("mdi-check-decagram")]),s("p",{staticClass:"h3 m-0 py-2 main-color font-weight-bold text-right border-bottom"},[e._v("鐘點費NT$"+e._s(e.lessonFee))]),s("p",{staticClass:"h3 m-0 py-2 font-weight-bold text-right"},[s("span",{staticClass:"h6 mr-2"},[e._v("提供給您更多選擇更多優惠")]),e._v("購買方案")]),e.lessonSaleTry?s("div",{staticClass:"item-group item-full bg-select-color cursor-no-hover",on:{click:function(t){return e.addShoppingItem("trial",e.lessonSaleFeeTry)}}},[s("span",{staticClass:"h3 m-0 float-right"},[e._v("試課體驗"),s("strong",{staticClass:"h6"},[e._v("30分鐘起")])]),s("span",{staticClass:"h3 m-0 font-weight-bold"},[s("strong",{staticClass:"h6"},[e._v("NT$")]),e._v(e._s(e.lessonSaleFeeTry)),s("strong",{staticClass:"h6"},[e._v("/次")])])]):e._e(),e.lessonSaleTry?s("p",{staticClass:"h6 mt-0 font-weight-bold text-danger text-right"},[e._v("每位學生每門課限申請乙次")]):e._e(),e.lessonSaleUnit?s("div",{staticClass:"item-group item-full bg-select-color cursor-no-hover",on:{click:function(t){return e.addShoppingItem("no_discount",e.lessonFee)}}},[s("span",{staticClass:"h3 m-0 float-right"},[e._v("單節購買"),s("strong",{staticClass:"h6"},[e._v("60分鐘")])]),s("span",{staticClass:"h3 m-0 font-weight-bold"},[s("strong",{staticClass:"h6"},[e._v("NT$")]),e._v(e._s(e.lessonFee)),s("strong",{staticClass:"h6"},[e._v("/小時")])])]):e._e(),e._l(e.lessonSale,(function(t,a){return s("div",{key:"s"+a,staticClass:"item-group bg-select-color cursor-no-hover",on:{click:function(s){e.addShoppingItem(a,Math.round(t.hour*e.lessonFee*t.off/100))}}},[s("div",[s("span",{staticClass:"h3 m-0 font-weight-bold"},[e._v(e._s(t.off.slice(0,1))),s("strong",{staticClass:"h5 font-weight-bold"},[e._v(e._s(t.off.slice(1,2)>0?t.off.slice(1,2):"")+"折")])])]),s("div",[s("span",{staticClass:"h5 m-0"},[e._v(e._s(t.hour)+"小時方案")]),s("span",{staticClass:"h6 m-0 text-center bg-button-color"},[e._v("共省下NT$"+e._s(t.hour*(e.lessonFee-Math.round(e.lessonFee*t.off/100))))])]),s("div",[s("span",{staticClass:"h3 m-0 font-weight-bold float-right"},[s("strong",{staticClass:"h6"},[e._v("NT$")]),e._v(e._s(Math.round(e.lessonFee*t.off/100))),s("strong",{staticClass:"h6"},[e._v("/小時")])])])])}))],2),s("div",{staticClass:"mt-5",staticStyle:{position:"relative"}},[s("TimeSelector",{staticClass:"small-area",attrs:{readonly:!0,reservation:!1,"select-week-view":!0,"select-date-default":e.lessonDateDefault,"select-date-booked":e.lessonDateBooked}})],1),s("div",{staticClass:"mt-4 text-center"},[s("v-btn",{staticClass:"w-100 my-3 mx-0 p-4 h5 bg-button-color v-btn theme--light",on:{click:function(t){return e.doReservation()}}},[s("v-icon",{staticClass:"mr-2"},[e._v("mdi-calendar-edit")]),e._v("立即預約 ")],1),e.userInfo&&"teacher"!==e.userInfo.type?s("v-btn",{staticClass:"w-100 my-3 mx-0 p-4 h5 bg-chat-color v-btn theme--light",on:{click:function(t){return e.doConnectChatroom()}}},[s("v-icon",{staticClass:"mr-2"},[e._v("mdi-comment-text-multiple")]),e._v("聯絡老師 ")],1):e._e()],1)])])]):e._e(),s("v-snackbar",{attrs:{top:!0,color:e.color},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(" "+e._s(e.errorMessages)+" "),s("v-btn",{attrs:{dark:"",flat:""},on:{click:function(t){e.snackbar=!1}}},[e._v(" Close ")])],1)],1)},i=[],r=(s("8e6e"),s("456d"),s("ac6a"),s("28a5"),s("c5f6"),s("bd86")),o=(s("a481"),s("4328")),n=s.n(o),c=s("9814"),l=s.n(c),d=s("6905"),u=s.n(d),h=s("0b2b"),f=s.n(h),g=s("222d"),p=s.n(g),v=s("34a4"),m=s.n(v),_=s("2ea1"),b=s.n(_),y=s("750f"),w=s.n(y),k=s("df25"),x=s.n(k),C=s("77fc"),S=s("2f62");function I(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function M(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?I(Object(s),!0).forEach((function(t){Object(r["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):I(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var O={name:"LessonMain",components:{TimeSelector:C["default"]},metaInfo:function(){return{title:this.appName+"｜課程｜"+("preview"===this.action?"【預覽】":"")+this.lessonName}},data:function(){return{pageView:!1,copyContent:window.location.href.replace("preview","view"),path:"",action:"",boyIcon:l.a,girlIcon:u.a,boyTeacher:f.a,girlTeacher:p.a,prove:m.a,cardBg1:b.a,cardBg2:w.a,cardBg3:x.a,snackbar:!1,color:"red",errorMessages:"",rgb:{r:0,g:0,b:0},teacherId:-1,teacherApproved:!1,teacherEduApproved:!1,teacherEdu1:"",teacherEdu2:"",teacherEdu3:"",teacherJobApproved:!1,teacherJob:"",teacherExpApproved:!1,teacherExp:"",teacherAllApproved:!1,teacherNickname:"",teacherYear:"",teacherGender:null,teacherPhoto:"",lessonOutline:"",lessonOutlineTemp:'<div class="area"><div class="chapter"><div>第1章</div><div></div></div><div class="subsection"><div>1-1</div><div></div></div></div>',lessonId:"",lessonTitle:"",lessonSubtitle:"",lessonTextcolor:"#ffffff",lessonCardBgPath:"",lessonName:"",lessonType:"online",lessonFavorite:!1,lessonScore:0,lessonReviewed:0,lessonFee:0,lessonSpecially1:"",lessonSpecially2:"",lessonSpecially3:"",lessonIntro:"",lessonWay:"",lessonObject:"",lessonMemo:"",lessonTag:"",lessonSaleTry:!1,lessonSaleFeeTry:200,lessonSaleUnit:!1,lessonSale:[],lessonDateDefault:[],lessonDateBooked:[],canReservationTime:0,imgEl:null}},computed:M({},Object(S["c"])(["root","appName","dologinView","doChatView","doChatAction","doChatroomID"]),{userInfo:function(){return JSON.parse(localStorage.getItem("user"))},shoppingInfo:function(){return JSON.parse(localStorage.getItem("shopping"))},isTeacherCB:function(){return!!this.userInfo&&this.userInfo.group.indexOf("test_teacher")>-1},isStudentCB:function(){return!!this.userInfo&&this.userInfo.group.indexOf("test_student")>-1}}),watch:{"$route.fullPath":function(e){this.doMounted()},imgEl:{handler:function(e,t){this.getAverageRGB()},deep:!0}},mounted:function(){this.doMounted()},methods:{test:function(){alert("未開放")},addShoppingItem:function(e,t){if(localStorage.getItem("token"))if("student"===this.userInfo.type){var s={updateTime:(new Date).getTime(),item:[{teacherID:this.teacherId,lessonID:this.lessonId,lessonSaleCase:e,lessonSalePrice:t}]};localStorage.setItem("shopping",JSON.stringify(s)),this.$router.push("/store/checkout")}else alert("目前無法選購");else this.$store.state.dologinView=!0},doReservation:function(){localStorage.getItem("token")?"student"===this.userInfo.type?this.getLessonReservationTime():alert("目前無法預約"):this.$store.state.dologinView=!0},doMounted:function(){var e=this,t=!1;if("preview"===this.$route.params.action&&null!==this.userInfo?"teacher"===this.userInfo.type&&(t=!0):"view"===this.$route.params.action?t=!0:this.$router.push("/"),localStorage.getItem("token")||t){var s={userId:this.userInfo?this.userInfo.user_id:-1,url:this.$route.path};this.$http.post("/api/account/authCheck/",n.a.stringify(s)).then((function(e){return e.data})).then((function(t){"success"===t.status?t.data.authority&&(e.$route.params.action&&(e.action=e.$route.params.action),e.$route.params.id&&(e.lessonId=e.$route.params.id),e.getLessonInfo()):localStorage.getItem("user")&&e.$store.dispatch("logout").then((function(){e.$router.go(0)}))})).catch((function(t){console.log(t),localStorage.getItem("user")&&e.$store.dispatch("logout").then((function(){e.$router.go(0)}))}))}else this.$router.push("/")},getLessonReservationTime:function(){var e=this,t={userID:this.userInfo?this.userInfo.user_id:-1,lessonID:this.lessonId};this.$http.post("/api/lesson/getStudentsAvailableRemainingMinutes/",n.a.stringify(t)).then((function(e){return e.data})).then((function(t){if("success"===t.status)if(t.data.all_available_remaining_minutes_of_this_lesson>0){t.data.student_has_unused_trial_lesson_sales_set&&alert("因您尚有「試課方案」未使用，故本次預約僅能先使用「試課方案」時數");var s={teacherID:e.teacherId,lessonID:e.lessonId,time:t.data.student_has_unused_trial_lesson_sales_set?30:t.data.all_available_remaining_minutes_of_this_lesson,trial:t.data.student_has_unused_trial_lesson_sales_set};localStorage.setItem("reservation",JSON.stringify(s)),e.$router.push("/lesson/appointment")}else alert("目前您尚無可用的預約時數，請先購買課程方案");else"failed"===t.status?(e.snackbar=!0,e.color="red",e.errorMessages=t.errMsg):(e.snackbar=!0,e.color="orange",e.errorMessages="發生錯誤，請稍後再試")})).catch((function(t){e.loadingView=!1,e.snackbar=!0,e.color="orange",e.errorMessages="發生錯誤，請稍後再試",console.log(t)}))},getLessonSpecificAvailableTime:function(){var e=this,t={userID:this.userInfo?this.userInfo.user_id:-1,lessonID:this.lessonId};this.$http.post("/api/lesson/getLessonSpecificAvailableTime/",n.a.stringify(t)).then((function(e){return e.data})).then((function(t){"success"===t.status?(e.pageView=!0,e.lessonDateDefault=t.data.availableTime||[],e.lessonDateBooked=t.data.bookedTime||[]):(t.status,e.$router.go(-1))})).catch((function(t){console.log(t),e.$router.go(-1)}))},getTeacherProfile:function(e){var t=this;this.$http.get("/api/account/returnTeacherProfileForPublicViewing/?userID=".concat(e,"&type=teacher")).then((function(e){return e.data})).then((function(e){"success"===e.status?(t.teacherApproved=e.data.id_approved,t.teacherEdu1=e.data.education_1,t.teacherEdu2=e.data.education_2,t.teacherEdu3=e.data.education_3,t.teacherEduApproved=e.data.education_approved,t.teacherJob=e.data.company,t.teacherJobApproved=e.data.work_approved,t.teacherExp=e.data.special_exp,t.teacherExpApproved=e.data.other_approved,t.teacherAllApproved=e.data.is_approved,t.teacherNickname=e.data.nickname,t.teacherYear=e.data.tutor_experience,t.teacherGender=e.data.is_male?l.a:u.a,""!==e.data.thumbnail_dir?t.teacherPhoto=e.data.thumbnail_dir:e.data.is_male?t.teacherPhoto=t.boyTeacher:t.teacherPhoto=t.girlTeacher,t.getLessonSpecificAvailableTime()):(e.status,t.$router.go(-1))})).catch((function(e){console.log(e),t.$router.go(-1)}))},getLessonInfo:function(){var e=this,t="view"===this.action?"/api/lesson/returnLessonDetailsForBrowsing/?action=browsing":"preview"===this.action?"api/lesson/returnLessonDetailsForTeacherWhoCreatedIt/?action=editLesson":"";this.$http.get("".concat(t,"&lessonID=").concat(this.lessonId,"&userID=").concat(this.userInfo?this.userInfo.user_id:-1)).then((function(e){return e.data})).then((function(t){if("success"===t.status)if("preview"===e.action||"selling"===t.data.selling_status){if(e.lessonFavorite=t.data.is_this_my_favorite_lesson,e.lessonTitle=t.data.big_title,e.lessonSubtitle=t.data.little_title,e.lessonTextcolor=t.data.title_color,e.lessonCardBg=t.data.background_picture_code,99===t.data.background_picture_code?e.lessonCardBgPath=t.data.background_picture_path:0===t.data.background_picture_code?e.lessonCardBgPath=e.cardBg1:1===t.data.background_picture_code?e.lessonCardBgPath=e.cardBg2:2===t.data.background_picture_code&&(e.lessonCardBgPath=e.cardBg3),"preview"===e.action?e.teacherId=e.userInfo?e.userInfo.user_id:-1:"view"===e.action&&(e.teacherId=t.data.teacher_auth_id),e.lessonName=t.data.lesson_title,e.lessonType=t.data.lesson_type,e.lessonFee=t.data.price_per_hour,e.lessonSpecially1=t.data.highlight_1,e.lessonSpecially2=t.data.highlight_2,e.lessonSpecially3=t.data.highlight_3,e.lessonIntro=t.data.lesson_intro,e.lessonWay=t.data.how_does_lesson_go,e.lessonObject=t.data.target_students,e.lessonMemo=t.data.lesson_remarks,e.lessonOutline=t.data.syllabus,e.lessonTag=t.data.lesson_attributes,e.lessonSaleTry=Number(t.data.trial_class_price)>=0,e.lessonSaleFeeTry=Number(t.data.trial_class_price)>=0?Number(t.data.trial_class_price):200,e.lessonSaleUnit=t.data.lesson_has_one_hour_package,"preview"===e.action?e.getTeacherProfile(e.userInfo?e.userInfo.user_id:-1):e.getTeacherProfile(t.data.teacher_auth_id),""!==t.data.discount_price&&null!==t.data.discount_price){var s=t.data.discount_price.split(";");e.lessonSale=[],s.forEach((function(t,s){if(""!==t){var a=t.split(":");e.lessonSale.push({hour:a[0],off:a[1]})}}))}setTimeout((function(){-1!==e.$router.history.current.path.indexOf("/lesson/main")&&(e.imgEl=document.getElementById("lessonbg"))}),5e3)}else e.$router.push("/");else t.status,e.$router.go(-1)})).catch((function(t){console.log(t),e.$router.go(-1)}))},getAverageRGB:function(){var e,t,s,a,i=document.getElementById("lessonbg"),r=5,o={r:0,g:0,b:0},n=document.createElement("canvas"),c=n.getContext&&n.getContext("2d"),l=-4,d=0;if(!c)return o;if(!i)return o;s=n.height=i.naturalHeight||i.offsetHeight||i.height,t=n.width=i.naturalWidth||i.offsetWidth||i.width,c.drawImage(i,0,0);try{e=c.getImageData(0,0,t,s)}catch(u){return o}a=e.data.length;while((l+=4*r)<a)++d,this.rgb.r+=e.data[l],this.rgb.g+=e.data[l+1],this.rgb.b+=e.data[l+2];this.rgb.r=~~(this.rgb.r/d),this.rgb.g=~~(this.rgb.g/d),this.rgb.b=~~(this.rgb.b/d)},doFavorite:function(e,t){var s=this;if(localStorage.getItem("token")){var a={userID:this.userInfo?this.userInfo.user_id:-1,lessonID:e,status:t};this.$http.post("/api/lesson/addOrRemoveFavoriteLessons/",n.a.stringify(a)).then((function(e){return e.data})).then((function(e){"success"===e.status?(s.getLessonInfo(),s.snackbar=!0,s.color="green",s.errorMessages="已"+(t?"加入":"移除")+"收藏"):"failed"===e.status?(s.snackbar=!0,s.color="red",s.errorMessages=e.errMsg):(s.snackbar=!0,s.color="orange",s.errorMessages="發生錯誤，請稍後再試")})).catch((function(e){s.snackbar=!0,s.color="orange",s.errorMessages="發生錯誤，請稍後再試",console.log(e)}))}else this.$store.state.dologinView=!0},doConnectChatroom:function(){var e=this;if(localStorage.getItem("token")){var t={userID:this.userInfo?this.userInfo.user_id:-1,chatUserID:this.teacherId};this.$http.post("/api/chat/checkOrCreateChatroom/",n.a.stringify(t)).then((function(e){return e.data})).then((function(t){"success"===t.status?(e.$store.state.doChatView=!0,e.$store.state.doChatroomID=t.data.chatID):"failed"===t.status?(e.snackbar=!0,e.color="red",e.errorMessages=t.errMsg):(e.snackbar=!0,e.color="orange",e.errorMessages="發生錯誤，請稍後再試")})).catch((function(t){e.snackbar=!0,e.color="orange",e.errorMessages="發生錯誤，請稍後再試",console.log(t)}))}else this.$store.state.dologinView=!0},clipboardSuccessHandler:function(e){e.value,e.event;"preview"===this.action&&alert("請注意！若課程為非上架狀態，其他會員及訪客將無法瀏覽"),this.snackbar=!0,this.color="green",this.errorMessages="已複製網址"},clipboardErrorHandler:function(e){e.value,e.event}}},P=O,E=s("2877"),T=Object(E["a"])(P,a,i,!1,null,null,null);t["default"]=T.exports},"41c0":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-navigation-drawer",{class:{drawer_bg_dark:"dark"===e.theme,drawer_bg_light:"light"===e.theme,"v-navigation-small":"50"===e.shrink},staticStyle:{"max-height":"none"},style:"margin-left: -"+(e.shrink-e.shrink)+"px; width: "+e.shrink+"px; z-index: 202!important;transform: translateX(0px)!important;overflow: visible;top: 0px;left: 0px;position: fixed;",attrs:{id:"app-drawer",dark:"dark"===e.theme,light:"light"===e.theme,app:"",floating:"",persistent:"","mobile-break-point":"991",absolute:""},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}},[s("v-img",{staticStyle:{cursor:"unset"},attrs:{src:e.image,height:"100%"}},[s("v-layout",{staticClass:"fill-height",attrs:{tag:"v-list",column:""}},[s("v-list-tile",{staticClass:"mb-3",staticStyle:{height:"48px"}},[s("v-list-tile-avatar",{class:{"v-list__tile__avatar__small":"50"===e.shrink},attrs:{color:""}},[s("v-img",{staticStyle:{cursor:"default"},attrs:{src:e.logo,height:"",contain:""}})],1),s("v-list-tile-title",{staticClass:"title",style:"light"==e.theme?"color:#000;":"color:#FFF;"},[e._v(" 平台 ")])],1),s("v-divider",{staticClass:"mb-0",class:{drawer_border_dark:"dark"===e.theme,drawer_border_light:"light"===e.theme}}),e._l(e.demo?e.demolinks:e.links,(function(t,a){return s("div",{key:a},[s("v-list-tile",{staticClass:"v-list-item",class:{"v-list-item-small":"50"===e.shrink},attrs:{to:t.to,avatar:""},on:{click:function(s){e.navItem=e.navItem===t.text?"":t.text}}},[s("v-list-tile-action",[s("v-icon",{staticClass:"nav_icon"},[e._v(" "+e._s(t.icon)+" ")])],1),s("v-list-tile-title",{domProps:{textContent:e._s(t.text)}})],1),s("div",{staticClass:"nav_list",class:{nav_open:e.navItem===t.text,nav_list_small:"50"===e.shrink}},e._l(t.children,(function(t,a){return s("v-list-tile",{key:a,staticClass:"v-list-item nav_children",attrs:{to:t.to,avatar:""}},[s("v-list-tile-action",[s("v-icon",{staticClass:"nav_icon"},[e._v(" "+e._s(t.icon)+" ")])],1),s("v-list-tile-title",{domProps:{textContent:e._s(t.text)}})],1)})),1)],1)}))],2)],1)],1)},i=[],r=(s("8e6e"),s("ac6a"),s("456d"),s("bd86")),o=s("1ae4"),n=s.n(o),c=s("2f62");function l(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function d(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?l(Object(s),!0).forEach((function(t){Object(r["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):l(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var u={data:function(){return{navItem:"",logo:n.a,links:JSON.parse(localStorage.getItem("normalMenu")),demolinks:JSON.parse(localStorage.getItem("devMenu")),responsive:!1}},computed:d({},Object(c["c"])("app",["image","color","theme","shrink","demo"]),{inputValue:{get:function(){return this.$store.state.app.drawer},set:function(e){this.setDrawer(e)}},items:function(){return this.$t("Layout.View.items")}}),mounted:function(){var e=this;JSON.parse(localStorage.getItem("normalMenu"))&&JSON.parse(localStorage.getItem("devMenu"))||this.$store.dispatch("logout").then((function(){e.$router.push("/")})),this.onResponsiveInverted(),window.addEventListener("resize",this.onResponsiveInverted)},beforeDestroy:function(){window.removeEventListener("resize",this.onResponsiveInverted)},methods:d({},Object(c["b"])("app",["setDrawer","toggleDrawer"]),{onResponsiveInverted:function(){window.innerWidth<991?this.responsive=!0:this.responsive=!1}})},h=u,f=(s("ff57"),s("2877")),g=Object(f["a"])(h,a,i,!1,null,null,null);t["default"]=g.exports},"428f":function(e,t,s){e.exports=s.p+"img/searchLesson.d75fe4ba.jpg"},4360:function(e,t,s){"use strict";var a=s("2b0e"),i=s("2f62"),r=s("0b26"),o=s.n(r),n=s("bc3a"),c=s.n(n),l=s("4328"),d=s.n(l),u={login:function(e,t){var s=e.commit;return new Promise((function(e,a){localStorage.removeItem("token"),s("auth_request");var i={userName:t.username,userPwd:o()(t.password).toUpperCase()};c.a.post("/api/account/signin/",d.a.stringify(i)).then((function(e){return e.data})).then((function(t){if("success"===t.status){var a=t.data.user_token;"success"===t.status&&(localStorage.setItem("token",a),s("auth_success",{token:a}))}e(t)}))}))},logout:function(e){var t=e.commit;return new Promise((function(e,s){var a=JSON.parse(localStorage.getItem("user"))?JSON.parse(localStorage.getItem("user")).user_id:"";t("logout");var i={userId:a};c.a.post("/api/account/logout/",d.a.stringify(i)),localStorage.removeItem("token"),localStorage.removeItem("user"),console.log(localStorage.getItem("token")),console.log(JSON.parse(localStorage.getItem("user"))),delete c.a.defaults.headers.common["Authorization"],e()}))}},h={authorized:function(e){return!!e.token},authstatus:function(e){return e.authStatus}},f=s("2a74"),g=s("0a78"),p={setloginView:Object(g["a"])("login"),auth_request:function(e){e.authStatus="loading"},auth_success:function(e,t){var s=t.token,a=t.user,i=t.normalMenu,r=t.devMenu,o=t.moduleDataInitDate;e.authStatus="success",e.token=s,e.user=a,e.normalMenu=i,e.devMenu=r,e.moduleDataInitDate=o},auth_error:function(e){e.authStatus="error"},logout:function(e){e.authStatus="",e.token=""},setTableList:function(e,t){e.tableList=t}},v={appName:"開課！Quikok",root:"",isProduction:!1,fromPath:"",toPath:"",deposit:0,dologinView:!1,doResetPwdView:!1,doChatView:!1,doChatAction:"list",doChatroomID:-1,doReadStatus:!1,loginStatus:!1,snapshot:""};a["default"].use(i["a"]);var m=new i["a"].Store({actions:u,getters:h,modules:f["default"],mutations:p,state:v});t["a"]=m},4579:function(e,t,s){e.exports=s.p+"img/landing_pc.2eb4ef47.jpg"},4678:function(e,t,s){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"73332","./en-il.js":"73332","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function i(e){var t=r(e);return s(t)}function r(e){if(!s.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}i.keys=function(){return Object.keys(a)},i.resolve=r,e.exports=i,i.id="4678"},"47c3":function(e,t,s){e.exports=s.p+"img/landing_mobile.917680d6.jpg"},"482c":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-content",{staticClass:"bg-grey-full-page",attrs:{id:"reservation"}},[e.pageView?s("div",{staticClass:"container"},[s("p",{staticClass:"mb-5 h3 font-weight-bold",staticStyle:{"word-wrap":"break-word","white-space":"pre-wrap","text-align":"center","font-weight":"500!important"}},[e._v("課程預約")]),s("hr"),s("div",{staticClass:"row"},[s("div",{staticClass:"row col-12"},[s("div",{staticClass:"col-4 col-lg-2 mb-3"},[s("img",{staticClass:"w-100",attrs:{src:e.root+e.lessonCardBgPath}})]),s("div",{staticClass:"col-8 col-lg-10 mb-3"},[s("p",{staticClass:"title mt-2 mb-0"},[e._v(e._s(e.lessonName))]),s("p",{staticClass:"h5 mt-0 cursor main-color",on:{click:function(t){return e.$router.push("/account/profile/"+e.teacherId)}}},[e._v(e._s(e.teacherNickname))])])]),e.trialReservationInfo?s("div",{staticClass:"col-12"},[s("p",{staticClass:"content text-danger"},[e._v(" 「試課方案」注意事項："),s("br"),s("span",{staticClass:"tips"},[e._v("※該方案時數為30分鐘起，實際上課長度依老師決定，建議您在預約前先與老師確認。")]),s("br"),s("span",{staticClass:"tips"},[e._v("※該方案於選擇預約時段時，只須選擇開頭的30分鐘對應時段即可，實際結束時間將依上課當日完課時間為準。")])])]):e._e(),s("div",{staticClass:"col-lg-6 col-md-12 mb-5"},[s("TimeSelector",{attrs:{readonly:!0,reservation:!0,"select-week-view":!0,"select-date-default":e.lessonDateDefault,"select-date-booked":e.lessonDateBooked,"remove-select-date":e.removeReservationTime,"can-select-date":e.lastReservationTime},on:{"res-select-open-time":e.resSelectOpenTime,"res-select-open-time-detail":e.resSelectOpenTimeDetail}})],1),s("div",{staticClass:"select-time col-lg-6 col-md-12"},[s("p",{staticClass:"h4 selecttime-title bg-grey0"},[e._v("已選擇時段"),s("span",[e._v("剩餘可選時數："+e._s(e.lastReservationTime)+"分鐘")])]),0===e.reservationTimeList.length?s("p",{staticClass:"h4 text-center text-muted"},[e._v("目前尚無已選擇時段")]):e._e(),e._l(e.reservationTimeList,(function(t,a){return s("div",{key:"t"+a,staticClass:"select-timeinfor row"},[s("div",{staticClass:"light"}),s("div",{staticClass:"col-10 col-sm-4"},[e._v(" "+e._s(t.date)+" "),s("span",{staticClass:"h6 m-0 ml-1"},[e._v("("+e._s(t.week)+")")])]),s("div",{staticClass:"d-block d-sm-none col-2 text-right p-0"},[s("v-icon",{staticClass:"cursor",on:{click:function(s){return e.doRemoveReservationTime(t)}}},[e._v("mdi-close")])],1),s("div",{staticClass:"col-12 col-sm-7 title"},[e._v(" "+e._s(t.timeStart)+"-"+e._s(t.timeEnd)+" "),s("v-chip",{staticClass:"m-0 ml-2 bg-main-color"},[e._v(e._s(t.mins)+"分鐘")])],1),s("div",{staticClass:"d-none d-sm-block col-sm-1 text-right p-0"},[s("v-icon",{staticClass:"cursor",on:{click:function(s){return e.doRemoveReservationTime(t)}}},[e._v("mdi-close")])],1)])}))],2)]),s("div",{staticClass:"row mt-5"},[s("div",{staticClass:"col-xs-12 col-md-12 text-center"},[s("v-btn",{staticClass:"mx-4 mb-4 p-4 h5 bg-button-color",on:{click:function(t){return e.doSubmit()}}},[s("v-icon",{staticClass:"mr-2"},[e._v("mdi-upload")]),e._v("申請預約 ")],1)],1)])]):e._e(),s("v-snackbar",{attrs:{top:!0,color:e.color},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(" "+e._s(e.errorMessages)+" "),s("v-btn",{attrs:{dark:"",flat:""},on:{click:function(t){e.snackbar=!1}}},[e._v(" Close ")])],1)],1)},i=[],r=(s("8e6e"),s("456d"),s("ac6a"),s("bd86")),o=s("4328"),n=s.n(o),c=s("2ea1"),l=s.n(c),d=s("750f"),u=s.n(d),h=s("df25"),f=s.n(h),g=s("77fc"),p=s("2f62");function v(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function m(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?v(Object(s),!0).forEach((function(t){Object(r["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):v(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var _={name:"Reservation",components:{TimeSelector:g["default"]},metaInfo:function(){return{title:this.appName+"｜課程預約｜"+this.lessonName}},data:function(){return{pageView:!1,cardBg1:l.a,cardBg2:u.a,cardBg3:f.a,snackbar:!1,color:"red",errorMessages:"",teacherId:-1,teacherNickname:"",lessonId:"",lessonCardBgPath:"",lessonName:"",canReservationTime:0,trialReservationInfo:!1,lessonDateDefault:[],lessonDateBooked:[],selectTimeList:[],selectTimeDetailList:[],removeReservationTime:{}}},computed:m({},Object(p["c"])(["root","appName"]),{userInfo:function(){return JSON.parse(localStorage.getItem("user"))},reservationTimeList:function(){var e=[],t=["日","一","二","三","四","五","六"];return this.selectTimeDetailList.forEach((function(s){var a=0;s.time.forEach((function(i){i.code===a+1?(e[e.length-1].mins=e[e.length-1].mins+30,e[e.length-1].code.push(i.code),e[e.length-1].timeEnd=i.timeEnd):e.push({days:s.days,date:s.date,week:t[s.week],mins:30,code:[i.code],timeStart:i.timeStart,timeEnd:i.timeEnd}),a=i.code}))})),e},selectReservationTime:function(){var e=0;return this.reservationTimeList.forEach((function(t){e+=t.mins})),e},lastReservationTime:function(){return this.canReservationTime-this.selectReservationTime}}),watch:{},mounted:function(){var e=this;if(localStorage.getItem("token")&&"student"===this.userInfo.type){var t={userId:this.userInfo?this.userInfo.user_id:-1,url:this.$route.path};this.$http.post("/api/account/authCheck/",n.a.stringify(t)).then((function(e){return e.data})).then((function(t){if("success"===t.status){if(t.data.authority){var s=JSON.parse(localStorage.getItem("reservation"));s?(e.teacherId=s?s.teacherID:"",e.lessonId=s?s.lessonID:"",e.canReservationTime=s?s.time:0,e.trialReservationInfo=!!s&&s.trial,e.getLessonInfo()):(e.snackbar=!0,e.color="red",e.errorMessages="您尚未選擇課程",setTimeout((function(){e.$router.push("/")}),3e3))}}else localStorage.getItem("user")&&e.$store.dispatch("logout").then((function(){e.$router.go(0)}))})).catch((function(t){console.log(t),localStorage.getItem("user")&&e.$store.dispatch("logout").then((function(){e.$router.go(0)}))}))}else this.$router.push("/")},methods:{test:function(){alert("未開放")},getLessonInfo:function(){var e=this;this.$http.get("/api/lesson/returnLessonDetailsForBrowsing/?action=browsing&lessonID=".concat(this.lessonId,"&userID=").concat(this.userInfo?this.userInfo.user_id:-1)).then((function(e){return e.data})).then((function(t){"success"===t.status?(e.lessonCardBg=t.data.background_picture_code,99===t.data.background_picture_code?e.lessonCardBgPath=t.data.background_picture_path:0===t.data.background_picture_code?e.lessonCardBgPath=e.cardBg1:1===t.data.background_picture_code?e.lessonCardBgPath=e.cardBg2:2===t.data.background_picture_code&&(e.lessonCardBgPath=e.cardBg3),e.teacherId=t.data.teacher_auth_id,e.teacherNickname=t.data.teacher_nickname,e.lessonName=t.data.lesson_title,e.getLessonSpecificAvailableTime()):(t.status,e.$router.go(-1))})).catch((function(t){console.log(t),e.$router.go(-1)}))},getLessonSpecificAvailableTime:function(){var e=this,t={userID:this.userInfo?this.userInfo.user_id:-1,lessonID:this.lessonId};this.$http.post("/api/lesson/getLessonSpecificAvailableTime/",n.a.stringify(t)).then((function(e){return e.data})).then((function(t){"success"===t.status?(e.pageView=!0,e.lessonDateDefault=t.data.availableTime||[],e.lessonDateBooked=t.data.bookedTime||[],t.data.availableTime===[]&&(e.color="red",e.errorMessages="課程目前無可預約時段",setTimeout((function(){e.$router.push("/")}),3e3))):e.$router.go(-1)}))},resSelectOpenTime:function(e){this.selectTimeList=e},resSelectOpenTimeDetail:function(e){this.selectTimeDetailList=e},doRemoveReservationTime:function(e){this.removeReservationTime=e},resRemoveReservationTime:function(e){this.removeReservationTime=e},doSubmit:function(){var e=this,t=new FormData;t.append("lessonID",this.lessonId),t.append("userID",this.userInfo?this.userInfo.user_id:-1),t.append("bookingDateTime",this.selectTimeList.join(";")),this.$http.post("/api/lesson/bookingLessons/",t).then((function(e){return e.data})).then((function(t){"success"===t.status?(e.snackbar=!0,e.color="green",e.errorMessages="申請預約已送出",setTimeout((function(){e.$router.push("/account/study")}),3e3)):"failed"===t.status?(e.snackbar=!0,e.color="red",e.errorMessages=t.errMsg):(e.snackbar=!0,e.color="orange",e.errorMessages="發生錯誤，請稍後再試")})).catch((function(t){e.snackbar=!0,e.color="orange",e.errorMessages="發生錯誤，請稍後再試",console.log(t)}))}}},b=_,y=s("2877"),w=Object(y["a"])(b,a,i,!1,null,null,null);t["default"]=w.exports},"49d6":function(e,t,s){e.exports=s.p+"img/lesson_card.54ba29f9.png"},"4cba":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container my-0 p-0",attrs:{id:"blog-main"}},[s("div",{domProps:{innerHTML:e._s(e.resBlogData)}})])},i=[],r=(s("8e6e"),s("ac6a"),s("456d"),s("bd86")),o=s("4328"),n=s.n(o),c=s("2f62");function l(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function d(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?l(Object(s),!0).forEach((function(t){Object(r["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):l(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var u={name:"BlogMain",metaInfo:function(){return{title:this.appName+"｜Blog"}},data:function(){return{resBlogData:""}},computed:d({},Object(c["c"])(["appName"]),{userInfo:function(){return JSON.parse(localStorage.getItem("user"))}}),watch:{"$route.fullPath":function(e){this.doMounted()}},mounted:function(){this.doMounted()},methods:{doMounted:function(){var e=this,t=!0;if(localStorage.getItem("token")||t){var s={userId:this.userInfo?this.userInfo.user_id:-1,url:this.$route.path};this.$http.post("/api/account/authCheck/",n.a.stringify(s)).then((function(e){return e.data})).then((function(t){"success"===t.status?t.data.authority&&e.$http.get("/articles/").then((function(e){return e.data})).then((function(t){e.resBlogData=t})):localStorage.getItem("user")&&e.$store.dispatch("logout").then((function(){e.$router.go(0)}))})).catch((function(t){console.log(t),localStorage.getItem("user")&&e.$store.dispatch("logout").then((function(){e.$router.go(0)}))}))}}}},h=u,f=s("2877"),g=Object(f["a"])(h,a,i,!1,null,null,null);t["default"]=g.exports},"4d55":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-content",{attrs:{id:"landing"}},[s("div",{attrs:{id:"message-icon"},on:{click:function(t){return e.doOpenMessage()}}},[s("div",{staticClass:"cursor"},[s("v-icon",[e._v("mdi-facebook-messenger")])],1)]),s("div",{staticClass:"pc"},[s("div",{staticClass:"info-background",style:"background-image: url('"+e.landingPc+"')"}),s("div",{staticClass:"info-element"},[s("div",{staticClass:"svg-1 orange size-1",staticStyle:{top:"calc(200vh - 250px)",left:"calc(5vw + 0px)",opacity:".75"}}),s("div",{staticClass:"svg-1 orange size-1",staticStyle:{top:"calc(200vh - 210px)",right:"calc(30vw + 0px)",opacity:".5"}}),s("div",{staticClass:"svg-3 orange size-1",staticStyle:{top:"calc(130vh + 0px)",left:"calc(42.5vw + 50px)",opacity:".5"}}),s("div",{staticClass:"svg-1 orange size-2",staticStyle:{top:"calc(15vh + 0px)",right:"calc(20vw + 0px)",opacity:".5"}}),s("div",{staticClass:"svg-1 orange size-2",staticStyle:{top:"calc(100vh - 25px)",left:"calc(25vw + 0px)",opacity:".5"}}),s("div",{staticClass:"svg-3 orange size-2",staticStyle:{top:"calc(140vh)",right:"calc(3vw + 0px)",opacity:".75"}}),s("div",{staticClass:"svg-3 orange size-2",staticStyle:{top:"65vh",right:"calc(40vw - 100px)",opacity:".5",transform:"rotate(45deg)"}}),s("div",{staticClass:"svg-2 orange size-3",staticStyle:{top:"calc(150vh - 0px)",left:"calc(40vw - 50px)",opacity:".25"}}),s("div",{staticClass:"svg-1 darkturquoise size-1",staticStyle:{top:"calc(200vh - 185px)",left:"calc(50vw - 50px)",opacity:"1"}}),s("div",{staticClass:"svg-3 darkturquoise size-1",staticStyle:{top:"calc(110vh + 0px)",right:"calc(25vw - 25px)",opacity:"1"}}),s("div",{staticClass:"svg-2 powderblue size-2",staticStyle:{top:"calc(75vh - 50px)",left:"calc(10vw + 0px)",opacity:"0.5"}}),s("div",{staticClass:"svg-2 darkturquoise size-2",staticStyle:{top:"calc(200vh - 200px)",left:"calc(10vw + 0px)",opacity:"0.25"}}),s("div",{staticClass:"svg-1 darkturquoise size-2",staticStyle:{top:"calc(100vh - 175px)",right:"calc(0vw - 20px)",opacity:"1"}}),s("div",{staticClass:"svg-2 darkturquoise size-3",staticStyle:{top:"calc(200vh - 235px)",right:"calc(0vw + 10px)",opacity:"0.25"}}),s("div",{staticClass:"svg-2 darkturquoise size-5",staticStyle:{top:"calc(100vh + 60px)",left:"calc(30vw - 0px)",opacity:"1"}}),s("div",{staticClass:"svg-2 darkturquoise size-13",staticStyle:{top:"calc(100vh - 150px)",right:"-150px",opacity:"0.25"}}),s("div",{staticClass:"svg-2 blue size-1",staticStyle:{top:"calc(125vh - 12.5px)",right:"calc(40vw - 0px)",opacity:"1"}}),s("div",{staticClass:"svg-2 blue size-3",staticStyle:{top:"calc(100vh - 75px)",left:"calc(50vw - 37.5px)",opacity:"0.5"}}),s("div",{staticClass:"svg-2 blue size-8",staticStyle:{top:"calc(100vh - 75px)",left:"-50px",opacity:"0.5"}})]),s("div",{staticClass:"info-content right"},[s("div",{staticClass:"landing-toolbar"},[s("img",{staticClass:"cursor-no-hover",attrs:{src:e.logo},on:{click:function(t){return e.$router.push("/")}}}),s("div",[s("v-btn",{staticClass:"mr-3 h5 bg-white-color",on:{click:function(t){e.loginView=!0}}},[e._v(" 登入 ")]),s("v-btn",{staticClass:"mr-0 h5 bg-main-color",on:{click:function(t){e.registerView=!0}}},[e._v(" 註冊 ")])],1)]),s("div",{staticClass:"info"},[s("p",{staticClass:"info-title"},[e._v("線上教學"),s("br"),e._v("輕鬆創造多元收入")]),s("p",[s("strong",{staticClass:"main-color"},[e._v("QUIKOK")]),e._v("將一步步引導你"),s("br"),s("strong",[e._v("設計數位履歷")]),e._v("以及"),s("strong",[e._v("課程提案")]),s("br"),e._v("讓你的知識價值被更多人看見！")]),s("v-btn",{staticClass:"m-0 mt-3 orange",on:{click:function(t){return e.scroll()}}},[e._v(" 了解更多"),s("v-icon",[e._v("mdi-chevron-down")])],1)],1)]),s("div",{staticClass:"info-content left",staticStyle:{"padding-bottom":"135px"}},[s("div",{staticClass:"info"},[s("p",{staticClass:"info-title"},[e._v("簡單步驟"),s("br"),e._v("輕易的上架課程")]),s("p",[e._v("專心上課，剩下的交給"),s("strong",{staticClass:"main-color"},[e._v("QUIKOK")])]),s("v-btn",{staticClass:"m-0 mt-3 rainbow",on:{click:function(t){e.doGtagsEvent("Landing-按鈕：訪客上架","按下[立即開課去]按鈕"),e.$router.push("/lesson/guestready")}}},[e._v(" 立即開課去"),s("v-icon",[e._v("mdi-arrow-right-bold")])],1)],1),s("div",{staticClass:"info-lessoncard"},[s("img",{attrs:{src:e.lessonCard}})]),s("div",{staticClass:"landing-footer"},[s("p",{staticClass:"m-1 title"},[e._v("聯絡我們")]),s("p",{staticClass:"m-1"},[s("v-icon",{staticClass:"mr-1"},[e._v("mdi-map-marker")]),e._v(" 台北市信義區忠孝東路五段一之二號五樓 ")],1),s("p",{staticClass:"m-1"},[s("v-icon",{staticClass:"mr-1"},[e._v("mdi-email")]),e._v(" quikok.taiwan@quikok.com ")],1),s("p",{staticClass:"m-1"},[s("v-icon",{staticClass:"mr-1"},[e._v("mdi-facebook")]),s("a",{attrs:{href:"https://fb.com/quikok.taiwan/",target:"_blank"}},[e._v("開課！Quikok線上教學平台 ")])],1)])])]),s("div",{staticClass:"mobile"},[s("div",{staticClass:"info-background",style:"background-image: url('"+e.landingMobile+"')"}),s("div",{staticClass:"info-element"},[s("div",{staticClass:"svg-1 orange size-1",staticStyle:{top:"calc(80vh - 0px)",left:"calc(0vw + 0px)",opacity:".75"}}),s("div",{staticClass:"svg-1 orange size-1",staticStyle:{top:"calc(15vh + 0px)",right:"calc(5vw + 0px)",opacity:".5"}}),s("div",{staticClass:"svg-3 orange size-1",staticStyle:{top:"25vh",right:"calc(30vw - 0px)",opacity:".25",transform:"rotate(45deg)"}}),s("div",{staticClass:"svg-1 powderblue size-2",staticStyle:{top:"calc(130vh - 0px)",right:"calc(5vw + 50px)",opacity:"1"}}),s("div",{staticClass:"svg-3 darkturquoise size-1",staticStyle:{top:"calc(120vh + 30px)",right:"calc(0vw + 20px)",opacity:"1",transform:"rotate(45deg)"}}),s("div",{staticClass:"svg-1 darkturquoise size-2",staticStyle:{top:"calc(50vh - 100px)",right:"calc(0vw - 20px)",opacity:"0.75"}}),s("div",{staticClass:"svg-2 darkturquoise size-2",staticStyle:{top:"calc(50vh + 10px)",right:"calc(30vw + 0px)",opacity:"0.25"}}),s("div",{staticClass:"svg-2 powderblue size-3",staticStyle:{top:"calc(80vh - 10px)",right:"calc(0vw + 10px)",opacity:"0.5"}}),s("div",{staticClass:"svg-2 skyblue size-5",staticStyle:{top:"calc(50vh - 80px)",right:"-50px",opacity:"0.25"}}),s("div",{staticClass:"svg-2 blue size-1",staticStyle:{top:"calc(10vh + 12.5px)",left:"calc(5vw - 0px)",opacity:"0.5"}}),s("div",{staticClass:"svg-2 darkturquoise size-3",staticStyle:{top:"calc(50vh + 0px)",left:"calc(0vw - 37.5px)",opacity:"0.25"}}),s("div",{staticClass:"svg-2 blue size-8",staticStyle:{top:"calc(100vh - 75px)",left:"-50px",opacity:"0.25"}})]),s("div",{staticClass:"info-content"},[s("div",{staticClass:"landing-toolbar"},[s("img",{staticClass:"cursor-no-hover",attrs:{src:e.logo},on:{click:function(t){return e.$router.push("/")}}}),s("div",[s("v-btn",{staticClass:"mr-3 h5 bg-white-color",on:{click:function(t){e.loginView=!0}}},[e._v(" 登入 ")]),s("v-btn",{staticClass:"mr-0 h5 bg-main-color",on:{click:function(t){e.registerView=!0}}},[e._v(" 註冊 ")])],1)]),s("div",{staticClass:"info"},[s("p",{staticClass:"info-title"},[e._v("線上教學"),s("br"),e._v("輕鬆創造多元收入")]),s("p",[s("strong",{staticClass:"main-color"},[e._v("QUIKOK")]),e._v("將一步步引導你"),s("br"),s("strong",[e._v("設計數位履歷")]),e._v("以及"),s("strong",[e._v("課程提案")]),s("br"),e._v("讓你的知識價值被更多人看見！")]),s("img",{attrs:{src:e.lessonCard}}),s("p",{staticClass:"info-title"},[e._v("簡單步驟"),s("br"),e._v("輕易的上架課程")]),s("p",[e._v("專心上課，剩下的交給"),s("strong",{staticClass:"main-color"},[e._v("QUIKOK")])]),s("v-btn",{staticClass:"m-0 mt-3 rainbow",on:{click:function(t){e.doGtagsEvent("Landing-按鈕：訪客上架","按下[立即開課去]按鈕"),e.$router.push("/lesson/guestready")}}},[e._v(" 立即開課去"),s("v-icon",[e._v("mdi-arrow-right-bold")])],1)],1),s("div",{staticClass:"landing-footer"},[s("p",{staticClass:"m-1 title"},[e._v("聯絡我們")]),s("p",{staticClass:"m-1"},[s("v-icon",{staticClass:"mr-1"},[e._v("mdi-map-marker")]),e._v(" 台北市信義區忠孝東路五段一之二號五樓 ")],1),s("p",{staticClass:"m-1"},[s("v-icon",{staticClass:"mr-1"},[e._v("mdi-email")]),e._v(" quikok.taiwan@quikok.com ")],1),s("p",{staticClass:"m-1"},[s("v-icon",{staticClass:"mr-1"},[e._v("mdi-facebook")]),s("a",{attrs:{href:"https://fb.com/quikok.taiwan/",target:"_blank"}},[e._v("開課！Quikok線上教學平台 ")])],1)])])]),s("v-container",[s("v-dialog",{attrs:{"max-width":"95%",width:"285px",persistent:""},model:{value:e.registerView,callback:function(t){e.registerView=t},expression:"registerView"}},[s("v-card",{staticStyle:{margin:"0 auto"},attrs:{"max-width":"100%"}},[s("v-card-text",{staticClass:"p-0"},[s("v-alert",{staticClass:"border-0",attrs:{color:"bg-main-color"},model:{value:e.registerView,callback:function(t){e.registerView=t},expression:"registerView"}},[s("strong",{staticClass:"h4"},[e._v("請選擇註冊類別")]),s("v-icon",{staticClass:"cursor float-right text-white",on:{click:function(t){e.registerView=!1}}},[e._v("mdi-close")])],1)],1),s("v-card-actions",{staticStyle:{padding:"25px 0","justify-content":"center"}},[s("v-btn",{staticClass:"hover-main-color mx-2 md-font-16",on:{click:function(t){e.doGtagsEvent("目錄選單-按鈕：註冊-學生","直接註冊"),e.registerView=!1,"/account/register/student"!==e.$router.history.current.path&&e.$router.push("/account/register/student")}}},[e._v(" 學生/家長 ")]),s("v-btn",{staticClass:"hover-main-color mx-2 md-font-16",on:{click:function(t){e.doGtagsEvent("目錄選單-按鈕：註冊-老師","直接註冊"),e.registerView=!1,"/account/register/teacher"!==e.$router.history.current.path&&e.$router.push("/account/register/teacher")}}},[e._v(" 老師 ")])],1)],1)],1),s("v-dialog",{attrs:{"max-width":"95%",width:"285px",persistent:""},model:{value:e.loginView,callback:function(t){e.loginView=t},expression:"loginView"}},[s("v-card",{staticStyle:{margin:"0 auto"},attrs:{"max-width":"100%"}},[s("v-card-text",{staticClass:"p-0"},[s("v-alert",{staticClass:"border-0",attrs:{color:"bg-main-color"},model:{value:e.loginView,callback:function(t){e.loginView=t},expression:"loginView"}},[s("strong",{staticClass:"h4"},[e._v("登入")]),s("v-icon",{staticClass:"cursor float-right text-white",on:{click:function(t){e.loginView=!1}}},[e._v("mdi-close")])],1)],1),s("v-card-actions",{staticStyle:{"justify-content":"center","flex-flow":"column"}},[s("div",{staticClass:"w-100"},[s("div",[s("v-text-field",{class:{fail:-1!==e.userEmailFailMsg().indexOf("✖"),pass:"✔"===e.userEmailFailMsg()},attrs:{hint:e.userEmailFailMsg(),label:"*Email (帳號)",type:"email","persistent-hint":""},model:{value:e.userEmail,callback:function(t){e.userEmail=t},expression:"userEmail"}})],1),s("div",[s("v-text-field",{class:{fail:-1!==e.userPwdFailMsg().indexOf("✖"),pass:"✔"===e.userPwdFailMsg()},attrs:{hint:e.userPwdFailMsg(),label:"*密碼",type:"password","persistent-hint":""},model:{value:e.userPwd,callback:function(t){e.userPwd=t},expression:"userPwd"}})],1)]),s("div",{staticClass:"mt-3 text-center"},[s("v-btn",{staticClass:"hover-main-color mx-2 md-font-16",on:{click:function(t){return e.login()}}},[e._v(" 登入 ")]),s("v-btn",{staticClass:"hover-main-color mx-2 md-font-16",on:{click:function(t){e.loginView=!1,e.registerView=!0}}},[e._v(" 註冊 ")]),s("br"),s("br"),s("span",{staticClass:"mx-3 main-color cursor",staticStyle:{"font-size":"1rem"},on:{click:function(t){e.loginView=!1,e.forgetPwdView=!0}}},[e._v("忘記密碼")])],1)])],1)],1),s("v-dialog",{attrs:{"max-width":"95%",width:"285px",persistent:""},model:{value:e.forgetPwdView,callback:function(t){e.forgetPwdView=t},expression:"forgetPwdView"}},[s("v-card",{staticStyle:{margin:"0 auto"},attrs:{"max-width":"100%"}},[s("v-card-text",{staticClass:"p-0"},[s("v-alert",{staticClass:"border-0",attrs:{color:"bg-main-color"},model:{value:e.forgetPwdView,callback:function(t){e.forgetPwdView=t},expression:"forgetPwdView"}},[s("strong",{staticClass:"h4"},[e._v("忘記密碼")]),s("v-icon",{staticClass:"cursor float-right text-white",on:{click:function(t){e.forgetPwdView=!1}}},[e._v("mdi-close")])],1)],1),s("v-card-actions",{staticStyle:{"justify-content":"center","flex-flow":"column"}},[s("div",{staticClass:"w-100"},[s("div",[s("v-text-field",{class:{fail:-1!==e.userEmailFailMsg().indexOf("✖"),pass:"✔"===e.userEmailFailMsg()},attrs:{hint:e.userEmailFailMsg(),label:"*Email (帳號)",type:"email","persistent-hint":""},model:{value:e.userEmail,callback:function(t){e.userEmail=t},expression:"userEmail"}})],1),s("div",[s("v-text-field",{class:{fail:-1!==e.userBirthFailMsg().indexOf("✖"),pass:"✔"===e.userBirthFailMsg()},attrs:{hint:e.userBirthFailMsg(),label:"*生日",type:"text","persistent-hint":""},model:{value:e.userBirth,callback:function(t){e.userBirth=t},expression:"userBirth"}})],1),s("div",[s("v-text-field",{class:{fail:-1!==e.userMobileFailMsg().indexOf("✖"),pass:"✔"===e.userMobileFailMsg()},attrs:{hint:e.userMobileFailMsg(),label:"*手機",type:"text","persistent-hint":""},model:{value:e.userMobile,callback:function(t){e.userMobile=t},expression:"userMobile"}})],1)]),s("div",{staticClass:"mt-3 text-center"},[s("v-btn",{staticClass:"hover-main-color mx-2 md-font-16",on:{click:function(t){return e.identity()}}},[e._v(" 身份驗證 ")]),s("br"),s("br"),s("span",{staticClass:"mx-3 main-color cursor",staticStyle:{"font-size":"1rem"},on:{click:function(t){e.forgetPwdView=!1,e.registerView=!0}}},[e._v("立即註冊")]),s("span",{staticClass:"mx-3 main-color cursor",staticStyle:{"font-size":"1rem"},on:{click:function(t){e.forgetPwdView=!1,e.loginView=!0}}},[e._v("返回登入")])],1)])],1)],1),s("v-dialog",{attrs:{"max-width":"95%",width:"285px",persistent:""},model:{value:e.resetForgetPwdView,callback:function(t){e.resetForgetPwdView=t},expression:"resetForgetPwdView"}},[s("v-card",{staticStyle:{margin:"0 auto"},attrs:{"max-width":"100%"}},[s("v-card-text",{staticClass:"p-0"},[s("v-alert",{staticClass:"border-0",attrs:{color:"bg-main-color"},model:{value:e.resetForgetPwdView,callback:function(t){e.resetForgetPwdView=t},expression:"resetForgetPwdView"}},[s("strong",{staticClass:"h4"},[e._v("重置密碼")]),s("v-icon",{staticClass:"cursor float-right text-white",on:{click:function(t){e.resetForgetPwdView=!1}}},[e._v("mdi-close")])],1)],1),s("v-card-actions",{staticStyle:{"justify-content":"center","flex-flow":"column"}},[s("div",{staticClass:"w-100"},[s("div",[s("v-text-field",{class:{fail:-1!==e.userResetPwdFailMsg().indexOf("✖"),pass:"✔"===e.userResetPwdFailMsg()},attrs:{hint:e.userResetPwdFailMsg(),label:"*密碼",type:"password","persistent-hint":""},model:{value:e.userResetPwd,callback:function(t){e.userResetPwd=t},expression:"userResetPwd"}})],1),s("div",[s("v-text-field",{class:{fail:-1!==e.userResetConfirmPwdFailMsg().indexOf("✖"),pass:"✔"===e.userResetConfirmPwdFailMsg()},attrs:{hint:e.userResetConfirmPwdFailMsg(),label:"*確認密碼",type:"password","persistent-hint":""},model:{value:e.userResetConfirmPwd,callback:function(t){e.userResetConfirmPwd=t},expression:"userResetConfirmPwd"}})],1)]),s("div",{staticClass:"my-3 text-center"},[s("v-btn",{staticClass:"hover-main-color mx-2 md-font-16",on:{click:function(t){return e.doForgetResetPwd()}}},[e._v(" 重置密碼 ")])],1)])],1)],1),s("v-dialog",{attrs:{persistent:""},model:{value:e.loadingView,callback:function(t){e.loadingView=t},expression:"loadingView"}},[s("p",{staticStyle:{"letter-spacing":"5px","text-align":"center !important",color:"#ffffff","background-color":"#000000dd",padding:"15px",margin:"auto"}},[s("img",{staticStyle:{width:"2rem","margin-bottom":"10px"},attrs:{src:e.loading}}),s("br"),e._v(" "+e._s(e.loadingViewText)+" ")])])],1),s("div",{staticClass:"overlay_bg",class:{active:e.registerView||e.loginView||e.forgetPwdView||e.resetForgetPwdView}}),s("v-snackbar",{attrs:{top:!0,color:e.color},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(" "+e._s(e.errorMessages)+" "),s("v-btn",{attrs:{dark:"",flat:""},on:{click:function(t){e.snackbar=!1}}},[e._v(" Close ")])],1)],1)},i=[],r=(s("8e6e"),s("ac6a"),s("456d"),s("6b54"),s("bd86")),o=s("4328"),n=s.n(o),c=s("0b26"),l=s.n(c),d=s("4ffd"),u=s.n(d),h=s("4579"),f=s.n(h),g=s("47c3"),p=s.n(g),v=s("49d6"),m=s.n(v),_=s("0b2b"),b=s.n(_),y=s("222d"),w=s.n(y),k=s("f6b8"),x=s.n(k),C=s("307a"),S=s.n(C),I=s("f8b2"),M=s.n(I),O=s("2f62"),P=s("4360");function E(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function T(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?E(Object(s),!0).forEach((function(t){Object(r["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):E(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var V={name:"Landing",metaInfo:function(){return{title:this.appName+"｜快來開設您的課程"}},data:function(){return{html:"",logo:u.a,loadingView:!1,loadingViewText:"處理中",loading:M.a,landingPc:f.a,landingMobile:p.a,lessonCard:m.a,boyTeacher:b.a,girlTeacher:w.a,boyStudent:x.a,girlStudent:S.a,snackbar:!1,color:"red",errorMessages:"",registerView:!1,loginView:!1,forgetPwdView:!1,resetForgetPwdView:!1,userID:"",userEmail:"",userEmailVerify:!1,userPwd:"",userPwdVerify:!1,userBirth:"",userBirthVerify:!1,userMobile:"",userMobileVerify:!1,userResetPwd:"",userResetPwdVerify:!1,userResetConfirmPwd:"",userResetConfirmPwdVerify:!1,loginError:!1,verifyError:!1,resetError:!1}},beforeRouteEnter:function(e,t,s){P["a"].state.fromPath=t.fullPath,P["a"].state.toPath=e.fullPath,s()},computed:T({},Object(O["c"])(["root","appName","fromPath","toPath","deposit","isProduction","dologinView"])),mounted:function(){var e=this;this.$store.state.root=this.$http.defaults.baseURL,this.$store.state.isProduction="https://www.quikok.com"===this.root,this.isProduction&&this.$gtag.pageview({from_path:this.fromPath,page_path:this.toPath,hostname:this.root,user_id:this.userInfo?this.userInfo.user_id:-1});var t=!0;if(localStorage.getItem("token"))this.$router.push("/");else if(t){var s={userId:this.userInfo?this.userInfo.user_id:-1,url:"/landing"};this.$http.post("/api/account/authCheck/",n.a.stringify(s)).then((function(e){return e.data})).then((function(t){"success"===t.status?t.data.authority:localStorage.getItem("user")&&e.$store.dispatch("logout").then((function(){e.$router.go(0)}))})).catch((function(t){console.log(t),localStorage.getItem("user")&&e.$store.dispatch("logout").then((function(){e.$router.go(0)}))}))}},methods:{doOpenMessage:function(){window.open("https://reurl.cc/XeDE93","_blank")},doGtagsEvent:function(e,t,s){this.isProduction&&this.$gtag.event(e,{description:t,remarks:s,page_path:this.$route.fullPath,hostname:this.root,user_id:this.userInfo?this.userInfo.user_id:-1})},scroll:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){this.doGtagsEvent("Landing-按鈕：了解詳情","按下[了解更多]按鈕"),scroll(0,document.body.clientHeight)})),userEmailFailMsg:function(){return this.loginError&&""===this.userEmail?"✖ 請輸入帳號(Email)":""===this.userEmail?(this.userEmailVerify=!0,""):(this.userEmailVerify=!1,"")},userPwdFailMsg:function(){return this.loginError&&""===this.userPwd?"✖ 請輸入密碼":""===this.userPwd?(this.userPwdVerify=!0,""):(this.userPwdVerify=!1,"")},userBirthFailMsg:function(){var e=/^[0-9]{4}-[0-9]{2}-[0-9]{2}$/;return""===this.userBirth||e.test(this.userBirth)?""!==this.userBirth?(this.userBirthVerify=!1,"✔"):this.verifyError&&""===this.userBirth?(this.userBirthVerify=!0,"✖ 請輸入您的生日，格式為1900-01-01"):(this.userBirthVerify=!0,"請輸入您的生日，格式為1900-01-01"):(this.userBirthVerify=!0,"✖ 生日輸入格式錯誤，格式為1900-01-01")},userMobileFailMsg:function(){var e=/^09[0-9]{2}-[0-9]{6}$/;return this.verifyError&&""===this.userMobile?(this.userMobileVerify=!0,"✖ 請輸入您的手機號碼，格式為09XX-XXXXXX"):""===this.userMobile?(this.userMobileVerify=!0,"請輸入您的手機號碼，格式為09XX-XXXXXX"):e.test(this.userMobile)?(this.userMobileVerify=!1,"✔"):(this.userMobileVerify=!0,"✖ 手機號碼格式錯誤，格式為09XX-XXXXXX")},userResetPwdFailMsg:function(){return this.resetError&&""===this.userResetPwd?(this.regResetPwdVerify=!0,"✖ 請輸入密碼"):""===this.userResetPwd?(this.userResetPwdVerify=!0,"請輸入密碼"):this.userResetPwd.length<8?(this.regResetPwdVerify=!0,"✖ 密碼請勿少於8個字"):(this.userResetPwdVerify=!1,"✔")},userResetConfirmPwdFailMsg:function(){return this.resetError&&""===this.userResetConfirmPwd?(this.userResetConfirmPwdVerify=!0,"✖ 請再次輸入密碼"):""===this.userResetConfirmPwd?(this.userResetConfirmPwdVerify=!0,"請再次輸入密碼"):this.userResetConfirmPwd.length<8?(this.userResetConfirmPwdVerify=!0,"✖ 密碼請勿少於8個字"):this.userResetPwd!==this.userResetConfirmPwd?(this.userResetConfirmPwdVerify=!0,"✖ 密碼輸入不一致"):(this.userResetConfirmPwdVerify=!1,"✔")},login:function(){var e=this;if(""!==this.userEmail&&""!==this.userPwd){this.loginView=!1,this.loadingViewText="登入帳戶中",this.loadingView=!0;var t={userName:this.userEmail,userPwd:l()(this.userPwd).toUpperCase()};this.$http.post("/api/account/signin/",n.a.stringify(t)).then((function(e){return e.data})).then((function(t){e.loadingView=!1,"success"===t.status?(e.userInfo={user_id:t.data.user_id,username:t.data.username,type:t.data.type,group:t.data.user_group,deposit:t.data.deposit,is_male:t.data.is_male,nickname:t.data.nickname,picture:t.data.picture+"?t="+(new Date).getTime()},""===t.data.picture||null===t.data.picture?"teacher"===t.data.type?t.data.is_male?e.userInfo.picture=b.a:e.userInfo.picture=w.a:"student"===t.data.type&&(t.data.is_male?e.userInfo.picture=x.a:e.userInfo.picture=S.a):e.$store.state.snapshot=e.userInfo.picture,e.$store.state.deposit=t.data.deposit,localStorage.setItem("user",JSON.stringify(e.userInfo)),e.snackbar=!0,e.color="green",e.errorMessages="登入成功",localStorage.setItem("token",t.data.user_token),localStorage.setItem("systemChatroomID",t.data.system_chatrooID),e.$store.state.loginStatus=!0,e.$router.push("/")):"failed"===t.status?(scroll(0,0),e.loginView=!0,e.snackbar=!0,e.color="red",e.errorMessages=t.errMsg):(scroll(0,0),e.loginView=!0,e.snackbar=!0,e.color="orange",e.errorMessages="發生錯誤，請稍後再試")})).catch((function(t){scroll(0,0),e.loadingView=!1,e.loginView=!0,e.snackbar=!0,e.color="orange",e.errorMessages="發生錯誤，請稍後再試",console.log(t)}))}else this.loginError=!0},logout:function(){this.loadingViewText="登出帳戶中",this.loadingView=!0;var e=JSON.parse(localStorage.getItem("user"))?JSON.parse(localStorage.getItem("user")).user_id:"",t={userId:e};this.$http.post("/api/account/logout/",n.a.stringify(t)),localStorage.removeItem("token"),localStorage.removeItem("user"),this.$store.state.loginStatus=!1,delete this.$http.defaults.headers.common["Authorization"],this.loadingView=!1,this.$router.go(0)},identity:function(){var e=this;if(""!==this.userEmail&&-1!==this.userBirthFailMsg().indexOf("✔")&&-1!==this.userMobileFailMsg().indexOf("✔")){this.forgetPwdView=!1,this.loadingViewText="身份驗證中",this.loadingView=!0;var t={userName:this.userEmail,userBirth:this.userBirth,userMobile:this.userMobile};scroll(0,0),this.$http.post("/api/account/memberForgotPassword/",n.a.stringify(t)).then((function(e){return e.data})).then((function(t){e.loadingView=!1,"success"===t.status?(e.snackbar=!0,e.color="green",e.errorMessages="身份驗證成功",e.userID=t.data.userID,localStorage.setItem("token",t.data.token),e.resetForgetPwdView=!0):"failed"===t.status?(e.forgetPwdView=!0,e.snackbar=!0,e.color="red",e.errorMessages=t.errMsg):(e.forgetPwdView=!0,e.snackbar=!0,e.color="orange",e.errorMessages="發生錯誤，請稍後再試")})).catch((function(t){e.loadingView=!1,e.forgetPwdView=!0,e.snackbar=!0,e.color="orange",e.errorMessages="發生錯誤，請稍後再試",console.log(t)}))}else this.verifyError=!0},doForgetResetPwd:function(){var e=this;if(-1!==this.userResetPwdFailMsg().indexOf("✔")&&-1!==this.userResetConfirmPwdFailMsg().indexOf("✔")){this.resetForgetPwdView=!1,this.loadingViewText="密碼重置中",this.loadingView=!0;var t={userID:this.userID,newUserPwd:l()(this.userResetPwd).toUpperCase()};this.$http.post("/api/account/memberResetPassword/",n.a.stringify(t)).then((function(e){return e.data})).then((function(t){e.loadingView=!1,"success"===t.status?(e.snackbar=!0,e.color="green",e.errorMessages="重置密碼成功，請使用新密碼登入",localStorage.removeItem("token"),e.loginView=!0):"failed"===t.status?(e.resetForgetPwdView=!0,e.snackbar=!0,e.color="red",e.errorMessages=t.errMsg):(e.resetForgetPwdView=!0,e.snackbar=!0,e.color="orange",e.errorMessages="發生錯誤，請稍後再試")})).catch((function(t){e.loadingView=!1,e.resetForgetPwdView=!0,e.snackbar=!0,e.color="orange",e.errorMessages="發生錯誤，請稍後再試",console.log(t)}))}else this.resetError=!0}}},j=V,B=(s("2899"),s("2877")),$=Object(B["a"])(j,a,i,!1,null,null,null);t["default"]=$.exports},"4ffd":function(e,t,s){e.exports=s.p+"img/logo.afbf1ba8.png"},5651:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"fluid fill-height ready",attrs:{id:"lessonready"}},[e.pageView?s("div",{staticClass:"container"},[e._m(0),s("hr"),s("p",{staticClass:"h3"},[e._v("設定課程資訊卡")]),s("div",{staticClass:"row p-0 m-0"},[s("div",{staticClass:"col-xs-12 col-md-6 p-0 m-0"},[s("div",{staticClass:"row"},[e._m(1),s("div",{staticClass:"col-xs-12 col-md-12 d-flex upload-img-area"},[s("div",{staticClass:"upload-img ready-img p-0 cursor",on:{click:function(t){e.readyCardBg=0}}},[s("div",{staticClass:"upload-img-view ready-img-view",class:{"border-main-color":0===e.readyCardBg,"ready-card-bg-check":0===e.readyCardBg},style:"background-image: url('"+e.root+e.cardBg1+"')"},[0===e.readyCardBg?s("v-icon",[e._v("mdi-check")]):e._e()],1)]),s("div",{staticClass:"upload-img ready-img p-0 cursor",on:{click:function(t){e.readyCardBg=1}}},[s("div",{staticClass:"upload-img-view ready-img-view",class:{"border-main-color":1===e.readyCardBg,"ready-card-bg-check":1===e.readyCardBg},style:"background-image: url('"+e.root+e.cardBg2+"')"},[1===e.readyCardBg?s("v-icon",[e._v("mdi-check")]):e._e()],1)]),s("div",{staticClass:"upload-img ready-img p-0 cursor",on:{click:function(t){e.readyCardBg=2}}},[s("div",{staticClass:"upload-img-view ready-img-view",class:{"border-main-color":2===e.readyCardBg,"ready-card-bg-check":2===e.readyCardBg},style:"background-image: url('"+e.root+e.cardBg3+"')"},[2===e.readyCardBg?s("v-icon",[e._v("mdi-check")]):e._e()],1)]),s("div",{staticClass:"upload-img ready-img p-0 cursor"},[s("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{id:"file_readyCardBg",type:"file","data-target":"file-uploader",accept:"image/*","persistent-hint":""},on:{change:function(t){return e.setReadyCardBg(t)}}}),s("div",{staticClass:"upload-img-view ready-img-view",class:{"border-main-color":99===e.readyCardBg,"ready-card-bg-check":99===e.readyCardBg,"ready-card-bg-upload":!e.readyCardBgUpload[0].url},style:"background-image: url('"+e.readyCardBgUpload[0].url+"')",on:{click:function(t){return e.selectReadyCardBg()}}},[e.readyCardBgUpload[0].url&&99===e.readyCardBg?s("v-icon",[e._v("mdi-check")]):e._e(),e.readyCardBgUpload[0].url?e._e():s("v-icon",{on:{click:function(t){return e.uploadReadyCardBg()}}},[e._v("mdi-upload")]),e.readyCardBgUpload[0].url&&99!==e.readyCardBg?s("v-icon",{staticClass:"cursor",on:{click:function(t){return e.cancelReadyCardBg()}}},[e._v("mdi-close")]):e._e()],1)])]),e._m(2),s("div",{staticClass:"col-xs-12 col-md-12"},[s("v-text-field",{class:{fail:-1!==e.readyTitleMessages.indexOf("✖"),pass:e.readyTitle.length>0&&-1!==e.readyTitleMessages.indexOf("✔")},attrs:{hint:e.readyTitleMessages,label:"封面大標題",type:"text","persistent-hint":""},model:{value:e.readyTitle,callback:function(t){e.readyTitle=t},expression:"readyTitle"}})],1),s("div",{staticClass:"col-xs-12 col-md-12"},[s("v-text-field",{class:{fail:-1!==e.readySubtitleMessages.indexOf("✖"),pass:e.readySubtitle.length>0&&-1!==e.readySubtitleMessages.indexOf("✔")},attrs:{hint:e.readySubtitleMessages,label:"封面小標題",type:"text","persistent-hint":""},model:{value:e.readySubtitle,callback:function(t){e.readySubtitle=t},expression:"readySubtitle"}})],1),s("div",{staticClass:"col-xs-12 col-md-12"},[s("v-radio-group",{attrs:{row:""},model:{value:e.readyTextcolor,callback:function(t){e.readyTextcolor=t},expression:"readyTextcolor"}},[s("label",{staticClass:"mr-2",class:{active:""!==e.readyTextcolor}},[e._v("封面文字顏色")]),s("v-radio",{attrs:{label:"白色",value:"#ffffff"}}),s("v-radio",{attrs:{label:"黑色",value:"#000000"}})],1)],1),s("div",{staticClass:"col-xs-12 col-md-12"},[s("p",{staticClass:"mx-3 h4",staticStyle:{"word-wrap":"break-word","white-space":"pre-wrap","text-align":"justify"}},[e._v("步驟3/3：填寫課程資訊卡內容")]),s("v-text-field",{staticClass:"required",class:{"required-fail":""===e.readyName,fail:-1!==e.readyNameMessages.indexOf("✖"),pass:-1!==e.readyNameMessages.indexOf("✔")},attrs:{hint:e.readyNameMessages,label:"課程名稱",type:"text","persistent-hint":""},model:{value:e.readyName,callback:function(t){e.readyName=t},expression:"readyName"}})],1),s("div",{staticClass:"col-xs-12 col-md-12"},[s("v-text-field",{staticClass:"required",class:{"required-fail":""===e.readyFee||null===e.readyFee,fail:-1!==e.readyFeeMessages.indexOf("✖"),pass:-1!==e.readyFeeMessages.indexOf("✔")},attrs:{hint:e.readyFeeMessages,label:"課程鐘點費",type:"text","persistent-hint":""},model:{value:e.readyFee,callback:function(t){e.readyFee=t},expression:"readyFee"}})],1),s("div",{staticClass:"col-xs-12 col-md-12"},[s("v-radio-group",{attrs:{row:""},model:{value:e.readyType,callback:function(t){e.readyType=t},expression:"readyType"}},[s("label",{staticClass:"mr-2",class:{active:""!==e.readyType}},[e._v("授課模式")]),s("v-radio",{attrs:{label:"線上授課",value:"online"}}),s("v-radio",{attrs:{label:"實體授課",value:"#offline"}})],1)],1),s("div",{staticClass:"col-xs-12 col-md-12"},[s("v-text-field",{class:{fail:-1!==e.readySpecially1Messages.indexOf("✖"),pass:e.readySpecially1.length>0&&-1!==e.readySpecially1Messages.indexOf("✔")},attrs:{hint:e.readySpecially1Messages,label:"課程特色1",type:"text","persistent-hint":""},model:{value:e.readySpecially1,callback:function(t){e.readySpecially1=t},expression:"readySpecially1"}})],1),s("div",{staticClass:"col-xs-12 col-md-12"},[s("v-text-field",{class:{fail:-1!==e.readySpecially2Messages.indexOf("✖"),pass:e.readySpecially2.length>0&&-1!==e.readySpecially2Messages.indexOf("✔")},attrs:{hint:e.readySpecially2Messages,label:"課程特色2",type:"text","persistent-hint":""},model:{value:e.readySpecially2,callback:function(t){e.readySpecially2=t},expression:"readySpecially2"}})],1),s("div",{staticClass:"col-xs-12 col-md-12"},[s("v-text-field",{class:{fail:-1!==e.readySpecially3Messages.indexOf("✖"),pass:e.readySpecially3.length>0&&-1!==e.readySpecially3Messages.indexOf("✔")},attrs:{hint:e.readySpecially3Messages,label:"課程特色3",type:"text","persistent-hint":""},model:{value:e.readySpecially3,callback:function(t){e.readySpecially3=t},expression:"readySpecially3"}})],1)])]),s("div",{staticClass:"item-cube col-xs-12 col-md-6 m-0 p-0"},[s("p",{staticClass:"h4",staticStyle:{"word-wrap":"break-word","white-space":"pre-wrap","text-align":"justify"}},[e._v("即時預覽")]),s("div",{staticStyle:{position:"relative"}},[s("div",{staticClass:"teacher-photo",style:"background-image: url('"+e.root+e.userInfo.picture+"?t="+(new Date).getTime()+"');"}),""!==e.readybestSale&&null!==e.readybestSale?s("div",{staticClass:"best_sale",staticStyle:{left:"15px"}},[e._v(e._s(e.readybestSale))]):e._e(),s("v-layout",{attrs:{"item-cube-main":"","justify-center":""}},[s("v-flex",{staticClass:"top",style:"background-image: url('"+(99===e.readyCardBg?e.readyCardBgList[3]:e.root+e.readyCardBgList[e.readyCardBg])+"');"},[s("div",{style:"color:"+e.readyTextcolor+";"},[e._v(e._s(e.readyTitle))]),s("div",{style:"color:"+e.readyTextcolor+";"},[e._v(e._s(e.readySubtitle))])]),s("v-flex",{staticClass:"middle"},[s("span",{staticClass:"xs-font-18 md-font-25 float-left word-keep-all"},[e._v(e._s(e.userInfo.nickname))]),s("span",{staticClass:"xs-font-18 md-font-25 float-right word-keep-all"},[e._v("鐘點費NT$"+e._s(e.readyFee||0))])]),s("v-flex",{staticClass:"bottom"},[s("div",{staticClass:"text-left mb-2"},[s("p",{staticClass:"title mb-2"},[e._v(e._s(e.readyName||"課程名稱"))]),s("p",{staticClass:"prove"},[s("img",{attrs:{src:e.prove}}),e._v("學歷稍後顯示")]),s("p",{staticClass:"prove"},[s("img",{attrs:{src:e.prove}}),e._v("經歷稍後顯示")])]),s("div",{staticClass:"text-left"},[e.readySpecially1?s("span",{staticClass:"tag md-font-13 xs-font-9 word-keep-all"},[e._v(e._s(e.readySpecially1))]):e._e(),e.readySpecially2?s("span",{staticClass:"tag md-font-13 xs-font-9 word-keep-all"},[e._v(e._s(e.readySpecially2))]):e._e(),e.readySpecially3?s("span",{staticClass:"tag md-font-13 xs-font-9 word-keep-all"},[e._v(e._s(e.readySpecially3))]):e._e()])])],1)],1)])]),s("hr"),s("p",{staticClass:"h3"},[e._v("設定課程詳細內容")]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-xs-12 col-md-12"},[s("v-textarea",{staticClass:"required",class:{"required-fail":""===e.readyIntro,fail:-1!==e.readyIntroMessages.indexOf("✖"),pass:-1!==e.readyIntroMessages.indexOf("✔")},attrs:{hint:e.readyIntroMessages,label:"課程介紹",rows:"5",type:"text","persistent-hint":""},model:{value:e.readyIntro,callback:function(t){e.readyIntro=t},expression:"readyIntro"}})],1),s("div",{staticClass:"col-xs-12 col-md-6"},[s("v-textarea",{class:{fail:-1!==e.readyWayMessages.indexOf("✖"),pass:-1!==e.readyWayMessages.indexOf("✔")},attrs:{hint:e.readyWayMessages,label:"上課方式",rows:"5",type:"text","persistent-hint":""},model:{value:e.readyWay,callback:function(t){e.readyWay=t},expression:"readyWay"}})],1),s("div",{staticClass:"col-xs-12 col-md-6"},[s("v-textarea",{class:{fail:-1!==e.readyObjectMessages.indexOf("✖"),pass:-1!==e.readyObjectMessages.indexOf("✔")},attrs:{hint:e.readyObjectMessages,label:"授課對象",rows:"5",type:"text","persistent-hint":""},model:{value:e.readyObject,callback:function(t){e.readyObject=t},expression:"readyObject"}})],1)]),s("hr"),s("p",{staticClass:"h3"},[e._v("設定課程大綱")]),s("div",{staticClass:"row p-0 m-0"},[s("div",{staticClass:"col-xs-12 col-md-6 p-0 m-0"},[s("div",{staticClass:"row"},[e._m(3),s("div",{staticClass:"col-xs-12 col-md-12 mx-3"},[e._l(e.readyOutline,(function(t,a){return s("div",{key:"chapter"+a},[s("div",{staticClass:"lesson-outline"},[s("div",{staticClass:"lesson-outline-sort-area"},[a>0?s("v-icon",{staticClass:"cursor-no-hover bg-main-color",on:{click:function(t){return e.doReadyOutlineSort("up","c",a)}}},[e._v("mdi-menu-up")]):e._e(),a<e.readyOutline.length-1?s("v-icon",{staticClass:"cursor-no-hover bg-main-color",on:{click:function(t){return e.doReadyOutlineSort("down","c",a)}}},[e._v("mdi-menu-down")]):e._e()],1),s("div",{staticClass:"lesson-outline-chapter"},[s("label",[e._v("第"+e._s(a+1)+"章")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"chapter.text"}],attrs:{id:"chapter"+a,type:"text","persistent-hint":""},domProps:{value:t.text},on:{keyup:function(t){return e.getReadyOutlineReadOnly()},input:function(s){s.target.composing||e.$set(t,"text",s.target.value)}}}),s("div",{staticClass:"lesson-outline-remove"},[s("div",{staticClass:"cursor-no-hover",on:{click:function(t){return e.doReadyOutlineRemove("c",a)}}},[e._v(" 刪除章節 ")])])]),e._l(t.content,(function(i,r){return s("div",{key:"subsection"+a+"_"+r,staticClass:"lesson-outline-subsection"},[s("label",[e._v(e._s(a+1)+"-"+e._s(r+1))]),s("input",{directives:[{name:"model",rawName:"v-model",value:i.text,expression:"subsection.text"}],class:{radius:1===t.content.length},attrs:{id:"subsection"+a+"_"+r,type:"text","persistent-hint":""},domProps:{value:i.text},on:{keyup:function(t){return e.getReadyOutlineReadOnly()},input:function(t){t.target.composing||e.$set(i,"text",t.target.value)}}}),s("div",{staticClass:"lesson-outline-remove"},[t.content.length>1?s("v-icon",{staticClass:"cursor-no-hover",on:{click:function(t){return e.doReadyOutlineRemove("s",a,r)}}},[e._v("mdi-close")]):e._e()],1),s("div",{staticClass:"lesson-outline-icon"},[r>0?s("v-icon",{staticClass:"cursor-no-hover d-none d-sm-flex",on:{click:function(t){return e.doReadyOutlineSort("up","s",a,r)}}},[e._v("mdi-menu-up")]):e._e(),r<t.content.length-1?s("v-icon",{staticClass:"cursor-no-hover d-none d-sm-flex",on:{click:function(t){return e.doReadyOutlineSort("down","s",a,r)}}},[e._v("mdi-menu-down")]):e._e(),r===t.content.length-1?s("v-icon",{staticClass:"cursor-no-hover bg-main-color",on:{click:function(t){return e.doReadyOutlineAdd("s",a)}}},[e._v("mdi-plus")]):e._e()],1)])}))],2)])})),s("div",{staticClass:"lesson-outline-btn"},[s("v-btn",{staticClass:"h5 bg-main-color",on:{click:function(t){return e.doReadyOutlineAdd("c")}}},[s("v-icon",{staticClass:"mr-2"},[e._v("mdi-plus")]),e._v("新增章節 ")],1)],1)],2)])]),s("div",{staticClass:"col-xs-12 col-md-6 p-0 m-0"},[s("div",{staticClass:"row"},[e._m(4),s("div",{staticClass:"col-xs-12 col-md-12 mx-3"},[s("div",{staticClass:"lesson-outline-readonly",domProps:{innerHTML:e._s(e.readyOutlineReadOnly)}})])])])]),s("hr"),s("p",{staticClass:"h3"},[e._v("設定課程補充資訊")]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-xs-12 col-md-12"},[s("v-textarea",{class:{fail:-1!==e.readyMemoMessages.indexOf("✖"),pass:e.readyMemo.length>0&&-1!==e.readyMemoMessages.indexOf("✔")},attrs:{hint:e.readyMemoMessages,label:"給學生的注意事項",rows:"5",type:"text","persistent-hint":""},model:{value:e.readyMemo,callback:function(t){e.readyMemo=t},expression:"readyMemo"}})],1),s("div",{staticClass:"col-xs-12 col-md-12"},[e._m(5),s("v-textarea",{class:{fail:-1!==e.readyTagMessages.indexOf("✖"),pass:e.readyTag.length>0&&-1!==e.readyTagMessages.indexOf("✔")},attrs:{hint:e.readyTagMessages,label:"#hashtag課程關鍵字",rows:"5",type:"text","persistent-hint":""},model:{value:e.readyTag,callback:function(t){e.readyTag=t},expression:"readyTag"}})],1)]),s("hr"),s("p",{staticClass:"h3"},[e._v("設定課程販售方案")]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-xs-12 col-md-12"},[s("v-radio-group",{staticClass:"checkbox-white-radius"},[s("v-checkbox",{staticClass:"shrink",attrs:{label:"試課方案：","hide-details":""},model:{value:e.readySaleTry,callback:function(t){e.readySaleTry=t},expression:"readySaleTry"}}),s("h3",{staticClass:"font-weight-bold"},[s("div",[s("span",[e._v("提供首次試課"),s("br"),e._v("（至少30分鐘）"),s("br")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.readySaleFeeTry,expression:"readySaleFeeTry"}],staticStyle:{width:"70px"},attrs:{id:"readySaleFeeTry",type:"text","persistent-hint":""},domProps:{value:e.readySaleFeeTry},on:{input:function(t){t.target.composing||(e.readySaleFeeTry=t.target.value)}}}),s("span",[e._v("元優惠價")])]),s("div",[s("span",[e._v("原價")]),s("strong",[e._v(e._s(e.readyFee||0))]),s("span",[e._v("元")])])])],1)],1),s("div",{staticClass:"col-xs-12 col-md-12"},[s("v-radio-group",{staticClass:"checkbox-white-radius"},[s("v-checkbox",{staticClass:"shrink",attrs:{label:"單節販售：","hide-details":""},model:{value:e.readySaleUnit,callback:function(t){e.readySaleUnit=t},expression:"readySaleUnit"}}),s("h3",{staticClass:"font-weight-bold"},[s("div",[s("span",[e._v("提供單節（60分鐘）"),s("br"),e._v("原價購買")])]),s("div",[s("span",[e._v("售價")]),e._v(" "+e._s(e.readyFee||0)+" "),s("span",[e._v("元")])])])],1)],1),this.userInfo&&this.userInfo.group.indexOf("test_teacher")>-1?s("div",{staticClass:"col-xs-12 col-md-12"},[s("v-radio-group",{staticClass:"checkbox-white-radius"},[s("v-checkbox",{staticClass:"shrink",attrs:{label:"方案一：","hide-details":""},model:{value:e.readySale1,callback:function(t){e.readySale1=t},expression:"readySale1"}}),s("h3",{staticClass:"font-weight-bold"},[s("div",[s("span",[e._v("一次購買")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.readySaleHour1,expression:"readySaleHour1"}],attrs:{id:"readySaleHour1",type:"text","persistent-hint":""},domProps:{value:e.readySaleHour1},on:{input:function(t){t.target.composing||(e.readySaleHour1=t.target.value)}}}),s("span",[e._v("小時，"),s("br"),e._v("提供總價")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.readySaleOff1,expression:"readySaleOff1"}],attrs:{id:"readySaleOff1",type:"text","persistent-hint":""},domProps:{value:e.readySaleOff1},on:{input:function(t){t.target.composing||(e.readySaleOff1=t.target.value)}}}),e._v("% "),s("span",[e._v("優惠價")])]),s("div",[s("span",[e._v("原價")]),s("strong",[e._v(e._s(e.readyFee*e.readySaleHour1))]),s("span",[e._v("元，"),s("br"),e._v("特價")]),s("div",{staticClass:"mx-1 text-danger d-inline-block"},[e._v(e._s(Math.round(e.readyFee*e.readySaleHour1*e.readySaleOff1/100)))]),s("span",[e._v("元")])])])],1)],1):e._e(),this.userInfo&&this.userInfo.group.indexOf("test_teacher")>-1?s("div",{staticClass:"col-xs-12 col-md-12"},[s("v-radio-group",{staticClass:"checkbox-white-radius"},[s("v-checkbox",{staticClass:"shrink",attrs:{label:"方案二：","hide-details":""},model:{value:e.readySale2,callback:function(t){e.readySale2=t},expression:"readySale2"}}),s("h3",{staticClass:"font-weight-bold"},[s("div",[s("span",[e._v("一次購買")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.readySaleHour2,expression:"readySaleHour2"}],attrs:{id:"readySaleHour2",type:"text","persistent-hint":""},domProps:{value:e.readySaleHour2},on:{input:function(t){t.target.composing||(e.readySaleHour2=t.target.value)}}}),s("span",[e._v("小時，"),s("br"),e._v("提供總價")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.readySaleOff2,expression:"readySaleOff2"}],attrs:{id:"readySaleOff2",type:"text","persistent-hint":""},domProps:{value:e.readySaleOff2},on:{input:function(t){t.target.composing||(e.readySaleOff2=t.target.value)}}}),e._v("% "),s("span",[e._v("優惠價")])]),s("div",[s("span",[e._v("原價")]),s("strong",[e._v(e._s(e.readyFee*e.readySaleHour2))]),s("span",[e._v("元，"),s("br"),e._v("特價")]),s("div",{staticClass:"mx-1 text-danger d-inline-block"},[e._v(e._s(Math.round(e.readyFee*e.readySaleHour2*e.readySaleOff2/100)))]),s("span",[e._v("元")])])])],1)],1):e._e(),this.userInfo&&this.userInfo.group.indexOf("test_teacher")>-1?s("div",{staticClass:"col-xs-12 col-md-12"},[s("v-radio-group",{staticClass:"checkbox-white-radius"},[s("v-checkbox",{staticClass:"shrink",attrs:{label:"方案三：","hide-details":""},model:{value:e.readySale3,callback:function(t){e.readySale3=t},expression:"readySale3"}}),s("h3",{staticClass:"font-weight-bold"},[s("div",[s("span",[e._v("一次購買")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.readySaleHour3,expression:"readySaleHour3"}],attrs:{id:"readySaleHour3",type:"text","persistent-hint":""},domProps:{value:e.readySaleHour3},on:{input:function(t){t.target.composing||(e.readySaleHour3=t.target.value)}}}),s("span",[e._v("小時，"),s("br"),e._v("提供總價")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.readySaleOff3,expression:"readySaleOff3"}],attrs:{id:"readySaleOff3",type:"text","persistent-hint":""},domProps:{value:e.readySaleOff3},on:{input:function(t){t.target.composing||(e.readySaleOff3=t.target.value)}}}),e._v("% "),s("span",[e._v("優惠價")])]),s("div",[s("span",[e._v("原價")]),s("strong",[e._v(e._s(e.readyFee*e.readySaleHour3))]),s("span",[e._v("元，"),s("br"),e._v("特價")]),s("div",{staticClass:"mx-1 text-danger d-inline-block"},[e._v(e._s(Math.round(e.readyFee*e.readySaleHour3*e.readySaleOff3/100)))]),s("span",[e._v("元")])])])],1)],1):e._e()]),s("hr"),s("div",{staticClass:"row"},[s("div",{staticClass:"col-xs-12 col-md-12 text-center"},["draft"===e.sellStatus||"notSelling"===e.sellStatus?s("v-btn",{staticClass:"mx-4 my-4 p-4 h5 bg-button-color",on:{click:function(t){return e.doSubmit("selling")}}},[s("v-icon",{staticClass:"mr-2"},[e._v("mdi-upload")]),e._v("儲存課程並上架 ")],1):e._e(),"selling"===e.sellStatus||"notSelling"===e.sellStatus?s("v-btn",{staticClass:"mx-4 my-4 p-4 h5 bg-grey-color",on:{click:function(t){return e.doSubmit(e.sellStatus)}}},[s("v-icon",{staticClass:"mr-2"},[e._v("mdi-content-save")]),e._v("儲存課程 ")],1):e._e(),"draft"===e.sellStatus?s("v-btn",{staticClass:"mx-4 my-4 p-4 h5 bg-grey-color",on:{click:function(t){return e.doSubmit("draft")}}},[s("v-icon",{staticClass:"mr-2"},[e._v("mdi-content-save")]),e._v("儲存課程草稿 ")],1):e._e()],1)])]):e._e(),s("v-dialog",{attrs:{persistent:""},model:{value:e.loadingView,callback:function(t){e.loadingView=t},expression:"loadingView"}},[s("p",{staticStyle:{"letter-spacing":"5px","text-align":"center !important",color:"#ffffff","background-color":"#000000dd",padding:"15px",margin:"auto"}},[s("img",{staticStyle:{width:"2rem","margin-bottom":"10px"},attrs:{src:e.loading}}),s("br"),e._v(" "+e._s(e.loadingViewText)+" ")])]),s("v-snackbar",{attrs:{top:!0,color:e.color},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(" "+e._s(e.errorMessages)+" "),s("v-btn",{attrs:{dark:"",flat:""},on:{click:function(t){e.snackbar=!1}}},[e._v(" Close ")])],1)],1)},i=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("p",{staticClass:"mb-5 h3 font-weight-bold",staticStyle:{"word-wrap":"break-word","white-space":"pre-wrap","text-align":"center"}},[e._v("Quikok開課囉！"),s("br"),e._v("快來準備您的課程")])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"col-xs-12 col-md-12"},[s("p",{staticClass:"mx-3 h4",staticStyle:{"word-wrap":"break-word","white-space":"pre-wrap","text-align":"justify"}},[e._v("步驟1/3：選擇課程資訊卡封面")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"col-xs-12 col-md-12"},[s("p",{staticClass:"mx-3 h4 mt-4 mb-0",staticStyle:{"word-wrap":"break-word","white-space":"pre-wrap","text-align":"justify"}},[e._v("步驟2/3：設定課程資訊卡標題")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"col-xs-12 col-md-12"},[s("p",{staticClass:"mx-3 h4",staticStyle:{"word-wrap":"break-word","white-space":"pre-wrap","text-align":"justify"}},[e._v("填寫課程大綱")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"col-xs-12 col-md-12"},[s("p",{staticClass:"mx-3 h4",staticStyle:{"word-wrap":"break-word","white-space":"pre-wrap","text-align":"justify"}},[e._v("即時預覽")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("p",{staticClass:"mx-3 h4",staticStyle:{"word-wrap":"break-word","white-space":"pre-wrap","text-align":"justify"}},[e._v("填寫的關鍵字可被學生、家長搜尋，填寫越準確可增加被搜尋的機率呦！"),s("br"),e._v("每組關鍵字請以「#」開頭，結尾處並以空格區隔下組關鍵字（例如：#高中 #學測）。 ")])}],r=(s("8e6e"),s("456d"),s("96cf"),s("3b8d")),o=(s("7f7f"),s("ac6a"),s("28a5"),s("a481"),s("c5f6"),s("bd86")),n=s("1157"),c=s.n(n),l=s("4328"),d=s.n(l),u=s("2f62"),h=s("34a4"),f=s.n(h),g=s("2ea1"),p=s.n(g),v=s("750f"),m=s.n(v),_=s("df25"),b=s.n(_),y=s("f8b2"),w=s.n(y);function k(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function x(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?k(Object(s),!0).forEach((function(t){Object(o["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):k(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var C={name:"LessonReady",metaInfo:function(){return{title:this.appName+"｜"+("edit"===this.action?"編輯":"新增")+"課程"}},data:function(){return{loadingView:!1,loadingViewText:"處理中",pageView:!1,action:"",prove:f.a,cardBg1:p.a,cardBg2:m.a,cardBg3:b.a,loading:w.a,snackbar:!1,color:"red",errorMessages:"",readyId:null,sellStatus:"draft",readyCardBg:0,readyCardBgList:[p.a,m.a,b.a,""],readyTitle:"",readyTitleMessages:"0/10字",readySubtitle:"",readySubtitleMessages:"0/10字",readyTextcolor:"#ffffff",readybestSale:"",readyName:"",readyNameMessages:"0/14字",readyType:"online",readyScore:0,readyReviewed:0,readyFee:"",readyFeeMessages:"請輸入課程鐘點費",readySpecially1:"",readySpecially1Messages:"0/10字",readySpecially2:"",readySpecially2Messages:"0/10字",readySpecially3:"",readySpecially3Messages:"0/10字",readyIntro:"",readyIntroMessages:"請輸入課程介紹",readyWay:"",readyWayMessages:"請輸入上課方式",readyObject:"",readyObjectMessages:"請輸入授課對象，如：年齡限制、建議職業...等",readyMemo:"",readyMemoMessages:"請輸入課程注意事項",readyTag:"",readyTagMessages:"請輸入課程關鍵字",readyCardBgUpload:[{file:"",name:"",url:""}],readyOutline:[{type:"chapter",text:"",content:[{type:"subsection",text:""}]}],readyOutlineReadOnly:"",readySaleUnit:!0,readySaleTry:!0,readySaleFeeTry:200,readySale1:!1,readySaleHour1:10,readySaleOff1:95,readySale2:!1,readySaleHour2:20,readySaleOff2:80,readySale3:!1,readySaleHour3:30,readySaleOff3:70,readySelectTime:[],userAgreementOpen:!1,userAgreementCheck:!1,submit:!1}},computed:x({},Object(u["c"])(["root","appName"]),{userInfo:function(){return JSON.parse(localStorage.getItem("user"))}}),watch:{"$route.fullPath":function(e){this.$router.go(0)},readyTitle:function(e){e.length>10?this.readyTitleMessages="✖ "+e.length+"/10字":0===e.length?this.readyTitleMessages="0/10字":this.readyTitleMessages="✔ "+e.length+"/10字"},readySubtitle:function(e){e.length>10?this.readySubtitleMessages="✖ "+e.length+"/10字":0===e.length?this.readySubtitleMessages="0/10字":this.readySubtitleMessages="✔ "+e.length+"/10字"},readyName:function(e){0===e.length||e.length>14?this.readyNameMessages="✖ "+e.length+"/14字":this.readyNameMessages="✔ "+e.length+"/14字"},readyFee:function(e){var t=/^[0-9]+$/;""===e?this.readyFeeMessages="✖ 課程鐘點費不得為空":t.test(this.readyFee)?(this.readyFeeMessages="✔",this.readyFee=Number(this.readyFee)):this.readyFeeMessages="✖ 課程鐘點費輸入格式錯誤"},readySpecially1:function(e){e.length>10?this.readySpecially1Messages="✖ "+e.length+"/10字":0===e.length?this.readySpecially1Messages="0/10字":this.readySpecially1Messages="✔ "+e.length+"/10字"},readySpecially2:function(e){e.length>10?this.readySpecially2Messages="✖ "+e.length+"/10字":0===e.length?this.readySpecially2Messages="0/10字":this.readySpecially2Messages="✔ "+e.length+"/10字"},readySpecially3:function(e){e.length>10?this.readySpecially3Messages="✖ "+e.length+"/10字":0===e.length?this.readySpecially3Messages="0/10字":this.readySpecially3Messages="✔ "+e.length+"/10字"},readyIntro:function(e){this.readyIntroMessages=""===e?"✖ 課程介紹不得為空":"✔"},readyWay:function(e){this.readyWayMessages=""===e?"請輸入上課方式":"✔"},readyObject:function(e){this.readyObjectMessages=""===e?"請輸入授課對象，如：年齡限制、建議職業...等":"✔"},readyMemo:function(e){this.readyMemoMessages=""===e?"請輸入課程注意事項":"✔"},readyTag:function(e){this.readyTagMessages=""===e?"請輸入課程關鍵字":"✔"},readySaleFeeTry:function(e){this.readySaleFeeTry=e>9999?9999:e<0?0:this.readySaleFeeTry.replace(/[^0-9]/gi,"")},readySaleHour1:function(e){this.readySaleHour1=e>999?999:e<1?1:this.readySaleHour1.replace(/[^0-9]/gi,"")},readySaleOff1:function(e){this.readySaleOff1=e>99?99:e<1?1:this.readySaleOff1.replace(/[^0-9]/gi,"")},readySaleHour2:function(e){this.readySaleHour2=e>999?999:e<1?1:this.readySaleHour2.replace(/[^0-9]/gi,"")},readySaleOff2:function(e){this.readySaleOff2=e>99?99:e<1?1:this.readySaleOff2.replace(/[^0-9]/gi,"")},readySaleHour3:function(e){this.readySaleHour3=e>999?999:e<1?1:this.readySaleHour3.replace(/[^0-9]/gi,"")},readySaleOff3:function(e){this.readySaleOff3=e>99?99:e<1?1:this.readySaleOff3.replace(/[^0-9]/gi,"")}},mounted:function(){var e=this;if(localStorage.getItem("token")&&"teacher"===this.userInfo.type){var t={userId:this.userInfo?this.userInfo.user_id:-1,url:this.$route.path};this.$http.post("/api/account/authCheck/",d.a.stringify(t)).then((function(e){return e.data})).then((function(t){"success"===t.status?t.data.authority?(e.getReadyOutlineReadOnly(),e.$route.params.action&&(e.action=e.$route.params.action),e.$route.params.id&&(e.readyId=e.$route.params.id),"edit"===e.action?e.getLessonInfo():"add"===e.action&&(e.pageView=!0)):e.$router.push("/"):localStorage.getItem("user")&&e.$store.dispatch("logout").then((function(){e.$router.go(0)}))})).catch((function(t){console.log(t),localStorage.getItem("user")&&e.$store.dispatch("logout").then((function(){e.$router.go(0)}))}))}else this.$router.push("/")},methods:{getLessonInfo:function(){var e=this;this.$http.get("/api/lesson/returnLessonDetailsForTeacherWhoCreatedIt/?action=editLesson&lessonID=".concat(this.readyId,"&userID=").concat(this.userInfo.user_id)).then((function(e){return e.data})).then((function(t){if("success"===t.status)if("teacher"===e.userInfo.type){if(e.pageView=!0,e.readyTitle=t.data.big_title,e.readySubtitle=t.data.little_title,e.readyTextcolor=t.data.title_color,e.readybestSale=t.data.best_sale,e.readyCardBg=t.data.background_picture_code,99===t.data.background_picture_code&&(e.readyCardBgUpload[0].url=t.data.background_picture_path,e.readyCardBgUpload[0].file="",e.readyCardBgUpload[0].name="",e.readyCardBgList[3]=t.data.background_picture_path),e.readyName=t.data.lesson_title,e.readyType=t.data.lesson_type,e.readyFee=t.data.price_per_hour,e.readySpecially1=t.data.highlight_1,e.readySpecially2=t.data.highlight_2,e.readySpecially3=t.data.highlight_3,e.readyIntro=t.data.lesson_intro,e.readyWay=t.data.how_does_lesson_go,e.readyObject=t.data.target_students,e.readyMemo=t.data.lesson_remarks,e.readyScore=t.data.lesson_avg_score,e.readyReviewed=t.data.lesson_reviewed_times,""!==t.data.syllabus||null!==t.data.syllabus){e.readyOutline=[];var s=t.data.syllabus.split('<div class="area"><div class="chapter"><div>');s.forEach((function(t,s){if(s>0){e.readyOutline.push({type:"chapter",text:"",content:[]});var a=t.split('</div></div><div class="subsection"><div>');a.forEach((function(t,a){var i=t.replace("</div></div></div>","").split("</div><div>");0===a?e.readyOutline[s-1].text=i[1]:e.readyOutline[s-1].content.push({type:"subsection",text:i[1]})}))}}))}if(e.sellStatus=t.data.selling_status,e.readyTag=t.data.lesson_attributes,e.readySaleTry=Number(t.data.trial_class_price)>=0,e.readySaleFeeTry=Number(t.data.trial_class_price)>=0?Number(t.data.trial_class_price):200,e.readySaleUnit=t.data.lesson_has_one_hour_package,e.readySale1=!1,e.readySale2=!1,e.readySale3=!1,""!==t.data.discount_price&&null!==t.data.discount_price){var a=t.data.discount_price.split(";");a.forEach((function(t,s){if(""!==t){var a=t.split(":");0===s?(e.readySale1=!0,e.readySaleHour1=a[0],e.readySaleOff1=a[1]):1===s?(e.readySale2=!0,e.readySaleHour2=a[0],e.readySaleOff2=a[1]):2===s&&(e.readySale3=!0,e.readySaleHour3=a[0],e.readySaleOff3=a[1])}}))}}else e.$router.push("/");else t.status,"teacher"===e.userInfo.type?e.$router.go(-1):e.$router.push("/")})).catch((function(t){console.log(t),"teacher"===e.userInfo.type?e.$router.go(-1):e.$router.push("/")}))},doReadyOutlineSort:function(e,t,s,a){var i=this,r="up"===e?-1:"down"===e?1:0;if("c"===t){var o=[this.readyOutline[s].text,this.readyOutline[s].content,this.readyOutline[s+r].text,this.readyOutline[s+r].content];this.readyOutline[s].text=o[2],this.readyOutline[s].content=o[3],this.readyOutline[s+r].text=o[0],this.readyOutline[s+r].content=o[1]}else if("s"===t){var n=[this.readyOutline[s].content[a].text,this.readyOutline[s].content[a+r].text];this.readyOutline[s].content[a].text=n[1],this.readyOutline[s].content[a+r].text=n[0]}setTimeout((function(){i.getReadyOutlineReadOnly()}),0)},doReadyOutlineAdd:function(e,t){var s=this;if("c"===e){var a={type:"chapter",text:"",content:[{type:"subsection",text:""}]};this.readyOutline.push(a)}else if("s"===e){var i={type:"subsection",text:""};this.readyOutline[t].content.push(i)}setTimeout((function(){s.getReadyOutlineReadOnly()}),0)},doReadyOutlineRemove:function(e,t,s){var a=this;"c"===e?this.readyOutline.splice(t,1):"s"===e&&this.readyOutline[t].content.splice(s,1),setTimeout((function(){a.getReadyOutlineReadOnly()}),0)},getReadyOutlineReadOnly:function(){var e="";this.readyOutline.forEach((function(t,s){e=e+'<div class="area"><div class="chapter"><div>第'+(s+1)+"章</div><div>"+(c()("#chapter"+s).val()||"")+"</div></div>",t.content.forEach((function(t,a){e=e+'<div class="subsection"><div>'+(s+1)+"-"+(a+1)+"</div><div>"+(c()("#subsection"+s+"_"+a).val()||"")+"</div></div>"})),e+="</div>"})),this.readyOutlineReadOnly=e},selectReadyCardBg:function(){this.readyCardBgUpload[0].url&&(this.readyCardBg=99)},uploadReadyCardBg:function(){this.readyCardBgUpload[0].url||c()("#file_readyCardBg").click()},setReadyCardBg:function(e){var t=e.target.files||e.dataTransfer.files;e.srcElement.files.item(0).size>4194304?(c()("#file_readyCardBg").val(""),alert("上傳照片不得超過4MB")):(this.readyCardBgUpload[0].url=window.URL.createObjectURL(e.srcElement.files.item(0)),this.readyCardBgUpload[0].file=t[0],this.readyCardBgUpload[0].name=e.srcElement.files.item(0).name,this.readyCardBgList[3]=this.readyCardBgUpload[0].url)},cancelReadyCardBg:function(){this.readyCardBgUpload[0].file=this.readyCardBgUpload[0].name=this.readyCardBgUpload[0].url="",this.readyCardBgList[3]="",c()("#file_readyCardBg").val("")},doSubmitVerify:function(){this.getReadyOutlineReadOnly(),-1===this.readyTitleMessages.indexOf("✖")&&-1===this.readySubtitleMessages.indexOf("✖")&&""!==this.readyName&&-1===this.readyNameMessages.indexOf("✖")&&""!==this.readyFee&&-1===this.readyFeeMessages.indexOf("✖")&&-1===this.readySpecially1Messages.indexOf("✖")&&-1===this.readySpecially2Messages.indexOf("✖")&&-1===this.readySpecially3Messages.indexOf("✖")&&""!==this.readyIntro&&-1===this.readyIntroMessages.indexOf("✖")&&-1===this.readyWayMessages.indexOf("✖")&&-1===this.readyObjectMessages.indexOf("✖")&&-1===this.readyMemoMessages.indexOf("✖")&&-1===this.readyTagMessages.indexOf("✖")?this.userInfo&&this.userInfo.group.indexOf("test_teacher")>-1?this.readySaleUnit||this.readySale1||this.readySale2||this.readySale3?this.submit=!0:(this.submit=!1,this.snackbar=!0,this.color="red",this.errorMessages="請至少選擇單節販售或方案一至三其中一項"):this.readySaleUnit?this.submit=!0:(this.submit=!1,this.snackbar=!0,this.color="red",this.errorMessages="請至少選擇單節販售"):(this.submit=!1,scroll(0,0),this.snackbar=!0,this.color="red",this.errorMessages="請再次檢查欄位是否填妥")},dosubmitVerifyAfter:function(e){var t=this;if(this.submit){var s="";this.readySale1&&(s=s+this.readySaleHour1+":"+this.readySaleOff1+";"),this.readySale2&&(s=s+this.readySaleHour2+":"+this.readySaleOff2+";"),this.readySale3&&(s=s+this.readySaleHour3+":"+this.readySaleOff3+";"),this.loadingViewText=("edit"===this.action?"編輯":"新增")+"課程中",this.loadingView=!0;var a=new FormData;a.append("action","edit"===this.action?"editLesson":"add"===this.action?"createLesson":""),a.append("selling_status",e),a.append("lessonID",this.readyId||null),a.append("userID",this.userInfo.user_id),a.append("big_title",this.readyTitle),a.append("little_title",this.readySubtitle),a.append("title_color",this.readyTextcolor),a.append("background_picture_code",this.readyCardBg),a.append("lesson_title",this.readyName),a.append("lesson_type",this.readyType),a.append("price_per_hour",this.readyFee),a.append("highlight_1",this.readySpecially1),a.append("highlight_2",this.readySpecially2),a.append("highlight_3",this.readySpecially3),a.append("lesson_intro",this.readyIntro),a.append("how_does_lesson_go",this.readyWay),a.append("target_students",this.readyObject),a.append("lesson_remarks",this.readyMemo),a.append("lesson_attributes",this.readyTag),a.append("syllabus",this.readyOutlineReadOnly),a.append("trial_class_price",this.readySaleTry?this.readySaleFeeTry:-999),a.append("lesson_has_one_hour_package",this.readySaleUnit),a.append("discount_price",s),a.append("background_picture_path",99===this.readyCardBg&&""!==this.readyCardBgUpload[0].file?this.readyCardBgUpload[0].file:""),this.$http.post("api/lesson/createOrEditLesson/",a).then((function(e){return e.data})).then((function(e){t.loadingView=!1,"success"===e.status?(t.snackbar=!0,t.color="green",t.errorMessages=("edit"===t.action?"編輯":"新增")+"課程成功!",t.$router.push("/account/lesson")):"failed"===e.status?(t.snackbar=!0,t.color="red",t.errorMessages=e.errMsg):(t.snackbar=!0,t.color="orange",t.errorMessages="發生錯誤，請稍後再試")})).catch((function(e){t.loadingView=!1,t.snackbar=!0,t.color="orange",t.errorMessages="發生錯誤，請稍後再試",console.log(e)}))}},doSubmit:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.doSubmitVerify();case 2:return e.next=4,this.dosubmitVerifyAfter(t);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}},S=C,I=s("2877"),M=Object(I["a"])(S,a,i,!1,null,null,null);t["default"]=M.exports},"56d7":function(e,t,s){"use strict";s.r(t);s("28a5"),s("cadf"),s("551c"),s("f751"),s("097d");var a=s("2b0e"),i=s("2ead"),r=s.n(i),o=s("c1df"),n=s.n(o),c=(s("db4d"),s("a481"),s("ac6a"),s("8103")),l=s.n(c),d=s("bba4"),u=s.n(d),h=s("ffe0");h.keys().forEach((function(e){var t=h(e),s=l()(u()(e.replace(/^\.\//,"").replace(/\.\w+$/,"")));a["default"].component(s,t.default||t)}));s("4633");a["default"].use(s("84b5"));var f=s("31bd"),g=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("transition",{attrs:{mode:"out-in"}},[s("router-view")],1)},p=[],v={created:function(){this.$http.get("/api/get_csrf_token/").then((function(e){return e.data})).then((function(e){localStorage.setItem("CSRF",e.csrf_token)})),this.$http.interceptors.request.use((function(e){return e.headers.common["X-CSRFtoken"]=localStorage.getItem("CSRF"),e.headers.common["Authorization"]="Bearer "+(localStorage.getItem("token")||""),e})),this.$http.interceptors.response.use((function(e){return e}))}},m=v,_=(s("5c0b"),s("2877")),b=Object(_["a"])(m,g,p,!1,null,null,null),y=b.exports,w=s("a925"),k={},x=k;a["default"].use(w["a"]);var C=new w["a"]({locale:"en",fallbackLocale:"en",messages:x}),S=C,I=s("0284"),M=s.n(I),O=s("8c4f"),P=s("0a89"),E=s.n(P),T=[{path:"*",meta:{name:"",requiresAuth:!0},redirect:{path:"/"}},{path:"/landing",meta:{name:"",requiresAuth:!0},component:function(){return Promise.resolve().then(s.bind(null,"4d55"))}},{path:"/",meta:{name:"",requiresAuth:!0},component:function(){return s.e("chunk-3064fe14").then(s.bind(null,"427d"))},children:[{path:"",component:function(){return Promise.resolve().then(s.bind(null,"3b15"))}}]},{path:"/noEnter/:msg?",meta:{name:"",requiresAuth:!0},component:function(){return s.e("chunk-3064fe14").then(s.bind(null,"427d"))},children:[{path:"",component:function(){return Promise.resolve().then(s.bind(null,"a3564"))}}]},{path:"/account",meta:{name:"",requiresAuth:!0},component:function(){return s.e("chunk-3064fe14").then(s.bind(null,"427d"))},children:[{path:"register/student",name:"StudentRegister",component:function(){return Promise.resolve().then(s.bind(null,"8651"))}},{path:"register/teacher/:time?/:random?/:male?/:nickname?",name:"TeacherRegister",component:function(){return Promise.resolve().then(s.bind(null,"9515"))}},{path:"profile/:id?",name:"Profile",component:function(){return Promise.resolve().then(s.bind(null,"fe9b"))}},{path:"info/:type?",name:"Info",component:function(){return Promise.resolve().then(s.bind(null,"b103"))}},{path:"lesson",name:"LessonManage",component:function(){return Promise.resolve().then(s.bind(null,"b07b"))}},{path:"reservation",name:"LessonReservation",component:function(){return Promise.resolve().then(s.bind(null,"dd83"))}},{path:"study",name:"LessonStudy",component:function(){return Promise.resolve().then(s.bind(null,"a8cb"))}},{path:"finance",name:"Finance",component:function(){return Promise.resolve().then(s.bind(null,"db67"))}}]},{path:"/blog",meta:{name:"",requiresAuth:!0},component:function(){return s.e("chunk-3064fe14").then(s.bind(null,"427d"))},children:[{path:"main/:page?",name:"BlogMain",component:function(){return Promise.resolve().then(s.bind(null,"4cba"))}},{path:"post/:id?",name:"BlogPost",component:function(){return Promise.resolve().then(s.bind(null,"c559"))}}]},{path:"/lesson",meta:{name:"",requiresAuth:!0},component:function(){return s.e("chunk-3064fe14").then(s.bind(null,"427d"))},children:[{path:"search",name:"LessonSearch",component:function(){return Promise.resolve().then(s.bind(null,"78ab"))}},{path:"ready/:action?/:id?",name:"LessonReady",component:function(){return Promise.resolve().then(s.bind(null,"5651"))}},{path:"guestready",name:"LessonGuestReady",component:function(){return Promise.resolve().then(s.bind(null,"a40b"))}},{path:"main/:action?/:id?",name:"LessonMain",component:function(){return Promise.resolve().then(s.bind(null,"3d75"))}},{path:"appointment/",name:"LessonReservation",component:function(){return Promise.resolve().then(s.bind(null,"482c"))}}]},{path:"/store",meta:{name:"",requiresAuth:!0},component:function(){return s.e("chunk-3064fe14").then(s.bind(null,"427d"))},children:[{path:"checkout",name:"Checkout",component:function(){return Promise.resolve().then(s.bind(null,"b983"))}}]}];a["default"].use(O["a"]);var V=new O["a"]({base:"/",mode:"history",routes:T,scrollBehavior:function(e,t,s){return s||(e.hash?{selector:e.hash}:{x:0,y:0})}});V.beforeEach((function(e,t,s){s()})),a["default"].use(E.a),Object({NODE_ENV:"production",BASE_URL:"/static/"}).GOOGLE_ANALYTICS&&a["default"].use(M.a,{id:Object({NODE_ENV:"production",BASE_URL:"/static/"}).GOOGLE_ANALYTICS,router:V,autoTracking:{page:!0}});var j=V,B=s("4360"),$=s("ce5b"),D=s.n($),R={primary:"#4caf50",secondary:"#4caf50",tertiary:"#495057",accent:"#82B1FF",error:"#f55a4e",info:"#00d3ee",success:"#5cb860",warning:"#ffa21a",general:"#2196F3"},N=s("4ae6"),L=s.n(N),F=s("01cc"),A=s("a584"),H=s("5f5b"),U=s("b1e0"),W=(s("bf40"),s("5363"),s("d1e7"),s("f9e3"),s("2dd8"),s("bc3a")),q=s.n(W);a["default"].filter("date-format",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD";return n()(e).format(t)})),a["default"].filter("datetime-format",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD HH:mm:ss";return n()(e).format(t)})),a["default"].filter("time-format",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"HH:mm:ss";return n()(e).format(t)})),a["default"].prototype.$http=q.a;var X=location.href.split("/")[2],Y=s("941c").api_url.split("/")[2];X===Y?(X=s("941c"),a["default"].use(A["a"],{config:{id:"G-4EC8L4WNEW",params:{send_page_view:!1}}})):X=s("9d5e"),q.a.defaults.timeout=1e4,q.a.defaults.baseURL=X.api_url,q.a.defaults.headers.get["Accept"]="application/json",a["default"].prototype.$ws=X.ws_url,Object(f["sync"])(B["a"],j),a["default"].use(H["a"]),a["default"].use(U["a"]),a["default"].use(D.a,{iconfont:"mdi",theme:R}),a["default"].use(r.a,{moment:n.a}),a["default"].use(L.a),a["default"].use(F["a"]),a["default"].config.productionTip=!1,a["default"].config.devtools=!0,new a["default"]({i18n:S,router:j,store:B["a"],render:function(e){return e(y)}}).$mount("#app")},"5c0b":function(e,t,s){"use strict";var a=s("9c0c"),i=s.n(a);i.a},6096:function(e,t,s){"use strict";s.r(t);var a=s("0a78");t["default"]={setDemo:Object(a["a"])("demo"),setDrawer:Object(a["a"])("drawer"),setImage:Object(a["a"])("image"),setColor:Object(a["a"])("color"),setTheme:Object(a["a"])("theme"),setShrink:Object(a["a"])("shrink"),toggleDrawer:Object(a["b"])("drawer")}},6905:function(e,t,s){e.exports=s.p+"img/girl_icon.6065cd76.jpg"},"750f":function(e,t,s){e.exports=s.p+"img/lesson_card_bg2.8c88700c.jpg"},"77fc":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-container",{attrs:{id:"timeselector","p-0":"","m-0":""}},[s("v-layout",{attrs:{"justify-center":""}},[s("v-flex",{attrs:{xs12:""}},[s("div",{staticClass:"are-alert m-0 light-blue"},[s("span",{staticClass:"are-alert-title"},[e._v(e._s(e.title))]),e.synchronizeTime?s("v-chip",{staticClass:"float-right bg-white m-0 cursor",on:{click:function(t){return e.doSynchronize()}}},[s("v-icon",[e._v("mdi-content-copy")]),s("strong",{staticClass:"font-weight-bold"},[e._v("同步時段至每日")])],1):e._e(),e.selectWeekView?s("div",{staticClass:"float-right week-menu-icon"},[s("v-icon",{staticClass:"cursor",on:{click:function(t){return e.doAgoWeeks()}}},[e._v("mdi-menu-left")]),s("v-icon",{staticClass:"cursor",on:{click:function(t){return e.doNextWeeks()}}},[e._v("mdi-menu-right")])],1):e._e()],1),e.selectWeekView?s("h5",{staticClass:"font-weight-bold text-center"},[e._v(" "+e._s(e.startDay)+"-"+e._s(e.endDay))]):e._e(),s("div",{staticClass:"selector-time-week-title",class:{"week-menu-day":e.selectWeekView}},[s("div",{staticClass:"cursor",class:{active:0===e.selectWeek},on:{click:function(t){e.selectWeek=0}}},[e._v("日"),e.selectWeekView?s("h4",[e._v(e._s(e.weekDay[0]))]):e._e()]),s("div",{staticClass:"cursor",class:{active:1===e.selectWeek},on:{click:function(t){e.selectWeek=1}}},[e._v("一"),e.selectWeekView?s("h4",[e._v(e._s(e.weekDay[1]))]):e._e()]),s("div",{staticClass:"cursor",class:{active:2===e.selectWeek},on:{click:function(t){e.selectWeek=2}}},[e._v("二"),e.selectWeekView?s("h4",[e._v(e._s(e.weekDay[2]))]):e._e()]),s("div",{staticClass:"cursor",class:{active:3===e.selectWeek},on:{click:function(t){e.selectWeek=3}}},[e._v("三"),e.selectWeekView?s("h4",[e._v(e._s(e.weekDay[3]))]):e._e()]),s("div",{staticClass:"cursor",class:{active:4===e.selectWeek},on:{click:function(t){e.selectWeek=4}}},[e._v("四"),e.selectWeekView?s("h4",[e._v(e._s(e.weekDay[4]))]):e._e()]),s("div",{staticClass:"cursor",class:{active:5===e.selectWeek},on:{click:function(t){e.selectWeek=5}}},[e._v("五"),e.selectWeekView?s("h4",[e._v(e._s(e.weekDay[5]))]):e._e()]),s("div",{staticClass:"cursor",class:{active:6===e.selectWeek},on:{click:function(t){e.selectWeek=6}}},[e._v("六"),e.selectWeekView?s("h4",[e._v(e._s(e.weekDay[6]))]):e._e()])]),s("div",{staticClass:"selector-time-item-area"},e._l(e.selectDateDefault?e.selectTimeList[e.arrayIndex]:e.selectTimeList[e.selectWeek],(function(t,a){return s("div",{key:"time"+a,class:{cursor:!e.readonly||t.open&&!t.booked&&e.reservation,active:t.select,booking:t.booked,open:t.open,disabled:e.readonly&&!t.open},on:{click:function(s){e.doSelectTime(e.selectWeek,t.value,t.select,!t.booked&&t.open)}}},[e._v(e._s(t.text))])})),0)])],1)],1)},i=[],r=(s("a481"),s("28a5"),s("ac6a"),s("c5f6"),{name:"TimeSelector",props:{readonly:{type:Boolean,default:!1},reservation:{type:Boolean,default:!1},selectWeekView:{type:Boolean,default:!1},synchronizeTime:{type:Boolean,default:!1},selectTimeDefault:{type:String,default:null},selectDateDefault:{type:Array,default:null},selectDateBooked:{type:Array,default:null},removeSelectDate:{type:Object,default:null},canSelectDate:{type:Number,default:null}},data:function(){return{title:this.readonly?"每週可預約時段":"時段選擇器",nowdate:this.$moment(new Date).format("YYYY/MM/DD"),nowTime:Math.floor(((new Date).getTime()-new Date(this.$moment(new Date).format("YYYY/MM/DD")+" 00:00:00").getTime())/18e5)+4,selectWeek:0,selectTimeList:[],selectOpenTimeList:[],selectTimeDefaultList:[],selectDateDefaultList:[],selectDateBookedList:[],startDay:"",endDay:"",weekDay:[]}},computed:{selectTime:function(){var e=this,t="",s=[6,0,1,2,3,4,5];return this.selectTimeList.forEach((function(a,i){var r=[];a.forEach((function(e){e.select&&r.push(e.value)})),!e.selectWeekView&&r.length>0&&(t=t+(s[i]+":")+r.join()+";")})),t},selectOpenTime:function(){var e=this,t=[];return this.selectTimeList.forEach((function(s,a){var i=[];if(s.forEach((function(e){e.select&&i.push(e.value)})),i.length>0){var r=e.$moment(new Date(e.nowdate+" 00:00:00").getTime()+864e5*a).format("YYYY-MM-DD");t.push(r+":"+i)}})),t},selectOpenTimeDetail:function(){var e=this,t=[];return this.selectTimeList.forEach((function(s,a){var i=[];if(s.forEach((function(e){if(e.select){var t=(e.value<20?"0":"")+parseInt(e.value/2)+":"+(e.value%2?"30":"00"),s=(e.value+1<20?"0":"")+parseInt((e.value+1)/2)+":"+((e.value+1)%2?"30":"00");i.push({code:e.value,timeStart:t,timeEnd:s})}})),i.length>0){var r=e.$moment(new Date(e.nowdate+" 00:00:00").getTime()+864e5*a).format("YYYY-MM-DD"),o=new Date(r).getDay();t.push({days:a,date:r,week:o,time:i})}})),t},arrayIndex:function(){var e=(new Date(this.startDay).getTime()+864e5*this.selectWeek-new Date(this.nowdate+" 00:00:00").getTime())/864e5;return e}},watch:{selectWeek:function(e){this.getDateTime(e)},startDay:function(){this.getDateTime(this.selectWeek)},removeSelectDate:function(e){var t=this;this.selectTimeList[e.days].forEach((function(s,a){e.code.indexOf(s.value)>-1&&(t.selectTimeList[e.days][a].select=!1)})),this.$emit("res-select-open-time",this.selectOpenTime),this.$emit("res-select-open-time-detail",this.selectOpenTimeDetail)}},mounted:function(){var e=this;if(this.startDay=this.$moment(new Date(this.nowdate+" 00:00:00").getTime()-864e5*new Date(this.nowdate).getDay()).format("YYYY/MM/DD"),this.endDay=this.$moment(new Date(this.nowdate+" 00:00:00").getTime()+864e5*(6-new Date(this.nowdate).getDay())).format("YYYY/MM/DD"),this.selectWeekView&&(this.selectWeek=Number(new Date(this.nowdate).getDay()),this.doWeekDay()),this.selectDateDefault)this.selectDateDefault.forEach((function(t){var s=t.replace(";","").split(":"),a=s[1].split(",");e.selectDateDefaultList.push({date:s[0],time:a})})),this.selectDateBooked&&this.selectDateBooked.forEach((function(t){var s=t.replace(";","").split(":"),a=s[1].split(",");e.selectDateBookedList.push({date:s[0],time:a})}));else if(null!==this.selectTimeDefault&&""!==this.selectTimeDefault){for(var t=0;t<7;t++)this.selectTimeDefaultList.push([]);var s=[6,0,1,2,3,4,5],a=this.selectTimeDefault.split(";");a.forEach((function(t){if(""!==t){var a=t.split(":"),i=a[1].split(",");s.forEach((function(t,s){t===Number(a[0])&&(e.selectTimeDefaultList[s]=i)}))}}))}if(this.selectTimeList=[],this.selectDateDefault){for(var i=0;i<=183;i++){this.selectTimeList.push([]);for(var r=0;r<48;r++)this.selectTimeList[i].push({open:!1,select:!1,booked:!1,value:r,text:(r<20?"0":"")+parseInt(r/2)+":"+(r%2?"30":"00")+"-"+(r+1<20?"0":"")+parseInt((r+1)/2)+":"+((r+1)%2?"30":"00")})}this.selectDateDefaultList.forEach((function(t,s){var a=(new Date(t.date+" 00:00:00")-new Date(new Date(e.nowdate).getFullYear(),new Date(e.nowdate).getMonth(),new Date(e.nowdate).getDate(),0,0,0))/864e5;if(a>=0)for(var i=function(s){t.time.forEach((function(t){s===Number(t)&&(e.selectTimeList[a][s].open=!0)}))},r=0;r<48;r++)i(r)})),this.selectDateBooked&&this.selectDateBookedList.forEach((function(t,s){var a=(new Date(t.date+" 00:00:00")-new Date(new Date(e.nowdate).getFullYear(),new Date(e.nowdate).getMonth(),new Date(e.nowdate).getDate(),0,0,0))/864e5;if(a>=0)for(var i=function(s){t.time.forEach((function(t){s===Number(t)&&(e.selectTimeList[a][s].booked=!0)}))},r=0;r<48;r++)i(r)})),this.selectTimeList[0].forEach((function(t,s){s<=e.nowTime&&(e.selectTimeList[0][s].open=!1,e.selectTimeList[0][s].booked=!1)})),this.selectTimeList[1].forEach((function(t,s){s<=e.nowTime-48&&(e.selectTimeList[1][s].open=!1,e.selectTimeList[1][s].booked=!1)}))}else for(var o=0;o<7;o++){this.selectTimeList.push([]);for(var n=function(t){var s=!1;e.selectTimeDefaultList.length>0&&e.selectTimeDefaultList[o].forEach((function(e){t===Number(e)&&""!==e&&(s=!0)})),e.selectTimeList[o].push({open:!0,select:s,booked:!1,value:t,text:(t<20?"0":"")+parseInt(t/2)+":"+(t%2?"30":"00")+"-"+(t+1<20?"0":"")+parseInt((t+1)/2)+":"+((t+1)%2?"30":"00")})},c=0;c<48;c++)n(c)}},methods:{doWeekDay:function(){this.weekDay=[];for(var e=0;e<7;e++)this.weekDay.push(this.$moment(new Date(this.startDay).getTime()+864e5*e).format("DD"))},doAgoWeeks:function(){this.$moment(new Date(this.startDay).getTime())>this.$moment(new Date(this.nowdate+" 00:00:00").getTime())&&(this.startDay=this.$moment(new Date(this.startDay).getTime()-6048e5).format("YYYY/MM/DD"),this.endDay=this.$moment(new Date(this.endDay).getTime()-6048e5).format("YYYY/MM/DD"),this.doWeekDay())},doNextWeeks:function(){this.startDay=this.$moment(new Date(this.startDay).getTime()+6048e5).format("YYYY/MM/DD"),this.endDay=this.$moment(new Date(this.endDay).getTime()+6048e5).format("YYYY/MM/DD"),this.doWeekDay()},getDateTime:function(e){},doSelectTime:function(e,t,s,a){this.readonly||this.reservation||!a?this.reservation&&a&&(!s&&this.canSelectDate<30?alert("您目前剩餘可選時數不足30分鐘"):(this.selectTimeList[this.arrayIndex].forEach((function(e){e.value===t&&(e.select=!s)})),this.$emit("res-select-open-time",this.selectOpenTime),this.$emit("res-select-open-time-detail",this.selectOpenTimeDetail))):(this.selectTimeList[e].forEach((function(e){e.value===t&&(e.select=!s)})),this.$emit("res-select-time",this.selectTime))},doSynchronize:function(){var e=this;this.selectTimeList.forEach((function(t,s){e.selectTimeList[s].forEach((function(t,a){e.selectTimeList[s][a].select=JSON.parse(JSON.stringify(e.selectTimeList[e.selectWeek][a].select))}))})),this.$emit("res-select-time",this.selectTime)}}}),o=r,n=s("2877"),c=Object(n["a"])(o,a,i,!1,null,null,null);t["default"]=c.exports},"78ab":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-content",{attrs:{id:"lessonSearch"}},[s("div",{staticClass:"container"},[s("div",{staticClass:"page-search-area d-flex d-lg-none d-xl-none"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.searchKeyword,expression:"searchKeyword"}],staticClass:"row-btn-50",attrs:{id:"page-search-input",placeholder:"請輸入科目或老師"},domProps:{value:e.searchKeyword},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.doKeywordSearch()},input:function(t){t.target.composing||(e.searchKeyword=t.target.value)}}}),s("button",{staticClass:"page-search-btn btn-50",on:{click:function(t){return e.doKeywordSearch()}}},[s("v-icon",[e._v("mdi-magnify")])],1)]),s("div",{staticClass:"row"},[s("div",{staticClass:"filter-bar col-xs-12 col-md-12 my-2 border-bottom"},[s("v-chip",{staticClass:"cursor-no-hover h5",class:{active:"best_sales"===e.filterBar},on:{click:function(t){e.filterBar="best_sales"===e.filterBar?"":"best_sales"}}},[e._v("熱門優先")]),"reach_rate_asc"!==e.filterBar?s("v-chip",{staticClass:"cursor-no-hover h5 ",class:{active:"reach_rate_desc"===e.filterBar},on:{click:function(t){e.filterBar="reach_rate_desc"===e.filterBar?"reach_rate_asc":"reach_rate_desc"}}},[e._v("完課量"),s("v-icon",[e._v("mdi-menu-down")])],1):e._e(),"reach_rate_asc"===e.filterBar?s("v-chip",{staticClass:"cursor-no-hover h5 ",class:{active:"reach_rate_asc"===e.filterBar},on:{click:function(t){e.filterBar="reach_rate_asc"===e.filterBar?"":"reach_rate_asc"}}},[e._v("完課量"),s("v-icon",[e._v("mdi-menu-up")])],1):e._e(),"price_per_hour_asc"!==e.filterBar?s("v-chip",{staticClass:"cursor-no-hover h5",class:{active:"price_per_hour_desc"===e.filterBar},on:{click:function(t){e.filterBar="price_per_hour_desc"===e.filterBar?"price_per_hour_asc":"price_per_hour_desc"}}},[e._v("鐘點費"),s("v-icon",[e._v("mdi-menu-down")])],1):e._e(),"price_per_hour_asc"===e.filterBar?s("v-chip",{staticClass:"cursor-no-hover h5",class:{active:"price_per_hour_asc"===e.filterBar},on:{click:function(t){e.filterBar="price_per_hour_asc"===e.filterBar?"":"price_per_hour_asc"}}},[e._v("鐘點費"),s("v-icon",[e._v("mdi-menu-up")])],1):e._e(),"lesson_scores_asc"!==e.filterBar?s("v-chip",{staticClass:"cursor-no-hover h5",class:{active:"lesson_scores_desc"===e.filterBar},on:{click:function(t){e.filterBar="lesson_scores_desc"===e.filterBar?"lesson_scores_asc":"lesson_scores_desc"}}},[e._v("評價"),s("v-icon",[e._v("mdi-menu-down")])],1):e._e(),"lesson_scores_asc"===e.filterBar?s("v-chip",{staticClass:"cursor-no-hover h5",class:{active:"lesson_scores_asc"===e.filterBar},on:{click:function(t){e.filterBar="lesson_scores_asc"===e.filterBar?"":"lesson_scores_asc"}}},[e._v("評價"),s("v-icon",[e._v("mdi-menu-up")])],1):e._e(),s("div",{staticClass:"cursor-no-hover moreFilter main-color",on:{click:function(t){e.moreFilterView=!0}}},[s("v-icon",{staticClass:"toolbar-icon"},[e._v("mdi-filter")]),s("span",{staticClass:"xs-font-14"},[e._v("更多篩選")])],1)],1)]),s("div",{staticClass:"row",class:{loading:e.loadingStatus}},[e.loadingStatus||0!==e.resLessonSearchList.length?e._e():s("p",{staticClass:"text-center w-100"},[e._v("無符合條件的課程")]),e._l(e.resLessonSearchList,(function(t,a){return s("div",{key:"c"+a,staticClass:"item-cube col-xs-12 col-md-6 my-2"},[s("div",{staticClass:"teacher-photo",style:"background-image: url('"+e.root+(""!==t.teacher_thumbnail_path?t.teacher_thumbnail_path:t.is_this_teacher_male?e.boyTeacher:e.girlTeacher)+"');"}),""!==t.best_sale?s("div",{staticClass:"best_sale"},[e._v(e._s(t.best_sale))]):e._e(),s("v-layout",{attrs:{"item-cube-main":"","justify-center":""}},[s("v-flex",{staticClass:"top",style:"background-image: url('"+e.root+(99===t.background_picture_code?t.background_picture_path:0===t.background_picture_code?e.cardBg1:1===t.background_picture_code?e.cardBg2:e.cardBg3)+"');"},[s("div",{style:"color:"+t.title_color+";"},[e._v(e._s(t.big_title))]),s("div",{style:"color:"+t.title_color+";"},[e._v(e._s(t.little_title))]),t.is_this_my_favorite_lesson?e._e():s("v-icon",{staticClass:"cursor",staticStyle:{color:"coral"},on:{click:function(s){return e.doFavorite(t.lessonID,!0)}}},[e._v("mdi-heart-outline")]),t.is_this_my_favorite_lesson?s("v-icon",{staticClass:"cursor",staticStyle:{color:"coral"},on:{click:function(s){return e.doFavorite(t.lessonID,!1)}}},[e._v("mdi-heart")]):e._e()],1),s("v-flex",{staticClass:"middle"},[s("p",{staticClass:"fraction md-font-18 xs-font-10 word-keep-all"},[e._v("評價"+e._s(t.lesson_avg_score)+" ("+e._s(t.lesson_reviewed_times)+")")]),s("span",{staticClass:"xs-font-18 md-font-25 float-left word-keep-all cursor",on:{click:function(s){return e.$router.push("/account/profile/"+t.teacher_auth_id)}}},[e._v(e._s(t.teacher_nickname))]),s("span",{staticClass:"xs-font-18 md-font-25 float-right word-keep-all"},[e._v("鐘點費NT$"+e._s(t.price_per_hour))])]),s("v-flex",{staticClass:"bottom"},[s("div",{staticClass:"text-left mb-2"},[s("p",{staticClass:"title mb-2 cursor",on:{click:function(s){return e.$router.push("/lesson/main/view/"+t.lessonID)}}},[e._v(e._s(t.lesson_title))]),s("p",{staticClass:"prove"},[t.education_is_approved?s("img",{attrs:{src:e.prove}}):e._e(),e._v(e._s(t.education))]),s("p",{staticClass:"prove"},[t.working_experience_is_approved?s("img",{attrs:{src:e.prove}}):e._e(),e._v(e._s(t.working_experience))])]),s("div",{staticClass:"text-left"},[""!==t.highlight_1?s("span",{staticClass:"tag md-font-13 xs-font-9 word-keep-all"},[e._v(e._s(t.highlight_1))]):e._e(),""!==t.highlight_2?s("span",{staticClass:"tag md-font-13 xs-font-9 word-keep-all"},[e._v(e._s(t.highlight_2))]):e._e(),""!==t.highlight_3?s("span",{staticClass:"tag md-font-13 xs-font-9 word-keep-all"},[e._v(e._s(t.highlight_3))]):e._e()])])],1)],1)}))],2)]),s("v-dialog",{attrs:{"max-width":"1110px",width:"100%",persistent:""},model:{value:e.moreFilterView,callback:function(t){e.moreFilterView=t},expression:"moreFilterView"}},[s("v-card",{staticStyle:{margin:"0 auto"},attrs:{"max-width":"100%"}},[s("v-card-text",{staticClass:"p-0"},[s("v-alert",{staticClass:"border-0",attrs:{color:"bg-main-color"},model:{value:e.moreFilterView,callback:function(t){e.moreFilterView=t},expression:"moreFilterView"}},[s("strong",{staticClass:"h4"},[e._v("篩選條件")]),s("v-icon",{staticClass:"cursor float-right text-white",on:{click:function(t){e.moreFilterView=!1}}},[e._v("mdi-close")])],1)],1),s("v-card-actions",{staticStyle:{padding:"0","justify-content":"center","flex-flow":"column"}},[e._l(e.filterSelectList,(function(t,a){return s("div",{key:"filter"+a,staticClass:"filter-bar row col-xs-12 col-md-12 my-2 p-0 justify-start"},[s("div",{staticClass:"cursor scroll col-xs-12 col-md-12 p-0",on:{click:function(t){e.filterSelectOpenList[a].open=!e.filterSelectOpenList[a].open}}},[s("span",{staticClass:"title pr-2"},[e._v(e._s(t.title))]),s("span",{staticClass:"line"}),s("span",{staticClass:"switch pl-2"},[!1===e.filterSelectOpenList[a].open?s("v-icon",[e._v("mdi-chevron-down")]):e._e(),!0===e.filterSelectOpenList[a].open?s("v-icon",[e._v("mdi-chevron-up")]):e._e()],1)]),s("div",{staticClass:"filter-bar-area col-xs-12 col-md-12 p-0",class:{"filter-bar-area-open":!0===e.filterSelectOpenList[a].open}},e._l(t.items,(function(t,i){return s("v-chip",{key:"item"+a+i,staticClass:"cursor-no-hover h5",class:{active:!0===e.filterSelectList[a].items[i].select},on:{click:function(t){e.filterSelectList[a].items[i].select=!e.filterSelectList[a].items[i].select}}},[e._v(e._s(t.text))])})),1)])})),s("div",{staticClass:"filter-bar row col-xs-12 col-md-12 my-2 p-0 justify-start"},[s("div",{staticClass:"cursor scroll col-xs-12 col-md-12 p-0",on:{click:function(t){e.filterSelectOpenList[4].open=!e.filterSelectOpenList[4].open}}},[s("span",{staticClass:"title pr-2"},[e._v("鐘點費區間")]),s("span",{staticClass:"line"}),s("span",{staticClass:"switch pl-2"},[!1===e.filterSelectOpenList[4].open?s("v-icon",[e._v("mdi-chevron-down")]):e._e(),!0===e.filterSelectOpenList[4].open?s("v-icon",[e._v("mdi-chevron-up")]):e._e()],1)]),s("div",{staticClass:"filter-bar-area col-xs-12 col-md-12 p-0 text-center",class:{"filter-bar-area-open":!0===e.filterSelectOpenList[4].open}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.filterSelectFee.min,expression:"filterSelectFee.min"}],staticClass:"h5 item-input",class:{active:0!==e.filterSelectFee.min},attrs:{min:0,step:1,type:"number"},domProps:{value:e.filterSelectFee.min},on:{input:function(t){t.target.composing||e.$set(e.filterSelectFee,"min",t.target.value)}}}),s("span",{staticClass:"mx-3"},[e._v("到")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.filterSelectFee.max,expression:"filterSelectFee.max"}],staticClass:"h5 item-input",class:{active:99999!==e.filterSelectFee.max},attrs:{min:e.filterSelectFee.min,step:1,type:"number"},domProps:{value:e.filterSelectFee.max},on:{input:function(t){t.target.composing||e.$set(e.filterSelectFee,"max",t.target.value)}}})])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-xs-12 col-md-12 p-0 text-center"},[s("v-btn",{staticClass:"mx-2 my-4 px-3 py-2 h5 bg-secondary",on:{click:function(t){return e.getMorefilterList()}}},[s("v-icon",{staticClass:"mr-2"},[e._v("mdi-restore")]),e._v("重設 ")],1),s("v-btn",{staticClass:"mx-2 my-4 px-3 py-2 h5 bg-button-color",on:{click:function(t){return e.doSearch()}}},[s("v-icon",{staticClass:"mr-2"},[e._v("mdi-check")]),e._v("使用 ")],1)],1)])],2)],1)],1),s("v-snackbar",{attrs:{top:!0,color:e.color},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(" "+e._s(e.errorMessages)+" "),s("v-btn",{attrs:{dark:"",flat:""},on:{click:function(t){e.snackbar=!1}}},[e._v(" Close ")])],1)],1)},i=[],r=(s("8e6e"),s("456d"),s("ac6a"),s("bd86")),o=s("4328"),n=s.n(o),c=s("0b2b"),l=s.n(c),d=s("222d"),u=s.n(d),h=s("34a4"),f=s.n(h),g=s("2ea1"),p=s.n(g),v=s("750f"),m=s.n(v),_=s("df25"),b=s.n(_),y=s("f8b2"),w=s.n(y),k=s("2f62");function x(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function C(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?x(Object(s),!0).forEach((function(t){Object(r["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):x(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var S={name:"LessonSearch",metaInfo:function(){return{title:this.appName+"｜課程"+(""!==this.searchKeyword?"(搜尋｜"+this.searchKeyword+")":"")}},data:function(){return{boyTeacher:l.a,girlTeacher:u.a,prove:f.a,cardBg1:p.a,cardBg2:m.a,cardBg3:b.a,loading:w.a,loadingStatus:!1,snackbar:!1,color:"red",errorMessages:"",searchKeyword:"",filterBar:"",moreFilterView:!1,resLessonSearchList:[],filterSelectList:[],filterSelectOpenList:[{open:!0},{open:!0},{open:!0},{open:!0},{open:!0},{open:!0}],filterSelectFee:{open:!1,min:0,max:99999}}},computed:C({},Object(k["c"])(["root","appName","dologinView"]),{userInfo:function(){return JSON.parse(localStorage.getItem("user"))},filtered:function(){var e="";return this.filterSelectList.forEach((function(t){var s=[];t.items.forEach((function(e){e.select&&s.push(e.value)})),s.length>0&&(e=e+t.type+":"+s.join()+";")})),e=e+"filtered_price_per_hour:"+this.filterSelectFee.min+","+this.filterSelectFee.max,e}}),watch:{"$route.fullPath":function(e){this.$router.go(0)},filterBar:function(){this.resLessonSearchList=[],this.doSearch()},"filterSelectFee.min":function(e){this.filterSelectFee.min=Math.round(e),this.filterSelectFee.max<Math.round(e)&&(this.filterSelectFee.max=Math.round(e))},"filterSelectFee.max":function(e){""===e?this.filterSelectFee.max=99999:e<this.filterSelectFee.min?this.filterSelectFee.max=this.filterSelectFee.min:this.filterSelectFee.max=Math.round(e)}},mounted:function(){var e=this,t=this.$route.query.q;this.searchKeyword=t||"";var s=!0;if(localStorage.getItem("token")||s){var a={userId:this.userInfo?this.userInfo.user_id:-1,url:this.$route.path};this.$http.post("/api/account/authCheck/",n.a.stringify(a)).then((function(e){return e.data})).then((function(t){"success"===t.status?t.data.authority&&(e.getMorefilterList(),e.doSearch()):localStorage.getItem("user")&&e.$store.dispatch("logout").then((function(){e.$router.go(0)}))})).catch((function(t){console.log(t),localStorage.getItem("user")&&e.$store.dispatch("logout").then((function(){e.$router.go(0)}))}))}},methods:{doKeywordSearch:function(){this.doSearch(),this.$router.push("/lesson/search?q="+this.searchKeyword)},doSearch:function(){var e=this;this.resLessonSearchList=[],this.loadingStatus=!0,this.moreFilterView=!1;var t={userID:this.userInfo?this.userInfo.user_id:-1,qty:-1,keywords:this.searchKeyword,only_show_ones_favorites:!1,only_show_lessons_by_this_teacher_s_auth_id:-1,ordered_by:this.filterBar,filtered_by:this.filtered};this.$http.post("/api/lesson/getLessonCardsForCommonUsers/",n.a.stringify(t)).then((function(e){return e.data})).then((function(t){e.loadingStatus=!1,"success"===t.status?e.resLessonSearchList=t.data:"failed"===t.status?(e.snackbar=!0,e.color="red",e.errorMessages=t.errMsg):(e.snackbar=!0,e.color="orange",e.errorMessages="發生錯誤，請稍後再試")})).catch((function(t){e.snackbar=!0,e.color="orange",e.errorMessages="發生錯誤，請稍後再試",console.log(t)}))},test:function(){alert("未開放")},doFavorite:function(e,t){var s=this;if(localStorage.getItem("token")){var a={userID:this.userInfo?this.userInfo.user_id:-1,lessonID:e,status:t};this.$http.post("/api/lesson/addOrRemoveFavoriteLessons/",n.a.stringify(a)).then((function(e){return e.data})).then((function(e){"success"===e.status?(s.doSearch(),s.snackbar=!0,s.color="green",s.errorMessages="已"+(t?"加入":"移除")+"收藏"):"failed"===e.status?(s.snackbar=!0,s.color="red",s.errorMessages=e.errMsg):(s.snackbar=!0,s.color="orange",s.errorMessages="發生錯誤，請稍後再試")})).catch((function(e){s.snackbar=!0,s.color="orange",s.errorMessages="發生錯誤，請稍後再試",console.log(e)}))}else this.$store.state.dologinView=!0},getMorefilterList:function(){var e=this;this.filterSelectFee={open:!1,min:0,max:99999},this.filterSelectList=[{type:"filtered_subjects",title:"課程科目",open:!0,items:[]},{type:"filtered_target_students",title:"授課對象",open:!1,items:[]},{type:"filtered_times",title:"授課時段",open:!1,items:[]},{type:"filtered_tutoring_experience",title:"教學資歷",open:!1,items:[]},{type:"filtered_lesson_type",title:"授課模式",open:!1,items:[]}],this.$http.get("/api/lesson/getALLFilteredKeysAndValues/").then((function(e){return e.data})).then((function(t){"success"===t.status?(e.filterSelectList[0].items=t.data.filtered_subjects,e.filterSelectList[1].items=t.data.filtered_target_students,e.filterSelectList[2].items=t.data.filtered_times,e.filterSelectList[3].items=t.data.filtered_tutoring_experience,e.filterSelectList[4].items=t.data.filtered_lesson_type):t.status})).catch((function(e){console.log(e)}))}}},I=S,M=s("2877"),O=Object(M["a"])(I,a,i,!1,null,null,null);t["default"]=O.exports},"7a74":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-footer",{attrs:{id:"core-footer"}},[s("div",{staticClass:"container p-0 m-0"},[s("v-layout",{attrs:{layout:"",wrap:"","m-0":""}},[s("v-flex",{attrs:{"align-self-end":"","pl-3":"","py-3":"","text-left":"",xs12:"",sm6:"",md6:""}},[s("p",{staticClass:"title"},[e._v(" 聯絡我們 ")]),s("p",[s("v-icon",{staticClass:"toolbar-icon text-white mr-2"},[e._v(" mdi-map-marker ")]),e._v("台北市信義區忠孝東路五段一之二號五樓 ")],1),s("p",[s("v-icon",{staticClass:"toolbar-icon text-white mr-2"},[e._v(" mdi-email ")]),e._v("quikok.taiwan@quikok.com ")],1)]),s("v-flex",{attrs:{"align-self-end":"","pr-3":"","py-3":"","text-right":"",xs12:"",sm6:"",md6:""}},[s("a",{attrs:{href:"https://fb.com/quikok.taiwan/",target:"_blank"}},[s("v-icon",{staticClass:"cursor"},[e._v(" mdi-facebook ")])],1),s("p",[e._v(" © "+e._s((new Date).getFullYear())+" Copyright: www.quikok.com ")])])],1)],1)])},i=[],r=(s("8e6e"),s("ac6a"),s("456d"),s("bd86")),o=s("2f62");function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function c(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){Object(r["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var l={data:function(){return{}},computed:c({},Object(o["c"])(["appName"])),methods:{test:function(){alert("XXX")}}},d=l,u=s("2877"),h=Object(u["a"])(d,a,i,!1,null,"54a4806e",null);t["default"]=h.exports},8651:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"fluid fill-height register",attrs:{id:"studentregister"}},[s("div",{staticClass:"container"},[s("p",{staticClass:"mb-5 h3 font-weight-bold",staticStyle:{"word-wrap":"break-word","white-space":"pre-wrap","text-align":"justify","font-weight":"500!important"}},[e._v("謝謝您使用我們的服務，「"+e._s(e.appName)+"」是國內第一家利用人工智慧審核教師履歷、優化上課品質的教學平台，我們也打造了傑出的視訊系統來帶給您最優異的學習體驗，趕快來看看我們精彩的課程吧！")]),s("hr"),s("p",{staticClass:"h3"},[e._v("帳號與密碼設定")]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-xs-12 col-md-12"},[s("v-text-field",{staticClass:"required account",class:{"required-fail":""===e.regEmail,fail:-1!==e.regEmailMessages.indexOf("✖"),pass:-1!==e.regEmailMessages.indexOf("✔")},attrs:{hint:e.regEmailMessages,label:"Email",type:"email","persistent-hint":""},model:{value:e.regEmail,callback:function(t){e.regEmail=t},expression:"regEmail"}})],1),s("div",{staticClass:"col-xs-12 col-md-6"},[s("v-text-field",{staticClass:"required",class:{"required-fail":""===e.regPwd,fail:-1!==e.regPwdMessages.indexOf("✖"),pass:-1!==e.regPwdMessages.indexOf("✔")},attrs:{hint:e.regPwdMessages,label:"密碼",type:"password","persistent-hint":""},model:{value:e.regPwd,callback:function(t){e.regPwd=t},expression:"regPwd"}})],1),s("div",{staticClass:"col-xs-12 col-md-6"},[s("v-text-field",{staticClass:"required",class:{"required-fail":""===e.regPwdConfirm,fail:-1!==e.regPwdConfirmMessages.indexOf("✖"),pass:-1!==e.regPwdConfirmMessages.indexOf("✔")},attrs:{hint:e.regPwdConfirmMessages,label:"密碼確認",type:"password","persistent-hint":""},model:{value:e.regPwdConfirm,callback:function(t){e.regPwdConfirm=t},expression:"regPwdConfirm"}})],1),s("div",{staticClass:"col-xs-12 col-md-6"},[s("v-text-field",{staticClass:"required",class:{"required-fail":""===e.regMobile,fail:-1!==e.regMobileMessages.indexOf("✖"),pass:-1!==e.regMobileMessages.indexOf("✔")},attrs:{hint:e.regMobileMessages,label:"手機號碼",type:"text","persistent-hint":""},model:{value:e.regMobile,callback:function(t){e.regMobile=t},expression:"regMobile"}})],1)]),s("hr"),s("p",{staticClass:"h3"},[e._v("個人資訊")]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-xs-12 col-md-6"},[s("v-text-field",{staticClass:"required",class:{"required-fail":""===e.regName,fail:-1!==e.regNameMessages.indexOf("✖"),pass:-1!==e.regNameMessages.indexOf("✔")},attrs:{hint:e.regNameMessages,label:"姓名",type:"text","persistent-hint":""},model:{value:e.regName,callback:function(t){e.regName=t},expression:"regName"}})],1),s("div",{staticClass:"col-xs-12 col-md-6"},[s("v-text-field",{class:{fail:-1!==e.regNicknameMessages.indexOf("✖"),pass:-1!==e.regNicknameMessages.indexOf("✔")},attrs:{hint:e.regNicknameMessages,label:"暱稱",type:"text","persistent-hint":""},model:{value:e.regNickname,callback:function(t){e.regNickname=t},expression:"regNickname"}})],1),s("div",{staticClass:"col-xs-12 col-md-6"},[s("v-select",{staticClass:"required",class:{"required-fail":""===e.regRole,fail:-1!==e.regRoleMessages.indexOf("✖"),pass:-1!==e.regRoleMessages.indexOf("✔")},attrs:{hint:e.regRoleMessages,items:[{text:"本人",value:"本人"},{text:"爸爸",value:"爸爸"},{text:"媽媽",value:"媽媽"},{text:"哥哥",value:"哥哥"},{text:"姊姊",value:"姊姊"},{text:"其他",value:"其他"}],label:"身分","persistent-hint":""},model:{value:e.regRole,callback:function(t){e.regRole=t},expression:"regRole"}})],1),s("div",{staticClass:"col-xs-12 col-md-6"},[s("v-select",{staticClass:"required",class:{"required-fail":""===e.regGender,fail:-1!==e.regGenderMessages.indexOf("✖"),pass:-1!==e.regGenderMessages.indexOf("✔")},attrs:{hint:e.regGenderMessages,items:[{text:"生理男",value:"1"},{text:"生理女",value:"0"}],label:"生理性別","persistent-hint":""},model:{value:e.regGender,callback:function(t){e.regGender=t},expression:"regGender"}})],1),s("div",{staticClass:"col-xs-12 col-md-6"},[s("v-text-field",{staticClass:"required",class:{"required-fail":""===e.regBirth,fail:-1!==e.regBirthMessages.indexOf("✖"),pass:-1!==e.regBirthMessages.indexOf("✔")},attrs:{max:e.$moment(new Date).format("YYYY-MM-DD"),hint:e.regBirthMessages,label:"生日",type:"date","persistent-hint":""},model:{value:e.regBirth,callback:function(t){e.regBirth=t},expression:"regBirth"}})],1)]),s("hr"),s("p",{staticClass:"h3"},[e._v("上傳頭像")]),s("div",{staticClass:"row flex-center"},[e._m(0),s("div",{staticClass:"col-xs-12 col-md-6 col-xl-4 upload-headshot"},[e.regHeadshot[0].url?e._e():s("div",{staticClass:"upload-headshot-add"},[s("v-icon",[e._v("mdi-account")])],1),e.regHeadshot[0].url?s("div",{staticClass:"upload-headshot-view",style:"background-image: url('"+e.regHeadshot[0].url+"')"},[s("v-icon",{staticClass:"cursor",on:{click:function(t){return e.cancelHeadshotIMG()}}},[e._v("mdi-close")])],1):e._e(),s("div",{staticClass:"upload-headshot-file"},[s("input",{attrs:{id:"headshot-file",type:"file","data-target":"file-uploader",accept:"image/*","persistent-hint":""},on:{change:function(t){return e.setHeadshot(t)}}})])])]),s("hr"),s("p",{staticClass:"h3"},[e._v("學習成效通知")]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-xs-12 col-md-12"},[e._m(1),s("v-textarea",{class:{fail:-1!==e.regNotifiemailMessages.indexOf("✖"),pass:-1!==e.regNotifiemailMessages.indexOf("✔")},attrs:{hint:e.regNotifiemailMessages,label:"寄送對象",rows:"1",type:"text","persistent-hint":""},model:{value:e.regNotifiemail,callback:function(t){e.regNotifiemail=t},expression:"regNotifiemail"}})],1)]),s("hr"),s("p",{staticClass:"h3"},[e._v("我們的承諾")]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-xs-12 col-md-12"},[s("p",{staticClass:"mx-3 mb-4 h4",staticStyle:{"word-wrap":"break-word","white-space":"pre-wrap"}},[e._v("我們不會將您的註冊資料外洩或是轉交其他業者，您的資訊將與我們的個資一起妥善保管在工業等級的伺服器中。")]),e.userAgreementOpen?e._e():s("v-btn",{staticClass:"m-3 bg-main-color",on:{click:function(t){e.userAgreementOpen=!0}}},[s("v-icon",{staticClass:"mr-2"},[e._v("mdi-chevron-down")]),e._v("用戶協議 ")],1),e.userAgreementOpen?s("v-btn",{staticClass:"m-3 bg-main-color",on:{click:function(t){e.userAgreementOpen=!1}}},[s("v-icon",{staticClass:"mr-2"},[e._v("mdi-chevron-up")]),e._v("用戶協議 ")],1):e._e(),e.userAgreementOpen?s("div",{staticClass:"mx-3 user-agreement"},[s("UserAgreement")],1):e._e(),s("v-checkbox",{staticClass:"mx-3 user-agreement-check",attrs:{label:"我同意用戶協議"},model:{value:e.userAgreementCheck,callback:function(t){e.userAgreementCheck=t},expression:"userAgreementCheck"}})],1)]),s("hr"),s("div",{staticClass:"row"},[s("div",{staticClass:"col-xs-12 col-md-12 text-center"},[s("v-btn",{staticClass:"mx-0 my-4 p-4 h5 bg-button-color w-50",attrs:{disabled:!e.userAgreementCheck},on:{click:function(t){return e.doSubmit()}}},[s("v-icon",{staticClass:"mr-2"},[e._v("mdi-account-plus")]),e._v("註冊 ")],1)],1)])]),s("v-dialog",{attrs:{persistent:""},model:{value:e.loadingView,callback:function(t){e.loadingView=t},expression:"loadingView"}},[s("p",{staticStyle:{"letter-spacing":"5px","text-align":"center !important",color:"#ffffff","background-color":"#000000dd",padding:"15px",margin:"auto"}},[s("img",{staticStyle:{width:"2rem","margin-bottom":"10px"},attrs:{src:e.loading}}),s("br"),e._v(" "+e._s(e.loadingViewText)+" ")])]),s("v-snackbar",{attrs:{top:!0,color:e.color},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(" "+e._s(e.errorMessages)+" "),s("v-btn",{attrs:{dark:"",flat:""},on:{click:function(t){e.snackbar=!1}}},[e._v(" Close ")])],1)],1)},i=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"col-xs-12 col-md-12"},[s("p",{staticClass:"mx-3 h4",staticStyle:{"word-wrap":"break-word","white-space":"pre-wrap","text-align":"justify"}},[e._v("您上傳的頭像會顯示於公開頁面。"),s("br"),s("strong",{staticStyle:{color:"red"}},[e._v("頭像檔案限4MB以內，請務必確認您上傳的頭像為您本人，如有任何偽造、仿冒之事宜需負擔相關法律責任")])])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("p",{staticClass:"mx-3 h4",staticStyle:{"word-wrap":"break-word","white-space":"pre-wrap","text-align":"justify"}},[e._v("要將您的學習報告、成績單等資訊一併寄給誰呢？"),s("br"),s("strong",{staticStyle:{color:"red"}},[e._v("除了您會收到學習報告以外，我們也會主動向您填入的Email信箱寄送報告。")]),s("br"),s("strong",{staticStyle:{color:"red"}},[e._v("除了學習紀錄、歷程以外，我們也會提供線上測驗結果及落點分析報告。")])])}],r=(s("8e6e"),s("456d"),s("96cf"),s("3b8d")),o=(s("7f7f"),s("ac6a"),s("28a5"),s("bd86")),n=s("1157"),c=s.n(n),l=s("4328"),d=s.n(l),u=s("0b26"),h=s.n(u),f=s("f8b2"),g=s.n(f),p=s("2f62"),v=s("ab54");function m(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function _(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?m(Object(s),!0).forEach((function(t){Object(o["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):m(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var b={name:"StudentRegister",components:{UserAgreement:v["default"]},metaInfo:function(){return{title:this.appName+"｜學生註冊"}},data:function(){return{loadingView:!1,loadingViewText:"處理中",loading:g.a,snackbar:!1,color:"red",errorMessages:"",regEmail:"",regEmailMessages:"請輸入您的Email",regPwd:"",regPwdMessages:"請輸入至少8位數密碼",regPwdConfirm:"",regPwdConfirmMessages:"請再次輸入密碼",regMobile:"",regMobileMessages:"請輸入您的手機號碼，格式為09XX-XXXXXX。僅作為緊急情況與您聯繫使用。",regName:"",regNameMessages:"請輸入您的姓名",regNickname:"",regNicknameMessages:"請輸入您的暱稱",regRole:"",regRoleMessages:"請選擇您的身分",regGender:"",regGenderMessages:"請選擇您的生理性別",regBirth:"",regBirthMessages:"請輸入您的生日，格式為1900-01-01 (請務必確認無誤，日後無法修改)",regHeadshot:[{file:"",name:"",url:""}],regNotifiemail:"",regNotifiemailMessages:"請用分號『;』隔開Email，如：you@cool.com;we@awesome.com",userAgreementOpen:!1,userAgreementCheck:!1,submit:!1}},computed:_({},Object(p["c"])(["appName","isProduction"]),{userInfo:function(){return JSON.parse(localStorage.getItem("user"))}}),watch:{regEmail:function(e){var t=/^\w+((-\w+)|(\.\w+))*@[A-Za-z0-9]+((\.|-|_)[A-Za-z0-9]+)*\.[A-Za-z]+$/;""===this.regEmail?this.regEmailMessages="✖ Email不得為空":t.test(this.regEmail)?this.regEmailMessages="✔":this.regEmailMessages="✖ Email輸入格式錯誤"},regPwd:function(e){this.regPwd.length<8?this.regPwdMessages="✖ 密碼請勿少於8個字":this.regPwdMessages="✔"},regPwdConfirm:function(e){""===this.regPwdConfirm?this.regPwdConfirmMessages="✖ 請再次輸入密碼":this.regPwdConfirm!==this.regPwd?this.regPwdConfirmMessages="✖ 密碼輸入不一致":this.regPwdConfirm.length<8?this.regPwdMessages="✖ 密碼請勿少於8個字":this.regPwdConfirmMessages="✔"},regMobile:function(e){var t=/^09[0-9]{2}-[0-9]{6}$/;""===this.regMobile?this.regMobileMessages="✖ 手機號碼不得為空，格式為09XX-XXXXXX。僅作為緊急情況與您聯繫使用。":4===this.regMobile.length?this.regMobile=this.regMobile+"-":t.test(this.regMobile)?this.regMobileMessages="✔":this.regMobileMessages="✖ 手機號碼輸入格式錯誤，格式為09XX-XXXXXX。僅作為緊急情況與您聯繫使用。"},regName:function(e){""===this.regName?this.regNameMessages="✖ 姓名不得為空":this.regNameMessages="✔"},regNickname:function(e){""!==this.regNickname?this.regNicknameMessages="✔":this.regNicknameMessages="請輸入您的暱稱"},regRole:function(e){""===this.regRole?this.regRoleMessages="✖ 尚未選擇您的身分":this.regRoleMessages="✔"},regGender:function(e){""===this.regGender?this.regGenderMessages="✖ 尚未選擇您的生理性別":this.regGenderMessages="✔"},regBirth:function(e){var t=/^[0-9]{4}-[0-9]{2}-[0-9]{2}$/;""===this.regBirth?this.regBirthMessages="✖ 生日不得為空，格式為1900-01-01 (請務必確認無誤，日後無法修改)":4===this.regBirth.length||7===this.regBirth.length?this.regBirth=this.regBirth+"-":t.test(this.regBirth)?this.regBirthMessages="✔":this.regBirthMessages="✖ 生日輸入格式錯誤，格式為1900-01-01 (請務必確認無誤，日後無法修改)"},regNotifiemail:function(e){""!==this.regNotifiemail&&this.regNotifiemailArray()?this.regNotifiemailMessages="✖ Email輸入格式錯誤，格式為：you@cool.com;we@awesome.com":""!==this.regNotifiemail?this.regNotifiemailMessages="✔":this.regNotifiemailMessages="請用分號『;』隔開Email，如：you@cool.com;we@awesome.com"}},mounted:function(){var e=this,t=!0;if(!localStorage.getItem("token")&&t){var s={userId:this.userInfo?this.userInfo.user_id:-1,url:this.$route.path};this.$http.post("/api/account/authCheck/",d.a.stringify(s)).then((function(e){return e.data})).then((function(t){"success"===t.status?t.data.authority:localStorage.getItem("user")&&e.$store.dispatch("logout").then((function(){e.$router.go(0)}))})).catch((function(t){console.log(t),localStorage.getItem("user")&&e.$store.dispatch("logout").then((function(){e.$router.go(0)}))}))}else localStorage.getItem("token")&&this.$router.push("/")},methods:{regNotifiemailArray:function(){var e=!1,t=/^\w+((-\w+)|(\.\w+))*@[A-Za-z0-9]+((\.|-|_)[A-Za-z0-9]+)*\.[A-Za-z]+$/,s=this.regNotifiemail.split(";");return s.forEach((function(s){t.test(s)||(e=!0)})),e},doGtagsEvent:function(e,t,s){this.isProduction&&this.$gtag.event(e,{description:t,remarks:s,page_path:this.$route.fullPath,hostname:this.root,user_id:this.userInfo?this.userInfo.user_id:-1})},setHeadshot:function(e){var t=e.target.files||e.dataTransfer.files;e.srcElement.files.item(0).size>4194304?(c()("#headshot-file").val(""),alert("上傳照片不得超過4MB")):(this.regHeadshot[0].url=window.URL.createObjectURL(e.srcElement.files.item(0)),this.regHeadshot[0].file=t[0],this.regHeadshot[0].name=e.srcElement.files.item(0).name)},cancelHeadshotIMG:function(){this.regHeadshot[0].file=this.regHeadshot[0].name=this.regHeadshot[0].url="",c()("#headshot-file").val("")},dosubmitVerifyBefore:function(){this.submitVerify=!0},doSubmitVerify:function(){-1===this.regEmailMessages.indexOf("✖")&&""!==this.regEmail&&-1===this.regPwdMessages.indexOf("✖")&&""!==this.regPwd&&-1===this.regPwdConfirmMessages.indexOf("✖")&&""!==this.regPwdConfirm&&-1===this.regMobileMessages.indexOf("✖")&&""!==this.regMobile&&-1===this.regNameMessages.indexOf("✖")&&""!==this.regName&&-1===this.regNicknameMessages.indexOf("✖")&&-1===this.regRoleMessages.indexOf("✖")&&""!==this.regRole&&-1===this.regGenderMessages.indexOf("✖")&&""!==this.regGender&&-1===this.regBirthMessages.indexOf("✖")&&""!==this.regBirth&&-1===this.regNotifiemailMessages.indexOf("✖")?this.submit=!0:(this.submit=!1,scroll(0,0),this.snackbar=!0,this.color="red",this.errorMessages="請修正錯誤欄位後再送出")},dosubmitVerifyAfter:function(){var e=this;if(this.submit){this.loadingViewText="會員資料註冊中",this.loadingView=!0;var t=new FormData;t.append("regEmail",this.regEmail),t.append("regPwd",h()(this.regPwd).toUpperCase()),t.append("regMobile",this.regMobile),t.append("regName",this.regName),t.append("regNickname",this.regNickname||this.regName),t.append("regRole",this.regRole),t.append("regGender",this.regGender),t.append("regBirth",this.regBirth),t.append("upload_snapshot",this.regHeadshot[0].file),t.append("regNotifiemail",this.regNotifiemail),this.$http.post("api/account/signupStudent/",t).then((function(e){return e.data})).then((function(t){e.loadingView=!1,"success"===t.status?(e.doGtagsEvent("StudentRegister-按鈕：學生註冊","按下[註冊]按鈕",e.regEmail),alert("您已經註冊成功了，請重新登入來使用吧!"),setTimeout((function(){e.$router.push("/")}),500)):"failed"===t.status?(e.snackbar=!0,e.color="red",e.errorMessages=t.errMsg):(e.snackbar=!0,e.color="orange",e.errorMessages="發生錯誤，請稍後再試")})).catch((function(t){e.loadingView=!1,e.snackbar=!0,e.color="orange",e.errorMessages="發生錯誤，請稍後再試",console.log(t)}))}},doSubmit:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.dosubmitVerifyBefore();case 2:return e.next=4,this.doSubmitVerify();case 4:return e.next=6,this.dosubmitVerifyAfter();case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},y=b,w=s("2877"),k=Object(w["a"])(y,a,i,!1,null,null,null);t["default"]=k.exports},"8fbe":function(e,t,s){e.exports=s.p+"img/beTeacher_hover.d7621fb7.jpg"},"941c":function(e,t){e.exports={NODE_ENV:"production",api_url:"https://www.quikok.com",ws_url:"ws://www.quikok.com",port:80}},9515:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"fluid fill-height register",attrs:{id:"studentregister"}},[s("div",{staticClass:"container"},[s("p",{staticClass:"mb-5 h3 font-weight-bold",staticStyle:{"word-wrap":"break-word","white-space":"pre-wrap","text-align":"center","font-weight":"500!important"}},[e._v("設計屬於你的數位履歷")]),e._m(0),s("hr"),s("p",{staticClass:"h3"},[e._v("帳號與密碼設定")]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-xs-12 col-md-12"},[s("v-text-field",{staticClass:"required account",class:{"required-fail":""===e.regEmail,fail:-1!==e.regEmailMessages.indexOf("✖"),pass:-1!==e.regEmailMessages.indexOf("✔")},attrs:{hint:e.regEmailMessages,label:"Email",type:"email","persistent-hint":""},model:{value:e.regEmail,callback:function(t){e.regEmail=t},expression:"regEmail"}})],1),s("div",{staticClass:"col-xs-12 col-md-6"},[s("v-text-field",{staticClass:"required",class:{"required-fail":""===e.regPwd,fail:-1!==e.regPwdMessages.indexOf("✖"),pass:-1!==e.regPwdMessages.indexOf("✔")},attrs:{hint:e.regPwdMessages,label:"密碼",type:"password","persistent-hint":""},model:{value:e.regPwd,callback:function(t){e.regPwd=t},expression:"regPwd"}})],1),s("div",{staticClass:"col-xs-12 col-md-6"},[s("v-text-field",{staticClass:"required",class:{"required-fail":""===e.regPwdConfirm,fail:-1!==e.regPwdConfirmMessages.indexOf("✖"),pass:-1!==e.regPwdConfirmMessages.indexOf("✔")},attrs:{hint:e.regPwdConfirmMessages,label:"密碼確認",type:"password","persistent-hint":""},model:{value:e.regPwdConfirm,callback:function(t){e.regPwdConfirm=t},expression:"regPwdConfirm"}})],1),s("div",{staticClass:"col-xs-12 col-md-6"},[s("v-text-field",{staticClass:"required",class:{"required-fail":""===e.regMobile,fail:-1!==e.regMobileMessages.indexOf("✖"),pass:-1!==e.regMobileMessages.indexOf("✔")},attrs:{hint:e.regMobileMessages,label:"手機號碼",type:"text","persistent-hint":""},model:{value:e.regMobile,callback:function(t){e.regMobile=t},expression:"regMobile"}})],1)]),s("hr"),s("p",{staticClass:"h3"},[e._v("個人資訊")]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-xs-12 col-md-6"},[s("v-text-field",{staticClass:"required",class:{"required-fail":""===e.regName,fail:-1!==e.regNameMessages.indexOf("✖"),pass:-1!==e.regNameMessages.indexOf("✔")},attrs:{hint:e.regNameMessages,label:"姓名",type:"text","persistent-hint":""},model:{value:e.regName,callback:function(t){e.regName=t},expression:"regName"}})],1),s("div",{staticClass:"col-xs-12 col-md-6"},[s("v-text-field",{class:{fail:-1!==e.regNicknameMessages.indexOf("✖"),pass:-1!==e.regNicknameMessages.indexOf("✔")},attrs:{hint:e.regNicknameMessages,label:"暱稱",type:"text","persistent-hint":""},model:{value:e.regNickname,callback:function(t){e.regNickname=t},expression:"regNickname"}})],1),s("div",{staticClass:"col-xs-12 col-md-6"},[s("v-select",{staticClass:"required",class:{"required-fail":""===e.regGender,fail:-1!==e.regGenderMessages.indexOf("✖"),pass:-1!==e.regGenderMessages.indexOf("✔")},attrs:{hint:e.regGenderMessages,items:[{text:"生理男",value:"1"},{text:"生理女",value:"0"}],label:"生理性別","persistent-hint":""},model:{value:e.regGender,callback:function(t){e.regGender=t},expression:"regGender"}})],1),s("div",{staticClass:"col-xs-12 col-md-6"},[s("v-text-field",{staticClass:"required",class:{"required-fail":""===e.regBirth,fail:-1!==e.regBirthMessages.indexOf("✖"),pass:-1!==e.regBirthMessages.indexOf("✔")},attrs:{max:e.$moment(new Date).format("YYYY-MM-DD"),hint:e.regBirthMessages,label:"生日",type:"date","persistent-hint":""},model:{value:e.regBirth,callback:function(t){e.regBirth=t},expression:"regBirth"}})],1),s("div",{staticClass:"col-xs-12 col-md-6"},[s("v-select",{staticClass:"required",class:{"required-fail":""===e.regYear,fail:-1!==e.regYearMessages.indexOf("✖"),pass:-1!==e.regYearMessages.indexOf("✔")},attrs:{hint:e.regYearMessages,items:[{text:"1年以內",value:"1年以內"},{text:"1-3年",value:"1-3年"},{text:"3-5年",value:"3-5年"},{text:"5-10年",value:"5-10年"},{text:"10年以上",value:"10年以上"}],label:"教學年資","persistent-hint":""},model:{value:e.regYear,callback:function(t){e.regYear=t},expression:"regYear"}})],1),s("div",{staticClass:"col-xs-12 col-md-6"},[s("v-text-field",{staticClass:"required",class:{"required-fail":""===e.regEdu1,fail:-1!==e.regEdu1Messages.indexOf("✖"),pass:-1!==e.regEdu1Messages.indexOf("✔")},attrs:{hint:e.regEdu1Messages,label:"最高學歷/科系",type:"text","persistent-hint":""},model:{value:e.regEdu1,callback:function(t){e.regEdu1=t},expression:"regEdu1"}})],1)]),s("hr"),s("p",{staticClass:"h3"},[e.areaIntro?e._e():s("v-icon",{staticClass:"mb-1",on:{click:function(t){e.areaIntro=!0}}},[e._v("mdi-chevron-up-circle")]),e.areaIntro?s("v-icon",{staticClass:"mb-1",on:{click:function(t){e.areaIntro=!1}}},[e._v("mdi-chevron-down-circle")]):e._e(),e._v(" 自我介紹 "),s("span",{staticClass:"h4 mr-1 text-muted"},[e._v("(選填)")])],1),e.areaIntro?s("div",{staticClass:"row"},[s("div",{staticClass:"col-xs-12 col-md-12"},[e._m(1),s("v-textarea",{class:{fail:-1!==e.regIntroMessages.indexOf("✖"),pass:-1!==e.regIntroMessages.indexOf("✔")},attrs:{hint:e.regIntroMessages,label:"自我介紹",rows:"5",type:"text","persistent-hint":""},model:{value:e.regIntro,callback:function(t){e.regIntro=t},expression:"regIntro"}})],1)]):e._e(),s("hr"),s("p",{staticClass:"h3"},[e.areaTag?e._e():s("v-icon",{staticClass:"mb-1",on:{click:function(t){e.areaTag=!0}}},[e._v("mdi-chevron-up-circle")]),e.areaTag?s("v-icon",{staticClass:"mb-1",on:{click:function(t){e.areaTag=!1}}},[e._v("mdi-chevron-down-circle")]):e._e(),e._v(" 授課科目與對象 "),s("span",{staticClass:"h4 mr-1 text-muted"},[e._v("(選填)")])],1),e.areaTag?s("div",{staticClass:"row"},[s("div",{staticClass:"col-xs-12 col-md-12"},[e._m(2),s("v-textarea",{class:{fail:-1!==e.regTagMessages.indexOf("✖"),pass:-1!==e.regTagMessages.indexOf("✔")},attrs:{hint:e.regTagMessages,label:"授課科目與對象",rows:"5",type:"text","persistent-hint":""},model:{value:e.regTag,callback:function(t){e.regTag=t},expression:"regTag"}})],1)]):e._e(),s("hr"),s("p",{staticClass:"h3"},[e.areaProve?e._e():s("v-icon",{staticClass:"mb-1",on:{click:function(t){e.areaProve=!0}}},[e._v("mdi-chevron-up-circle")]),e.areaProve?s("v-icon",{staticClass:"mb-1",on:{click:function(t){e.areaProve=!1}}},[e._v("mdi-chevron-down-circle")]):e._e(),e._v(" 學經歷與證明 "),s("span",{staticClass:"h4 mr-1 text-muted"},[e._v("(選填)")])],1),e.areaProve?s("div",{staticClass:"row"},[s("div",{staticClass:"col-xs-12 col-md-12"},[e._m(3),s("v-text-field",{class:{fail:-1!==e.regEdu2Messages.indexOf("✖"),pass:-1!==e.regEdu2Messages.indexOf("✔")},attrs:{hint:e.regEdu2Messages,label:"次高學歷/科系",type:"text","persistent-hint":""},model:{value:e.regEdu2,callback:function(t){e.regEdu2=t},expression:"regEdu2"}}),s("v-text-field",{class:{fail:-1!==e.regEdu3Messages.indexOf("✖"),pass:-1!==e.regEdu3Messages.indexOf("✔")},attrs:{hint:e.regEdu3Messages,label:"第三學歷/科系",type:"text","persistent-hint":""},model:{value:e.regEdu3,callback:function(t){e.regEdu3=t},expression:"regEdu3"}}),s("v-text-field",{class:{fail:-1!==e.regJobMessages.indexOf("✖"),pass:-1!==e.regJobMessages.indexOf("✔")},attrs:{hint:e.regJobMessages,label:"現任單位/職位",type:"text","persistent-hint":""},model:{value:e.regJob,callback:function(t){e.regJob=t},expression:"regJob"}}),s("v-text-field",{class:{fail:-1!==e.regExpMessages.indexOf("✖"),pass:-1!==e.regExpMessages.indexOf("✔")},attrs:{hint:e.regExpMessages,label:"其他學經歷或特殊專長",type:"text","persistent-hint":""},model:{value:e.regExp,callback:function(t){e.regExp=t},expression:"regExp"}})],1)]):e._e(),e.areaProve?s("hr"):e._e(),e.areaProve?s("div",{staticClass:"row flex-center"},[e._m(4),e._l(e.uploadIMG,(function(t,a){return s("div",{key:"upload"+a,staticClass:"col-xs-12 col-md-6 col-xl-4 upload-img"},[s("div",{staticClass:"upload-file"},[s("input",{attrs:{id:"file"+a,type:"file","data-target":"file-uploader","persistent-hint":""},on:{change:function(t){return e.setImg(t,a)}}})])])})),s("div",{staticClass:"col-xs-12 col-md-6 col-xl-4 upload-plus"},[s("div",{staticClass:"cursor",on:{click:function(t){return e.addUploadItem()}}},[s("v-icon",{staticClass:"mr-2"},[e._v("mdi-plus")]),e._v("新增上傳項目 ")],1)])],2):e._e(),s("hr"),s("p",{staticClass:"h3"},[e.areaHeadshot?e._e():s("v-icon",{staticClass:"mb-1",on:{click:function(t){e.areaHeadshot=!0}}},[e._v("mdi-chevron-up-circle")]),e.areaHeadshot?s("v-icon",{staticClass:"mb-1",on:{click:function(t){e.areaHeadshot=!1}}},[e._v("mdi-chevron-down-circle")]):e._e(),e._v(" 上傳頭像 "),s("span",{staticClass:"h4 mr-1 text-muted"},[e._v("(選填)")])],1),e.areaHeadshot?s("div",{staticClass:"row flex-center"},[e._m(5),s("div",{staticClass:"col-xs-12 col-md-6 col-xl-4 upload-headshot"},[e.regHeadshot[0].url?e._e():s("div",{staticClass:"upload-headshot-add"},[s("v-icon",[e._v("mdi-account")])],1),e.regHeadshot[0].url?s("div",{staticClass:"upload-headshot-view",style:"background-image: url('"+e.regHeadshot[0].url+"')"},[s("v-icon",{staticClass:"cursor",on:{click:function(t){return e.cancelHeadshotIMG()}}},[e._v("mdi-close")])],1):e._e(),s("div",{staticClass:"upload-headshot-file"},[s("input",{attrs:{id:"headshot-file",type:"file","data-target":"file-uploader",accept:"image/*","persistent-hint":""},on:{change:function(t){return e.setHeadshot(t)}}})])])]):e._e(),s("hr"),s("p",{staticClass:"h3"},[e.areaTime?e._e():s("v-icon",{staticClass:"mb-1",on:{click:function(t){e.areaTime=!0}}},[e._v("mdi-chevron-up-circle")]),e.areaTime?s("v-icon",{staticClass:"mb-1",on:{click:function(t){e.areaTime=!1}}},[e._v("mdi-chevron-down-circle")]):e._e(),e._v(" 常態開課時段 "),s("span",{staticClass:"h4 mr-1 text-muted"},[e._v("(選填)")])],1),e.areaTime?s("div",{staticClass:"row flex-center"},[e._m(6),s("div",{staticClass:"col-xs-12 col-md-8 col-lg-6"},[s("TimeSelector",{attrs:{"synchronize-time":!0},on:{"res-select-time":e.resSelectTime}})],1)]):e._e(),s("hr"),s("p",{staticClass:"h3"},[e._v("我們的承諾")]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-xs-12 col-md-12"},[s("p",{staticClass:"mx-3 mb-4 h4",staticStyle:{"word-wrap":"break-word","white-space":"pre-wrap"}},[e._v("我們不會將您的申請資料外洩或是轉交其他業者，您的資訊將與我們的個資一起妥善保管在工業等級的伺服器中。")]),e.userAgreementOpen?e._e():s("v-btn",{staticClass:"m-3 bg-main-color",on:{click:function(t){e.userAgreementOpen=!0}}},[s("v-icon",{staticClass:"mr-2"},[e._v("mdi-chevron-down")]),e._v("用戶協議 ")],1),e.userAgreementOpen?s("v-btn",{staticClass:"m-3 bg-main-color",on:{click:function(t){e.userAgreementOpen=!1}}},[s("v-icon",{staticClass:"mr-2"},[e._v("mdi-chevron-up")]),e._v("用戶協議 ")],1):e._e(),e.userAgreementOpen?s("div",{staticClass:"mx-3 user-agreement"},[s("UserAgreement")],1):e._e(),s("v-checkbox",{staticClass:"mx-3 user-agreement-check",attrs:{label:"我同意用戶協議"},model:{value:e.userAgreementCheck,callback:function(t){e.userAgreementCheck=t},expression:"userAgreementCheck"}})],1)]),s("hr"),s("div",{staticClass:"row"},[s("div",{staticClass:"col-xs-12 col-md-12 text-center"},[s("v-btn",{staticClass:"mx-0 my-4 p-4 h5 bg-button-color w-50",attrs:{disabled:!e.userAgreementCheck},on:{click:function(t){return e.doSubmit()}}},[s("v-icon",{staticClass:"mr-2"},[e._v("mdi-upload")]),e._v("送出申請 ")],1)],1)])]),s("v-dialog",{attrs:{persistent:""},model:{value:e.loadingView,callback:function(t){e.loadingView=t},expression:"loadingView"}},[s("p",{staticStyle:{"letter-spacing":"5px","text-align":"center !important",color:"#ffffff","background-color":"#000000dd",padding:"15px",margin:"auto"}},[s("img",{staticStyle:{width:"2rem","margin-bottom":"10px"},attrs:{src:e.loading}}),s("br"),e._v(" "+e._s(e.loadingViewText)+" ")])]),s("v-snackbar",{attrs:{top:!0,color:e.color},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(" "+e._s(e.errorMessages)+" "),s("v-btn",{attrs:{dark:"",flat:""},on:{click:function(t){e.snackbar=!1}}},[e._v(" Close ")])],1)],1)},i=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"mx-3 user-agreement"},[s("h4",{staticClass:"py-2 text-center"},[e._v("歡迎加入QUIKOK"),s("br"),e._v("體驗遠端教學的美好")]),s("h4",{staticClass:"py-2 text-center"},[e._v("準備好與更多人分享你的才能嗎?"),s("br"),e._v("提供更多資訊製作精美的數位履歷吧!")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("p",{staticClass:"mx-3 h4",staticStyle:{"word-wrap":"break-word","white-space":"pre-wrap","text-align":"justify"}},[e._v("請簡介一下您的專長或教學風格吧！這將會公開顯示提供學生、家長瀏覽。"),s("br")])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("p",{staticClass:"mx-3 h4",staticStyle:{"word-wrap":"break-word","white-space":"pre-wrap","text-align":"justify"}},[e._v("請填寫授課科目與對象，這將會公開顯示提供學生、家長搜尋。"),s("br"),e._v("輸入項目請用分號『;』隔開，如有特定學齡也請一併標註！範例：高中英文；多益；國中數學；高等微積分；成人商業英語。 ")])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("p",{staticClass:"mx-3 h4",staticStyle:{"word-wrap":"break-word","white-space":"pre-wrap","text-align":"justify"}},[e._v("您填寫的學經歷會顯示於公開頁面。"),s("br"),e._v("如有上傳相關證明（例如：學位證書），本平台經驗證後會給您核可勳章，能夠大大增加家長對您的信賴！"),s("br"),e._v("請放心！您上傳的相關證明不會提供公開搜尋，僅供認證、發放核可勳章用"),s("br"),s("strong",{staticStyle:{color:"red"}},[e._v("請務必確認您填寫或上傳的資料為您本人且內容正確無誤，如有任何偽造之事宜需負擔相關法律責任")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"col-xs-12 col-md-12"},[s("p",{staticClass:"mx-3 h4",staticStyle:{"word-wrap":"break-word","white-space":"pre-wrap","text-align":"justify"}},[e._v("如您有學經歷或特殊證照相關證明圖檔可從此處上傳。"),s("br"),s("strong",{staticStyle:{color:"red"}},[e._v("每個檔案限10MB以內，並請在檔名清楚標註證書類型")])])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"col-xs-12 col-md-12"},[s("p",{staticClass:"mx-3 h4",staticStyle:{"word-wrap":"break-word","white-space":"pre-wrap","text-align":"justify"}},[e._v("上傳本人照片能增加家長/學生的信賴、提升媒合機會唷!"),s("br")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"col-xs-12 col-md-12"},[s("p",{staticClass:"mx-3 mb-4 h4",staticStyle:{"word-wrap":"break-word","white-space":"pre-wrap"}},[e._v("請選擇您通常可以授課的時段，此時段將是您未來上架課程時預設的有空時段。"),s("br"),e._v("請別擔心，這些皆可依據您上架課程實際需求及透過聊天室與學生預約做調整。")])])}],r=(s("8e6e"),s("456d"),s("96cf"),s("3b8d")),o=(s("ac6a"),s("7f7f"),s("bd86")),n=s("1157"),c=s.n(n),l=s("4328"),d=s.n(l),u=s("0b26"),h=s.n(u),f=s("f8b2"),g=s.n(f),p=s("2f62"),v=s("77fc"),m=s("ab54");function _(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function b(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?_(Object(s),!0).forEach((function(t){Object(o["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):_(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var y={name:"TeacherRegister",components:{TimeSelector:v["default"],UserAgreement:m["default"]},metaInfo:function(){return{title:this.appName+"｜老師註冊"}},data:function(){return{loadingView:!1,loadingViewText:"處理中",loading:g.a,snackbar:!1,color:"red",errorMessages:"",timeID:"",random:"",areaIntro:!1,areaTag:!1,areaProve:!1,areaHeadshot:!1,areaTime:!1,regEmail:"",regEmailMessages:"請輸入您的Email",regPwd:"",regPwdMessages:"請輸入至少8位數密碼",regPwdConfirm:"",regPwdConfirmMessages:"請再次輸入密碼",regMobile:"",regMobileMessages:"請輸入您的手機號碼，格式為09XX-XXXXXX。僅作為緊急情況與您聯繫使用。",regName:"",regNameMessages:"請輸入您的真實姓名(作為未來匯款作業使用)",regNickname:"",regNicknameMessages:"請輸入您的暱稱",regYear:"",regYearMessages:"請選擇您的教學年資",regGender:"",regGenderMessages:"請選擇您的生理性別",regBirth:"",regBirthMessages:"請輸入您的生日，格式為1900-01-01 (請務必確認無誤，日後無法修改)",regIntro:"",regIntroMessages:"請輸入自我介紹",regTag:"",regTagMessages:"0/500字",regEdu1:"",regEdu1Messages:"請輸入最高學歷/科系，如正在就讀中請加寫年級。",regEdu2:"",regEdu2Messages:"請輸入次高學歷/科系，如正在就讀中請加寫年級。",regEdu3:"",regEdu3Messages:"請輸入第三學歷/科系，如正在就讀中請加寫年級。",regJob:"",regJobMessages:"請輸入現任單位/職稱。",regExp:"",regExpMessages:"請輸入其他學經歷或特殊專長。",regHeadshot:[{file:"",name:"",url:""}],regSelectTime:[],uploadIMG:[{file:"",name:"",url:""},{file:"",name:"",url:""}],userAgreementOpen:!1,userAgreementCheck:!1,submitMessages:"請輸入",submit:!1}},computed:b({},Object(p["c"])(["appName","isProduction"]),{userInfo:function(){return JSON.parse(localStorage.getItem("user"))}}),watch:{resSelectTime:function(e){this.regSelectTime=e},regEmail:function(e){var t=/^\w+((-\w+)|(\.\w+))*@[A-Za-z0-9]+((\.|-|_)[A-Za-z0-9]+)*\.[A-Za-z]+$/;""===this.regEmail?this.regEmailMessages="✖ Email不得為空":t.test(this.regEmail)?this.regEmailMessages="✔":this.regEmailMessages="✖ Email輸入格式錯誤"},regPwd:function(e){this.regPwd.length<8?this.regPwdMessages="✖ 密碼請勿少於8個字":this.regPwdMessages="✔"},regPwdConfirm:function(e){""===this.regPwdConfirm?this.regPwdConfirmMessages="✖ 請再次輸入密碼":this.regPwdConfirm!==this.regPwd?this.regPwdConfirmMessages="✖ 密碼輸入不一致":this.regPwdConfirm.length<8?this.regPwdMessages="✖ 密碼請勿少於8個字":this.regPwdConfirmMessages="✔"},regMobile:function(e){var t=/^09[0-9]{2}-[0-9]{6}$/;""===this.regMobile?this.regMobileMessages="✖ 手機號碼不得為空，格式為09XX-XXXXXX。僅作為緊急情況與您聯繫使用。":4===this.regMobile.length?this.regMobile=this.regMobile+"-":t.test(this.regMobile)?this.regMobileMessages="✔":this.regMobileMessages="✖ 手機號碼輸入格式錯誤，格式為09XX-XXXXXX。僅作為緊急情況與您聯繫使用。"},regName:function(e){""===this.regName?this.regNameMessages="✖ 姓名不得為空":this.regNameMessages="✔"},regNickname:function(e){""!==this.regNickname?this.regNicknameMessages="✔":this.regNicknameMessages="請輸入您的暱稱"},regYear:function(e){""===this.regYear?this.regYearMessages="✖ 請選擇您的教學年資":this.regYearMessages="✔"},regGender:function(e){""===this.regGender?this.regGenderMessages="✖ 尚未選擇您的生理性別":this.regGenderMessages="✔"},regBirth:function(e){var t=/^[0-9]{4}-[0-9]{2}-[0-9]{2}$/;""===this.regBirth?this.regBirthMessages="✖ 生日不得為空，格式為1900-01-01 (請務必確認無誤，日後無法修改)":4===this.regBirth.length||7===this.regBirth.length?this.regBirth=this.regBirth+"-":t.test(this.regBirth)?this.regBirthMessages="✔":this.regBirthMessages="✖ 生日輸入格式錯誤，格式為1900-01-01 (請務必確認無誤，日後無法修改)"},regIntro:function(e){""===this.regIntro?this.regIntroMessages="請輸入自我介紹":this.regIntroMessages="✔"},regTag:function(e){""===this.regTag?this.regTagMessages=e.length+"/500字":this.regTag.length>500?this.regTagMessages="✖ "+e.length+"/500字":this.regTagMessages="✔ "+e.length+"/500字"},regEdu1:function(e){""!==this.regEdu1?this.regEdu1Messages="✔":this.regEdu1Messages="✖ 請輸入最高學歷/科系，如正在就讀中請加寫年級。"},regEdu2:function(e){""!==this.regEdu2?this.regEdu2Messages="✔":this.regEdu2Messages="請輸入次高學歷/科系，如正在就讀中請加寫年級。"},regEdu3:function(e){""!==this.regEdu3?this.regEdu3Messages="✔":this.regEdu3Messages="請輸入第三學歷/科系，如正在就讀中請加寫年級。"},regJob:function(e){""!==this.regJob?this.regJobMessages="✔":this.regJobMessages="請輸入現任單位/職稱。"},regExp:function(e){""!==this.regExp?this.regExpMessages="✔":this.regExpMessages="請輸入其他學經歷或特殊專長。"}},mounted:function(){var e=this,t=!0;if(!localStorage.getItem("token")&&t){var s={userId:this.userInfo?this.userInfo.user_id:-1,url:this.$route.path};this.$http.post("/api/account/authCheck/",d.a.stringify(s)).then((function(e){return e.data})).then((function(t){"success"===t.status?t.data.authority&&(e.$route.params.nickname&&(e.regNickname=e.$route.params.nickname),e.$route.params.male&&(e.regGender=e.$route.params.male),e.$route.params.time&&(e.timeID=e.$route.params.time),e.$route.params.random&&(e.random=e.$route.params.random)):localStorage.getItem("user")&&e.$store.dispatch("logout").then((function(){e.$router.go(0)}))})).catch((function(t){console.log(t),localStorage.getItem("user")&&e.$store.dispatch("logout").then((function(){e.$router.go(0)}))}))}else localStorage.getItem("token")&&this.$router.push("/")},methods:{doGtagsEvent:function(e,t,s){this.isProduction&&this.$gtag.event(e,{description:t,remarks:s,page_path:this.$route.fullPath,hostname:this.root,user_id:this.userInfo?this.userInfo.user_id:-1})},setHeadshot:function(e){var t=e.target.files||e.dataTransfer.files;e.srcElement.files.item(0).size>4194304?(c()("#headshot-file").val(""),alert("上傳照片不得超過4MB")):(this.regHeadshot[0].url=window.URL.createObjectURL(e.srcElement.files.item(0)),this.regHeadshot[0].file=t[0],this.regHeadshot[0].name=e.srcElement.files.item(0).name)},cancelHeadshotIMG:function(){this.regHeadshot[0].file=this.regHeadshot[0].name=this.regHeadshot[0].url="",c()("#headshot-file").val("")},setImg:function(e,t){var s=e.target.files||e.dataTransfer.files;e.srcElement.files.item(0).size>10485760?(c()("#file"+t).val(""),alert("每個上傳檔案不得超過10MB")):(this.uploadIMG[t].url=window.URL.createObjectURL(e.srcElement.files.item(0)),this.uploadIMG[t].file=s[0],this.uploadIMG[t].name=e.srcElement.files.item(0).name)},cancelUploadIMG:function(e){this.uploadIMG[e].file=this.uploadIMG[e].name=this.uploadIMG[e].url="",c()("#file"+e).val("")},addUploadItem:function(){this.uploadIMG.push({file:"",name:"",url:""})},dosubmitVerifyBefore:function(){this.submitVerify=!0},doSubmitVerify:function(){-1===this.regEmailMessages.indexOf("✖")&&""!==this.regEmail&&-1===this.regPwdMessages.indexOf("✖")&&""!==this.regPwd&&-1===this.regPwdConfirmMessages.indexOf("✖")&&""!==this.regPwdConfirm&&-1===this.regMobileMessages.indexOf("✖")&&""!==this.regMobile&&-1===this.regNameMessages.indexOf("✖")&&""!==this.regName&&-1===this.regNicknameMessages.indexOf("✖")&&-1===this.regGenderMessages.indexOf("✖")&&""!==this.regGender&&-1===this.regYearMessages.indexOf("✖")&&""!==this.regYear&&-1===this.regBirthMessages.indexOf("✖")&&""!==this.regBirth&&-1===this.regIntroMessages.indexOf("✖")&&-1===this.regTagMessages.indexOf("✖")&&-1===this.regEdu1Messages.indexOf("✖")&&""!==this.regEdu1&&-1===this.regEdu2Messages.indexOf("✖")&&-1===this.regEdu3Messages.indexOf("✖")&&-1===this.regJobMessages.indexOf("✖")&&-1===this.regExpMessages.indexOf("✖")?this.submit=!0:(this.submit=!1,scroll(0,0),this.snackbar=!0,this.color="red",this.errorMessages="請修正錯誤欄位後再送出")},dosubmitVerifyAfter:function(){var e=this;if(this.submit){this.loadingViewText="會員資料註冊中",this.loadingView=!0;var t=new FormData;t.append("dummy_teacher_id",""!==this.timeID?this.timeID+this.regNickname+this.random:""),t.append("regEmail",this.regEmail),t.append("regPwd",h()(this.regPwd).toUpperCase()),t.append("regMobile",this.regMobile),t.append("regName",this.regName),t.append("regNickname",this.regNickname||this.regName),t.append("regGender",this.regGender),t.append("tutor_experience",this.regYear),t.append("regBirth",this.regBirth),t.append("intro",this.regIntro),t.append("subject_type",this.regTag),t.append("education_1",this.regEdu1),t.append("education_2",this.regEdu2),t.append("education_3",this.regEdu3),t.append("company",this.regJob),t.append("special_exp",this.regExp),t.append("teacher_general_availabale_time",this.regSelectTime),t.append("upload_snapshot",this.regHeadshot[0].file),this.uploadIMG.forEach((function(e){t.append("upload_cer",e.file)})),this.$http.post("api/account/signupTeacher/",t).then((function(e){return e.data})).then((function(t){e.loadingView=!1,"success"===t.status?(e.doGtagsEvent("TeacherRegister-按鈕：老師註冊","按下[送出申請]按鈕",e.regEmail),alert("您已經註冊成功了，請重新登入來管理課程吧!"),setTimeout((function(){e.$router.push("/")}),500)):"failed"===t.status?(e.snackbar=!0,e.color="red",e.errorMessages=t.errMsg):(e.snackbar=!0,e.color="orange",e.errorMessages="發生錯誤，請稍後再試")})).catch((function(t){e.loadingView=!1,e.snackbar=!0,e.color="orange",e.errorMessages="發生錯誤，請稍後再試",console.log(t)}))}},doSubmit:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.dosubmitVerifyBefore();case 2:return e.next=4,this.doSubmitVerify();case 4:return e.next=6,this.dosubmitVerifyAfter();case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},w=y,k=s("2877"),x=Object(k["a"])(w,a,i,!1,null,null,null);t["default"]=x.exports},9814:function(e,t,s){e.exports=s.p+"img/boy_icon.8c3dd437.jpg"},"9c0c":function(e,t,s){},"9cbf":function(e,t,s){"use strict";var a=s("a630"),i=s.n(a);i.a},"9d5e":function(e,t){e.exports={NODE_ENV:"development",api_url:"http://127.0.0.1:8000",ws_url:"ws://127.0.0.1:8000",port:3030}},a3564:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-container",{attrs:{"fill-height":"",fluid:""}},[s("v-layout",{attrs:{"justify-center":""}},[s("v-flex",{attrs:{xs12:""}},[s("h2",{staticClass:"text-center"},[e._v(e._s(e.errormsg))]),s("h4",{staticClass:"text-center"},[e._v(e._s(e.errorcode))])])],1)],1)},i=[],r={name:"NoEnter",data:function(){return{errormsg:"",errorcode:""}},mounted:function(){(this.$route.params.msg||localStorage.getItem("errormsg"))&&(this.errormsg=localStorage.getItem("errormsg"),this.errorcode=this.$route.params.msg)},methods:{}},o=r,n=s("2877"),c=Object(n["a"])(o,a,i,!1,null,null,null);t["default"]=c.exports},a40b:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"fluid fill-height ready",attrs:{id:"lessonready"}},[e.pageView?s("div",{staticClass:"container"},[e._m(0),s("hr"),s("p",{staticClass:"h3"},[e._v("設定個人化的課程資訊卡，提昇吸睛度")]),s("div",{staticClass:"row p-0 m-0"},[s("div",{staticClass:"col-xs-12 col-md-6 p-0 m-0"},[s("div",{staticClass:"row"},[e._m(1),s("div",{staticClass:"col-xs-12 col-md-12 d-flex upload-img-area"},[s("div",{staticClass:"upload-img ready-img p-0 cursor",on:{click:function(t){e.readyCardBg=0}}},[s("div",{staticClass:"upload-img-view ready-img-view",class:{"border-main-color":0===e.readyCardBg,"ready-card-bg-check":0===e.readyCardBg},style:"background-image: url('"+e.root+e.cardBg1+"')"},[0===e.readyCardBg?s("v-icon",[e._v("mdi-check")]):e._e()],1)]),s("div",{staticClass:"upload-img ready-img p-0 cursor",on:{click:function(t){e.readyCardBg=1}}},[s("div",{staticClass:"upload-img-view ready-img-view",class:{"border-main-color":1===e.readyCardBg,"ready-card-bg-check":1===e.readyCardBg},style:"background-image: url('"+e.root+e.cardBg2+"')"},[1===e.readyCardBg?s("v-icon",[e._v("mdi-check")]):e._e()],1)]),s("div",{staticClass:"upload-img ready-img p-0 cursor",on:{click:function(t){e.readyCardBg=2}}},[s("div",{staticClass:"upload-img-view ready-img-view",class:{"border-main-color":2===e.readyCardBg,"ready-card-bg-check":2===e.readyCardBg},style:"background-image: url('"+e.root+e.cardBg3+"')"},[2===e.readyCardBg?s("v-icon",[e._v("mdi-check")]):e._e()],1)]),s("div",{staticClass:"upload-img ready-img p-0 cursor"},[s("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{id:"file_readyCardBg",type:"file","data-target":"file-uploader",accept:"image/*","persistent-hint":""},on:{change:function(t){return e.setReadyCardBg(t)}}}),s("div",{staticClass:"upload-img-view ready-img-view",class:{"border-main-color":99===e.readyCardBg,"ready-card-bg-check":99===e.readyCardBg,"ready-card-bg-upload":!e.readyCardBgUpload[0].url},style:"background-image: url('"+e.readyCardBgUpload[0].url+"')",on:{click:function(t){return e.selectReadyCardBg()}}},[e.readyCardBgUpload[0].url&&99===e.readyCardBg?s("v-icon",[e._v("mdi-check")]):e._e(),e.readyCardBgUpload[0].url?e._e():s("v-icon",{on:{click:function(t){return e.uploadReadyCardBg()}}},[e._v("mdi-upload")]),e.readyCardBgUpload[0].url&&99!==e.readyCardBg?s("v-icon",{staticClass:"cursor",on:{click:function(t){return e.cancelReadyCardBg()}}},[e._v("mdi-close")]):e._e()],1)])]),e._m(2),s("div",{staticClass:"col-xs-12 col-md-12"},[s("v-text-field",{class:{fail:-1!==e.readyTitleMessages.indexOf("✖"),pass:e.readyTitle.length>0&&-1!==e.readyTitleMessages.indexOf("✔")},attrs:{hint:e.readyTitleMessages,label:"封面大標題",type:"text","persistent-hint":""},model:{value:e.readyTitle,callback:function(t){e.readyTitle=t},expression:"readyTitle"}})],1),s("div",{staticClass:"col-xs-12 col-md-12"},[s("v-text-field",{class:{fail:-1!==e.readySubtitleMessages.indexOf("✖"),pass:e.readySubtitle.length>0&&-1!==e.readySubtitleMessages.indexOf("✔")},attrs:{hint:e.readySubtitleMessages,label:"封面小標題",type:"text","persistent-hint":""},model:{value:e.readySubtitle,callback:function(t){e.readySubtitle=t},expression:"readySubtitle"}})],1),s("div",{staticClass:"col-xs-12 col-md-12"},[s("v-radio-group",{attrs:{row:""},model:{value:e.readyTextcolor,callback:function(t){e.readyTextcolor=t},expression:"readyTextcolor"}},[s("label",{staticClass:"mr-2",class:{active:""!==e.readyTextcolor}},[e._v("封面文字顏色")]),s("v-radio",{attrs:{label:"白色",value:"#ffffff"}}),s("v-radio",{attrs:{label:"黑色",value:"#000000"}})],1)],1),s("div",{staticClass:"col-xs-12 col-md-12"},[s("p",{staticClass:"mx-3 h4",staticStyle:{"word-wrap":"break-word","white-space":"pre-wrap","text-align":"justify"}},[e._v("步驟3/3：填寫課程資訊卡內容")]),s("v-text-field",{staticClass:"required",class:{"required-fail":""===e.readyNickname,fail:-1!==e.readyNicknameMessages.indexOf("✖"),pass:-1!==e.readyNicknameMessages.indexOf("✔")},attrs:{hint:e.readyNicknameMessages,label:"顯示暱稱",type:"text","persistent-hint":""},model:{value:e.readyNickname,callback:function(t){e.readyNickname=t},expression:"readyNickname"}})],1),s("div",{staticClass:"col-xs-12 col-md-12"},[s("v-select",{class:{fail:-1!==e.readyMaleMessages.indexOf("✖"),pass:-1!==e.readyMaleMessages.indexOf("✔")},attrs:{hint:e.readyMaleMessages,items:[{text:"生理男",value:"1"},{text:"生理女",value:"0"}],label:"生理性別","persistent-hint":""},model:{value:e.readyMale,callback:function(t){e.readyMale=t},expression:"readyMale"}})],1),s("div",{staticClass:"col-xs-12 col-md-12"},[s("v-text-field",{staticClass:"required",class:{"required-fail":""===e.readyName,fail:-1!==e.readyNameMessages.indexOf("✖"),pass:-1!==e.readyNameMessages.indexOf("✔")},attrs:{hint:e.readyNameMessages,label:"課程名稱",type:"text","persistent-hint":""},model:{value:e.readyName,callback:function(t){e.readyName=t},expression:"readyName"}})],1),s("div",{staticClass:"col-xs-12 col-md-12"},[s("v-text-field",{staticClass:"required",class:{"required-fail":""===e.readyFee||null===e.readyFee,fail:-1!==e.readyFeeMessages.indexOf("✖"),pass:-1!==e.readyFeeMessages.indexOf("✔")},attrs:{hint:e.readyFeeMessages,label:"課程鐘點費",type:"text","persistent-hint":""},model:{value:e.readyFee,callback:function(t){e.readyFee=t},expression:"readyFee"}})],1),s("div",{staticClass:"col-xs-12 col-md-12"},[s("v-text-field",{class:{fail:-1!==e.readySpecially1Messages.indexOf("✖"),pass:e.readySpecially1.length>0&&-1!==e.readySpecially1Messages.indexOf("✔")},attrs:{hint:e.readySpecially1Messages,label:"課程特色1",type:"text","persistent-hint":""},model:{value:e.readySpecially1,callback:function(t){e.readySpecially1=t},expression:"readySpecially1"}})],1),s("div",{staticClass:"col-xs-12 col-md-12"},[s("v-text-field",{class:{fail:-1!==e.readySpecially2Messages.indexOf("✖"),pass:e.readySpecially2.length>0&&-1!==e.readySpecially2Messages.indexOf("✔")},attrs:{hint:e.readySpecially2Messages,label:"課程特色2",type:"text","persistent-hint":""},model:{value:e.readySpecially2,callback:function(t){e.readySpecially2=t},expression:"readySpecially2"}})],1),s("div",{staticClass:"col-xs-12 col-md-12"},[s("v-text-field",{class:{fail:-1!==e.readySpecially3Messages.indexOf("✖"),pass:e.readySpecially3.length>0&&-1!==e.readySpecially3Messages.indexOf("✔")},attrs:{hint:e.readySpecially3Messages,label:"課程特色3",type:"text","persistent-hint":""},model:{value:e.readySpecially3,callback:function(t){e.readySpecially3=t},expression:"readySpecially3"}})],1)])]),s("div",{staticClass:"item-cube col-xs-12 col-md-6 m-0 p-0"},[s("p",{staticClass:"h4",staticStyle:{"word-wrap":"break-word","white-space":"pre-wrap","text-align":"justify"}},[e._v("即時預覽：試著填寫左側或上側區塊欄位")]),s("div",{staticStyle:{position:"relative"}},[s("div",{staticClass:"teacher-photo",style:"background-image: url('"+e.root+("1"===e.readyMale?e.boyTeacher:e.girlTeacher)+"');"}),""!==e.readybestSale&&null!==e.readybestSale?s("div",{staticClass:"best_sale",staticStyle:{left:"15px"}},[e._v(e._s(e.readybestSale))]):e._e(),s("v-layout",{attrs:{"item-cube-main":"","justify-center":""}},[s("v-flex",{staticClass:"top",style:"background-image: url('"+(99===e.readyCardBg?e.readyCardBgList[3]:e.root+e.readyCardBgList[e.readyCardBg])+"');"},[s("div",{style:"color:"+e.readyTextcolor+";"},[e._v(e._s(e.readyTitle))]),s("div",{style:"color:"+e.readyTextcolor+";"},[e._v(e._s(e.readySubtitle))])]),s("v-flex",{staticClass:"middle"},[s("span",{staticClass:"xs-font-18 md-font-25 float-left word-keep-all"},[e._v(e._s(e.readyNickname))]),s("span",{staticClass:"xs-font-18 md-font-25 float-right word-keep-all"},[e._v("鐘點費NT$"+e._s(e.readyFee||0))])]),s("v-flex",{staticClass:"bottom"},[s("div",{staticClass:"text-left mb-2"},[s("p",{staticClass:"title mb-2"},[e._v(e._s(e.readyName||"課程名稱"))]),s("p",{staticClass:"prove"},[s("img",{attrs:{src:e.prove}}),e._v("學歷稍後顯示")]),s("p",{staticClass:"prove"},[s("img",{attrs:{src:e.prove}}),e._v("經歷稍後顯示")])]),s("div",{staticClass:"text-left"},[e.readySpecially1?s("span",{staticClass:"tag md-font-13 xs-font-9 word-keep-all"},[e._v(e._s(e.readySpecially1))]):e._e(),e.readySpecially2?s("span",{staticClass:"tag md-font-13 xs-font-9 word-keep-all"},[e._v(e._s(e.readySpecially2))]):e._e(),e.readySpecially3?s("span",{staticClass:"tag md-font-13 xs-font-9 word-keep-all"},[e._v(e._s(e.readySpecially3))]):e._e()])])],1)],1)])]),s("hr"),s("p",{staticClass:"h3"},[e._v("設定更多課程詳細訊息：增加學生選課機率")]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-xs-12 col-md-12"},[s("v-textarea",{class:{fail:-1!==e.readyIntroMessages.indexOf("✖"),pass:-1!==e.readyIntroMessages.indexOf("✔")},attrs:{hint:e.readyIntroMessages,label:"課程介紹",rows:"5",type:"text","persistent-hint":""},model:{value:e.readyIntro,callback:function(t){e.readyIntro=t},expression:"readyIntro"}})],1),s("div",{staticClass:"col-xs-12 col-md-6"},[s("v-textarea",{class:{fail:-1!==e.readyWayMessages.indexOf("✖"),pass:-1!==e.readyWayMessages.indexOf("✔")},attrs:{hint:e.readyWayMessages,label:"上課方式",rows:"5",type:"text","persistent-hint":""},model:{value:e.readyWay,callback:function(t){e.readyWay=t},expression:"readyWay"}})],1),s("div",{staticClass:"col-xs-12 col-md-6"},[s("v-textarea",{class:{fail:-1!==e.readyObjectMessages.indexOf("✖"),pass:-1!==e.readyObjectMessages.indexOf("✔")},attrs:{hint:e.readyObjectMessages,label:"授課對象",rows:"5",type:"text","persistent-hint":""},model:{value:e.readyObject,callback:function(t){e.readyObject=t},expression:"readyObject"}})],1)]),s("hr"),s("p",{staticClass:"h3"},[e._v("設定課程大綱，讓學生了解學習架構")]),s("div",{staticClass:"row p-0 m-0"},[s("div",{staticClass:"col-xs-12 col-md-6 p-0 m-0"},[s("div",{staticClass:"row"},[e._m(3),s("div",{staticClass:"col-xs-12 col-md-12 mx-3"},[e._l(e.readyOutline,(function(t,a){return s("div",{key:"chapter"+a},[s("div",{staticClass:"lesson-outline"},[s("div",{staticClass:"lesson-outline-sort-area"},[a>0?s("v-icon",{staticClass:"cursor-no-hover bg-main-color",on:{click:function(t){return e.doReadyOutlineSort("up","c",a)}}},[e._v("mdi-menu-up")]):e._e(),a<e.readyOutline.length-1?s("v-icon",{staticClass:"cursor-no-hover bg-main-color",on:{click:function(t){return e.doReadyOutlineSort("down","c",a)}}},[e._v("mdi-menu-down")]):e._e()],1),s("div",{staticClass:"lesson-outline-chapter"},[s("label",[e._v("第"+e._s(a+1)+"章")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"chapter.text"}],attrs:{id:"chapter"+a,type:"text","persistent-hint":""},domProps:{value:t.text},on:{keyup:function(t){return e.getReadyOutlineReadOnly()},input:function(s){s.target.composing||e.$set(t,"text",s.target.value)}}}),s("div",{staticClass:"lesson-outline-remove"},[s("div",{staticClass:"cursor-no-hover",on:{click:function(t){return e.doReadyOutlineRemove("c",a)}}},[e._v(" 刪除章節 ")])])]),e._l(t.content,(function(i,r){return s("div",{key:"subsection"+a+"_"+r,staticClass:"lesson-outline-subsection"},[s("label",[e._v(e._s(a+1)+"-"+e._s(r+1))]),s("input",{directives:[{name:"model",rawName:"v-model",value:i.text,expression:"subsection.text"}],class:{radius:1===t.content.length},attrs:{id:"subsection"+a+"_"+r,type:"text","persistent-hint":""},domProps:{value:i.text},on:{keyup:function(t){return e.getReadyOutlineReadOnly()},input:function(t){t.target.composing||e.$set(i,"text",t.target.value)}}}),s("div",{staticClass:"lesson-outline-remove"},[t.content.length>1?s("v-icon",{staticClass:"cursor-no-hover",on:{click:function(t){return e.doReadyOutlineRemove("s",a,r)}}},[e._v("mdi-close")]):e._e()],1),s("div",{staticClass:"lesson-outline-icon"},[r>0?s("v-icon",{staticClass:"cursor-no-hover d-none d-sm-flex",on:{click:function(t){return e.doReadyOutlineSort("up","s",a,r)}}},[e._v("mdi-menu-up")]):e._e(),r<t.content.length-1?s("v-icon",{staticClass:"cursor-no-hover d-none d-sm-flex",on:{click:function(t){return e.doReadyOutlineSort("down","s",a,r)}}},[e._v("mdi-menu-down")]):e._e(),r===t.content.length-1?s("v-icon",{staticClass:"cursor-no-hover bg-main-color",on:{click:function(t){return e.doReadyOutlineAdd("s",a)}}},[e._v("mdi-plus")]):e._e()],1)])}))],2)])})),s("div",{staticClass:"lesson-outline-btn"},[s("v-btn",{staticClass:"h5 bg-main-color",on:{click:function(t){return e.doReadyOutlineAdd("c")}}},[s("v-icon",{staticClass:"mr-2"},[e._v("mdi-plus")]),e._v("新增章節 ")],1)],1)],2)])]),s("div",{staticClass:"col-xs-12 col-md-6 p-0 m-0"},[s("div",{staticClass:"row"},[e._m(4),s("div",{staticClass:"col-xs-12 col-md-12 mx-3"},[s("div",{staticClass:"lesson-outline-readonly",domProps:{innerHTML:e._s(e.readyOutlineReadOnly)}})])])])]),s("hr"),s("p",{staticClass:"h3"},[e._v("設定課程補充資訊")]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-xs-12 col-md-12"},[s("v-textarea",{class:{fail:-1!==e.readyMemoMessages.indexOf("✖"),pass:e.readyMemo.length>0&&-1!==e.readyMemoMessages.indexOf("✔")},attrs:{hint:e.readyMemoMessages,label:"給學生的注意事項",rows:"5",type:"text","persistent-hint":""},model:{value:e.readyMemo,callback:function(t){e.readyMemo=t},expression:"readyMemo"}})],1),s("div",{staticClass:"col-xs-12 col-md-12"},[e._m(5),s("v-textarea",{class:{fail:-1!==e.readyTagMessages.indexOf("✖"),pass:e.readyTag.length>0&&-1!==e.readyTagMessages.indexOf("✔")},attrs:{hint:e.readyTagMessages,label:"#hashtag課程關鍵字",rows:"5",type:"text","persistent-hint":""},model:{value:e.readyTag,callback:function(t){e.readyTag=t},expression:"readyTag"}})],1)]),s("hr"),s("p",{staticClass:"h3"},[e._v("設定課程販售方案")]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-xs-12 col-md-12"},[s("v-radio-group",{staticClass:"checkbox-white-radius"},[s("v-checkbox",{staticClass:"shrink",attrs:{label:"試課方案：","hide-details":""},model:{value:e.readySaleTry,callback:function(t){e.readySaleTry=t},expression:"readySaleTry"}}),s("h3",{staticClass:"font-weight-bold"},[s("div",[s("span",[e._v("提供首次試課"),s("br"),e._v("（至少30分鐘）"),s("br")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.readySaleFeeTry,expression:"readySaleFeeTry"}],staticStyle:{width:"70px"},attrs:{id:"readySaleFeeTry",type:"text","persistent-hint":""},domProps:{value:e.readySaleFeeTry},on:{input:function(t){t.target.composing||(e.readySaleFeeTry=t.target.value)}}}),s("span",[e._v("元優惠價")])]),s("div",[s("span",[e._v("原價")]),s("strong",[e._v(e._s(e.readyFee||0))]),s("span",[e._v("元")])])])],1)],1),s("div",{staticClass:"col-xs-12 col-md-12"},[s("v-radio-group",{staticClass:"checkbox-white-radius"},[s("v-checkbox",{staticClass:"shrink",attrs:{label:"單節販售：","hide-details":""},model:{value:e.readySaleUnit,callback:function(t){e.readySaleUnit=t},expression:"readySaleUnit"}}),s("h3",{staticClass:"font-weight-bold"},[s("div",[s("span",[e._v("提供單節（60分鐘）"),s("br"),e._v("原價購買")])]),s("div",[s("span",[e._v("售價")]),e._v(" "+e._s(e.readyFee||0)+" "),s("span",[e._v("元")])])])],1)],1)]),s("hr"),s("div",{staticClass:"row"},[s("div",{staticClass:"col-xs-12 col-md-12 text-center"},[s("v-btn",{staticClass:"mx-4 my-4 p-4 h5 bg-button-color",on:{click:function(t){return e.doSubmit("selling")}}},[s("v-icon",[e._v("mdi-arrow-right-bold")]),e._v("只差一步就能立即開課！ ")],1)],1)])]):e._e(),s("v-dialog",{attrs:{persistent:""},model:{value:e.loadingView,callback:function(t){e.loadingView=t},expression:"loadingView"}},[s("p",{staticStyle:{"letter-spacing":"5px","text-align":"center !important",color:"#ffffff","background-color":"#000000dd",padding:"15px",margin:"auto"}},[s("img",{staticStyle:{width:"2rem","margin-bottom":"10px"},attrs:{src:e.loading}}),s("br"),e._v(" "+e._s(e.loadingViewText)+" ")])]),s("v-snackbar",{attrs:{top:!0,color:e.color},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(" "+e._s(e.errorMessages)+" "),s("v-btn",{attrs:{dark:"",flat:""},on:{click:function(t){e.snackbar=!1}}},[e._v(" Close ")])],1)],1)},i=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("p",{staticClass:"mb-5 h3 font-weight-bold",staticStyle:{"word-wrap":"break-word","white-space":"pre-wrap","text-align":"center"}},[e._v("Quikok開課囉！"),s("br"),e._v("快來開設您的課程")])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"col-xs-12 col-md-12"},[s("p",{staticClass:"mx-3 h4",staticStyle:{"word-wrap":"break-word","white-space":"pre-wrap","text-align":"justify"}},[e._v("步驟1/3：選擇課程資訊卡封面")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"col-xs-12 col-md-12"},[s("p",{staticClass:"mx-3 h4 mt-4 mb-0",staticStyle:{"word-wrap":"break-word","white-space":"pre-wrap","text-align":"justify"}},[e._v("步驟2/3：設定課程資訊卡標題")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"col-xs-12 col-md-12"},[s("p",{staticClass:"mx-3 h4",staticStyle:{"word-wrap":"break-word","white-space":"pre-wrap","text-align":"justify"}},[e._v("填寫課程大綱")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"col-xs-12 col-md-12"},[s("p",{staticClass:"mx-3 h4",staticStyle:{"word-wrap":"break-word","white-space":"pre-wrap","text-align":"justify"}},[e._v("即時預覽")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("p",{staticClass:"mx-3 h4",staticStyle:{"word-wrap":"break-word","white-space":"pre-wrap","text-align":"justify"}},[e._v("填寫的關鍵字可被學生、家長搜尋，填寫越準確可增加被搜尋的機率呦！"),s("br"),e._v("每組關鍵字請以「#」開頭，結尾處並以空格區隔下組關鍵字（例如：#高中 #學測）。 ")])}],r=(s("8e6e"),s("456d"),s("96cf"),s("3b8d")),o=(s("7f7f"),s("ac6a"),s("a481"),s("c5f6"),s("bd86")),n=s("1157"),c=s.n(n),l=s("4328"),d=s.n(l),u=s("2f62"),h=s("34a4"),f=s.n(h),g=s("2ea1"),p=s.n(g),v=s("750f"),m=s.n(v),_=s("df25"),b=s.n(_),y=s("0b2b"),w=s.n(y),k=s("222d"),x=s.n(k),C=s("f8b2"),S=s.n(C);function I(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function M(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?I(Object(s),!0).forEach((function(t){Object(o["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):I(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var O={name:"LessonGuestReady",metaInfo:function(){return{title:this.appName+"｜新增課程"}},data:function(){return{loadingView:!1,loadingViewText:"處理中",pageView:!1,prove:f.a,cardBg1:p.a,cardBg2:m.a,cardBg3:b.a,boyTeacher:w.a,girlTeacher:x.a,loading:S.a,snackbar:!1,color:"red",errorMessages:"",sellStatus:"draft",readyCardBg:0,readyCardBgList:[p.a,m.a,b.a,""],readyTitle:"",readyTitleMessages:"0/10字",readySubtitle:"",readySubtitleMessages:"0/10字",readyTextcolor:"#ffffff",readybestSale:"",readyName:"",readyNameMessages:"0/14字",readyMale:"1",readyMaleMessages:"請選擇您的生理性別",readyNickname:"",readyNicknameMessages:"請輸入您的暱稱",readyScore:0,readyReviewed:0,readyFee:null,readyFeeMessages:"請輸入課程鐘點費",readySpecially1:"",readySpecially1Messages:"0/10字",readySpecially2:"",readySpecially2Messages:"0/10字",readySpecially3:"",readySpecially3Messages:"0/10字",readyIntro:"",readyIntroMessages:"請輸入課程介紹",readyWay:"",readyWayMessages:"請輸入上課方式，如：提供教材電子檔、課後作業批改、量身打造衝刺課程",readyObject:"",readyObjectMessages:"請輸入授課對象，如：需具備某些知識背景或能力、鎖定特定職業工作需求者",readyMemo:"",readyMemoMessages:"請輸入課程注意事項，如：不建議使用手機上課、務必準備耳機",readyTag:"",readyTagMessages:"請輸入課程關鍵字，讓未來的淺在客戶更容易找到您",readyCardBgUpload:[{file:"",name:"",url:""}],readyOutline:[{type:"chapter",text:"",content:[{type:"subsection",text:""}]}],readyOutlineReadOnly:"",readySaleUnit:!0,readySaleTry:!0,readySaleFeeTry:200,readySelectTime:[],userAgreementOpen:!1,userAgreementCheck:!1,submitVerify:!1,submit:!1}},computed:M({},Object(u["c"])(["root","appName","isProduction"])),watch:{readyTitle:function(e){e.length>10?this.readyTitleMessages="✖ "+e.length+"/10字":0===e.length?this.readyTitleMessages="0/10字":this.readyTitleMessages="✔ "+e.length+"/10字"},readySubtitle:function(e){e.length>10?this.readySubtitleMessages="✖ "+e.length+"/10字":0===e.length?this.readySubtitleMessages="0/10字":this.readySubtitleMessages="✔ "+e.length+"/10字"},readyName:function(e){0===e.length||e.length>14?this.readyNameMessages="✖ "+e.length+"/14字":this.readyNameMessages="✔ "+e.length+"/14字"},readyNickname:function(e){0===e.length?this.readyNicknameMessages="✖ 請輸入您的暱稱":e.length>0&&(this.readyNicknameMessages="✔")},readyMale:function(e){this.readyMaleMessages=null===e?"請選擇您的生理性別":"✔"},readyFee:function(e){var t=/^[0-9]+$/;""===e?this.readyFeeMessages="✖ 課程鐘點費不得為空":t.test(this.readyFee)?(this.readyFeeMessages="✔",this.readyFee=Number(this.readyFee)):this.readyFeeMessages="✖ 課程鐘點費輸入格式錯誤"},readySpecially1:function(e){e.length>10?this.readySpecially1Messages="✖ "+e.length+"/10字":0===e.length?this.readySpecially1Messages="0/10字":this.readySpecially1Messages="✔ "+e.length+"/10字"},readySpecially2:function(e){e.length>10?this.readySpecially2Messages="✖ "+e.length+"/10字":0===e.length?this.readySpecially2Messages="0/10字":this.readySpecially2Messages="✔ "+e.length+"/10字"},readySpecially3:function(e){e.length>10?this.readySpecially3Messages="✖ "+e.length+"/10字":0===e.length?this.readySpecially3Messages="0/10字":this.readySpecially3Messages="✔ "+e.length+"/10字"},readyIntro:function(e){this.readyIntroMessages=""===e?"請輸入課程介紹":"✔"},readyWay:function(e){this.readyWayMessages=""===e?"請輸入上課方式，如：提供教材電子檔、課後作業批改、量身打造衝刺課程":"✔"},readyObject:function(e){this.readyObjectMessages=""===e?"請輸入授課對象，如：需具備某些知識背景或能力、鎖定特定職業工作需求者":"✔"},readyMemo:function(e){this.readyMemoMessages=""===e?"請輸入課程注意事項，如：不建議使用手機上課、務必準備耳機":"✔"},readyTag:function(e){this.readyTagMessages=""===e?"請輸入課程關鍵字，讓未來的淺在客戶更容易找到您":"✔"},readySaleFeeTry:function(e){this.readySaleFeeTry=e>9999?9999:e<0?0:this.readySaleFeeTry.replace(/[^0-9]/gi,"")}},mounted:function(){var e=this,t=!0;if(!localStorage.getItem("token")&&t){var s={userId:this.userInfo?this.userInfo.user_id:-1,url:this.$route.path};this.$http.post("/api/account/authCheck/",d.a.stringify(s)).then((function(e){return e.data})).then((function(t){"success"===t.status?t.data.authority?(e.getReadyOutlineReadOnly(),e.pageView=!0):e.$router.push("/"):localStorage.getItem("user")&&e.$store.dispatch("logout").then((function(){e.$router.go(0)}))})).catch((function(t){console.log(t),localStorage.getItem("user")&&e.$store.dispatch("logout").then((function(){e.$router.go(0)}))}))}else this.$router.push("/")},methods:{doGtagsEvent:function(e,t,s){this.isProduction&&this.$gtag.event(e,{description:t,remarks:s,page_path:this.$route.fullPath,hostname:this.root,user_id:this.userInfo?this.userInfo.user_id:-1})},doReadyOutlineSort:function(e,t,s,a){var i=this,r="up"===e?-1:"down"===e?1:0;if("c"===t){var o=[this.readyOutline[s].text,this.readyOutline[s].content,this.readyOutline[s+r].text,this.readyOutline[s+r].content];this.readyOutline[s].text=o[2],this.readyOutline[s].content=o[3],this.readyOutline[s+r].text=o[0],this.readyOutline[s+r].content=o[1]}else if("s"===t){var n=[this.readyOutline[s].content[a].text,this.readyOutline[s].content[a+r].text];this.readyOutline[s].content[a].text=n[1],this.readyOutline[s].content[a+r].text=n[0]}setTimeout((function(){i.getReadyOutlineReadOnly()}),0)},doReadyOutlineAdd:function(e,t){var s=this;if("c"===e){var a={type:"chapter",text:"",content:[{type:"subsection",text:""}]};this.readyOutline.push(a)}else if("s"===e){var i={type:"subsection",text:""};this.readyOutline[t].content.push(i)}setTimeout((function(){s.getReadyOutlineReadOnly()}),0)},doReadyOutlineRemove:function(e,t,s){var a=this;"c"===e?this.readyOutline.splice(t,1):"s"===e&&this.readyOutline[t].content.splice(s,1),setTimeout((function(){a.getReadyOutlineReadOnly()}),0)},getReadyOutlineReadOnly:function(){var e="";this.readyOutline.forEach((function(t,s){e=e+'<div class="area"><div class="chapter"><div>第'+(s+1)+"章</div><div>"+(c()("#chapter"+s).val()||"")+"</div></div>",t.content.forEach((function(t,a){e=e+'<div class="subsection"><div>'+(s+1)+"-"+(a+1)+"</div><div>"+(c()("#subsection"+s+"_"+a).val()||"")+"</div></div>"})),e+="</div>"})),this.readyOutlineReadOnly=e},selectReadyCardBg:function(){this.readyCardBgUpload[0].url&&(this.readyCardBg=99)},uploadReadyCardBg:function(){this.readyCardBgUpload[0].url||c()("#file_readyCardBg").click()},setReadyCardBg:function(e){var t=e.target.files||e.dataTransfer.files;e.srcElement.files.item(0).size>4194304?(c()("#file_readyCardBg").val(""),alert("上傳照片不得超過4MB")):(this.readyCardBgUpload[0].url=window.URL.createObjectURL(e.srcElement.files.item(0)),this.readyCardBgUpload[0].file=t[0],this.readyCardBgUpload[0].name=e.srcElement.files.item(0).name,this.readyCardBgList[3]=this.readyCardBgUpload[0].url)},cancelReadyCardBg:function(){this.readyCardBgUpload[0].file=this.readyCardBgUpload[0].name=this.readyCardBgUpload[0].url="",this.readyCardBgList[3]="",c()("#file_readyCardBg").val("")},doSubmitVerify:function(){this.getReadyOutlineReadOnly(),-1===this.readyTitleMessages.indexOf("✖")&&-1===this.readySubtitleMessages.indexOf("✖")&&-1===this.readyNameMessages.indexOf("✖")&&this.readyFee>=0&&null!==this.readyFee&&-1===this.readyFeeMessages.indexOf("✖")&&-1===this.readySpecially1Messages.indexOf("✖")&&-1===this.readySpecially2Messages.indexOf("✖")&&-1===this.readySpecially3Messages.indexOf("✖")&&-1===this.readyIntroMessages.indexOf("✖")&&-1===this.readyWayMessages.indexOf("✖")&&-1===this.readyObjectMessages.indexOf("✖")&&-1===this.readyMemoMessages.indexOf("✖")&&-1===this.readyTagMessages.indexOf("✖")?this.readySaleUnit?this.submit=!0:(this.submit=!1,this.snackbar=!0,this.color="red",this.errorMessages="單節販售為必須勾選項目"):(this.submit=!1,scroll(0,0),this.snackbar=!0,this.color="red",this.errorMessages="請再次檢查欄位是否填妥")},dosubmitVerifyAfter:function(e){var t=this;if(this.submit){var s=(new Date).getTime(),a=Math.floor(100*Math.random())+100;this.loadingViewText="新增課程中",this.loadingView=!0;var i=new FormData;i.append("dummy_teacher_id",s+this.readyNickname+a),i.append("big_title",this.readyTitle),i.append("little_title",this.readySubtitle),i.append("title_color",this.readyTextcolor),i.append("background_picture_code",this.readyCardBg),i.append("lesson_title",this.readyName),i.append("price_per_hour",this.readyFee),i.append("highlight_1",this.readySpecially1),i.append("highlight_2",this.readySpecially2),i.append("highlight_3",this.readySpecially3),i.append("lesson_intro",this.readyIntro),i.append("how_does_lesson_go",this.readyWay),i.append("target_students",this.readyObject),i.append("lesson_remarks",this.readyMemo),i.append("lesson_attributes",this.readyTag),i.append("syllabus",this.readyOutlineReadOnly),i.append("trial_class_price",this.readySaleTry?this.readySaleFeeTry:-999),i.append("lesson_has_one_hour_package",this.readySaleUnit),i.append("background_picture_path",99===this.readyCardBg&&""!==this.readyCardBgUpload[0].file?this.readyCardBgUpload[0].file:""),this.$http.post("api/lesson/beforeSigningUpCreateOrEditLesson/",i).then((function(e){return e.data})).then((function(e){t.loadingView=!1,"success"===e.status?(t.doGtagsEvent("LessonGuestReady-按鈕：上架及老師註冊","按下[只差一步就能立即開課！]按鈕",s+t.readyNickname+a),t.$router.push("/account/register/teacher/"+s+"/"+a+"/"+t.readyMale+"/"+t.readyNickname)):"failed"===e.status?(t.snackbar=!0,t.color="red",t.errorMessages=e.errMsg):(t.snackbar=!0,t.color="orange",t.errorMessages="發生錯誤，請稍後再試")})).catch((function(e){t.loadingView=!1,t.snackbar=!0,t.color="orange",t.errorMessages="發生錯誤，請稍後再試",console.log(e)}))}},doSubmit:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.doSubmitVerify();case 2:return e.next=4,this.dosubmitVerifyAfter(t);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}},P=O,E=s("2877"),T=Object(E["a"])(P,a,i,!1,null,null,null);t["default"]=T.exports},a630:function(e,t,s){},a8cb:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-content",{staticClass:"bg-grey-full-page",attrs:{id:"lessonstudy"}},[e.pageView?s("div",{staticClass:"container",staticStyle:{"min-height":"calc(100vh - 70px - 145px)"}},[s("p",{staticClass:"mb-5 h3 font-weight-bold",staticStyle:{"word-wrap":"break-word","white-space":"pre-wrap","text-align":"center","font-weight":"500!important"}},[e._v("學習歷程")]),s("div",{staticClass:"lesson-reservation-area"},[s("div",{staticClass:"lesson-reservation-title"},[s("div",{staticClass:"lesson-reservation-status cursor-no-hover",class:{active:"to_be_confirmed"===e.status},on:{click:function(t){e.status=e.loadingStatus?e.status:"to_be_confirmed"}}},[s("span",[e._v("待回覆")])]),s("div",{staticClass:"lesson-reservation-status cursor-no-hover",class:{active:"confirmed"===e.status},on:{click:function(t){e.status=e.loadingStatus?e.status:"confirmed"}}},[s("span",[e._v("預約成功")])]),s("div",{staticClass:"lesson-reservation-status cursor-no-hover",class:{active:"finished"===e.status},on:{click:function(t){e.status=e.loadingStatus?e.status:"finished"}}},[s("span",[e._v("已完課")])]),s("div",{staticClass:"lesson-reservation-status curso-no-hover",class:{active:"canceled"===e.status},on:{click:function(t){e.status=e.loadingStatus?e.status:"canceled"}}},[s("span",[e._v("已取消")])]),s("v-icon",{staticClass:"cursor",on:{click:function(t){e.filter=!e.filter}}},[e._v("mdi-filter")])],1),e.filter?s("div",{staticClass:"lesson-reservation-filter"},[s("div",[s("v-icon",{staticClass:"cursor"},[e._v("mdi-magnify")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.keyword,expression:"keyword"}],attrs:{placeholder:"請輸入關鍵字篩選課程或老師",type:"text"},domProps:{value:e.keyword},on:{input:function(t){t.target.composing||(e.keyword=t.target.value)}}})],1),s("v-btn",{staticClass:"h4 bg-main-color",on:{click:function(t){return e.getStudentBookingHistory()}}},[e._v(" 篩選 ")])],1):e._e(),e.filter&&e.filterCondition.length>0?s("hr"):e._e(),""!==e.filterCondition?s("h6",{staticClass:"text-center text-danger"},[s("strong",[e._v(e._s(e.filterCondition))])]):e._e(),s("div",{staticClass:"row",class:{loading:e.loadingStatus}}),e.loadingStatus||0!==e.resLessonReservationDate.length?e._e():s("hr"),e.loadingStatus||0!==e.resLessonReservationDate.length?e._e():s("h4",{staticClass:"text-center"},[e._v("無符合條件之預約資訊")]),e._l(e.resLessonReservationDate,(function(t,a){return s("div",{key:"r"+a,staticClass:"lesson-reservation-item",class:{xxx:!0}},[s("div",{staticClass:"information"},[s("div",{staticClass:"no"},[e._v(e._s(a+1))]),s("div",{staticClass:"case"},[e._v(e._s("trial"===t.discount_price?"試課體驗":"no_discount"===t.discount_price?"單節購買":t.discount_price.split(":")[0]+"小時方案"))]),s("div",{staticClass:"lesson"},[s("p",[s("span",[e._v(e._s(t.booked_date))]),s("span",[e._v(e._s(e.weekList[new Date(t.booked_date).getDay()]))]),s("span",[e._v(e._s(e.doTimeConversion(t.booked_time)))]),s("span",[e._v("預計"+e._s(30*t.booked_time.length)+"分鐘")])]),s("p",{staticClass:"cursor-no-hover",on:{click:function(s){return e.$router.push("/lesson/main/view/"+t.lesson_id)}}},[e._v(e._s(t.lesson_title))])]),s("div",{staticClass:"name"},[s("span",[e._v(e._s(t.teacher_nickname))]),s("img",{staticClass:"cursor",attrs:{src:e.chatIconSmall},on:{click:function(s){return e.doConnectChatroom(t.teacher_auth_id)}}})])]),s("hr"),s("div",{staticClass:"status"},[s("div",{staticClass:"remarks"},["quikok_dealing_for_student_disagreed"===t.booked_status?s("div",{staticClass:"bg-reservation-main-color"},[e._v("客服處理中")]):e._e(),"student_not_yet_confirmed"===t.booked_status?s("div",{staticClass:"bg-deep-grey-color"},[e._v("待確認時數")]):e._e(),"finished"===t.booked_status||"student_not_yet_confirmed"===t.booked_status||"quikok_dealing_for_student_disagreed"===t.booked_status?s("span",[e._v("實際上課時間 11:00~02:30｜共計210分鐘 "),"student_not_yet_confirmed"===t.booked_status?s("span",{staticClass:"text-danger"},[e._v("(請於"+e._s(t.student_confirmed_deadline)+"前確認時數是否無誤)")]):e._e()]):e._e(),"canceled"===t.booked_status?s("span",{class:{"not-select-color":"canceled"===t.booked_status}},[e._v(e._s(t.remark))]):e._e()]),s("div",{staticClass:"action"},["to_be_confirmed"===t.booked_status?s("button",{staticClass:"button-border-reservation-main-color",on:{click:function(s){return e.doChangingStatus(t.lesson_booking_info_id,"canceled","取消")}}},[e._v("取消預約")]):e._e(),"confirmed"===t.booked_status?s("button",{staticClass:"button-border-reservation-main-color",on:{click:function(s){return e.doChangingStatus(t.lesson_booking_info_id,"canceled","取消")}}},[e._v("取消預約")]):e._e(),"student_not_yet_confirmed"===t.booked_status?s("button",{staticClass:"button-border-select-color",on:{click:function(s){return e.doCompletedTimeVerification(t.lesson_booking_info_id,"agree","確認時數")}}},[e._v("時數正確")]):e._e(),"student_not_yet_confirmed"===t.booked_status?s("button",{staticClass:"button-border-reservation-main-color",on:{click:function(s){return e.doCompletedTimeVerification(t.lesson_booking_info_id,"disagree","提報客服")}}},[e._v("時數有誤")]):e._e(),t.is_student_given_feedback||"finished"!==t.booked_status&&"student_not_yet_confirmed"!==t.booked_status&&"quikok_dealing_for_student_disagreed"!==t.booked_status?e._e():s("button",{staticClass:"button-border-select-color",on:{click:function(s){e.writeReviewsInfo.lesson_booking_info_id=t.lesson_booking_info_id,e.writeReviewsView=!0}}},[e._v("進行評價")]),t.is_student_given_feedback?s("button",{staticClass:"button-border-select-color",on:{click:function(s){return e.getReadReviewsOfCertainLessons(t.lesson_booking_info_id,t.teacher_thumbnail_path,t.teacher_is_male,t.teacher_s_user_type_for_double_check)}}},[e._v("查看評價")]):e._e()])])])}))],2)]):e._e(),s("v-dialog",{attrs:{width:"290px",persistent:""},model:{value:e.writeReviewsView,callback:function(t){e.writeReviewsView=t},expression:"writeReviewsView"}},[s("v-card",{staticStyle:{margin:"0 auto",background:"#eeeeee"},attrs:{"max-width":"100%"}},[s("v-card-text",{staticClass:"p-0"},[s("v-alert",{staticClass:"border-0",attrs:{color:"bg-main-color"},model:{value:e.writeReviewsView,callback:function(t){e.writeReviewsView=t},expression:"writeReviewsView"}},[s("strong",{staticClass:"h4"},[e._v("進行課程評價")]),s("v-icon",{staticClass:"cursor float-right text-white",on:{click:function(t){e.writeReviewsView=!1}}},[e._v(" mdi-close ")])],1)],1),s("v-card-actions",{staticStyle:{"padding-bottom":"25px","justify-content":"center","flex-flow":"wrap"}},[s("div",{staticClass:"col-xs-12 col-md-12 border-bottom text-center px-0 py-2"},[s("h5",[e._v("請為本次課程評分")]),e._l(5,(function(t){return s("v-icon",{key:"w"+t,staticClass:"cursor-no-hover reviews star bigger",class:{active:t<=e.writeReviewsInfo.score_given||t<=e.writeReviewsScoreMove},on:{mousemove:function(s){e.writeReviewsScoreMove=t},mouseleave:function(t){e.writeReviewsScoreMove=0},click:function(s){e.writeReviewsInfo.score_given=t}}},[e._v("mdi-star")])}))],2),s("div",{staticClass:"col-xs-12 col-md-12 border-bottom text-center px-0 py-2"},[s("h5",[e._v("本次課程狀況回報")]),s("v-chip",{staticClass:"cursor-no-hover reviews items",class:{active:e.writeReviewsInfo.is_teacher_late_for_lesson},on:{click:function(t){e.writeReviewsInfo.is_teacher_late_for_lesson=!e.writeReviewsInfo.is_teacher_late_for_lesson}}},[e._v("上課延遲")]),s("v-chip",{staticClass:"cursor-no-hover reviews items",class:{active:e.writeReviewsInfo.is_teacher_frivolous_in_lesson},on:{click:function(t){e.writeReviewsInfo.is_teacher_frivolous_in_lesson=!e.writeReviewsInfo.is_teacher_frivolous_in_lesson}}},[e._v("態度不佳")]),s("v-chip",{staticClass:"cursor-no-hover reviews items",class:{active:e.writeReviewsInfo.is_teacher_incapable},on:{click:function(t){e.writeReviewsInfo.is_teacher_incapable=!e.writeReviewsInfo.is_teacher_incapable}}},[e._v("備課不足")])],1),s("div",{staticClass:"col-xs-12 col-md-12 border-bottom text-center px-0 py-2"},[s("h5",[e._v("分享本次課程感想")]),s("v-textarea",{staticClass:"reviews textarea",attrs:{label:"",placeholder:"請留下感想讓我們知道",rows:"3",type:"text","persistent-hint":""},model:{value:e.writeReviewsInfo.remark_given,callback:function(t){e.$set(e.writeReviewsInfo,"remark_given",t)},expression:"writeReviewsInfo.remark_given"}})],1),s("v-btn",{staticClass:"hover-main-color mt-3",on:{click:function(t){return e.doStudentWriteTeacherReviews()}}},[e._v(" 送出評價 ")])],1)],1)],1),s("v-dialog",{attrs:{width:"290px",persistent:""},model:{value:e.readReviewsView,callback:function(t){e.readReviewsView=t},expression:"readReviewsView"}},[s("v-card",{staticStyle:{margin:"0 auto",background:"#eeeeee"},attrs:{"max-width":"100%"}},[s("v-card-text",{staticClass:"p-0"},[s("v-alert",{staticClass:"border-0",attrs:{color:"bg-main-color"},model:{value:e.readReviewsView,callback:function(t){e.readReviewsView=t},expression:"readReviewsView"}},[s("strong",{staticClass:"h4"},[e._v("課程評價詳情")]),s("v-icon",{staticClass:"cursor float-right text-white",on:{click:function(t){e.readReviewsView=!1}}},[e._v(" mdi-close ")])],1)],1),s("v-card-actions",{staticStyle:{padding:"0","justify-content":"center","flex-flow":"wrap"}},[e.readReviewsInfo.score_given_to_student>=0?s("div",{staticClass:"col-xs-12 col-md-12 text-center px-0 py-3"},[s("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[s("div",{staticStyle:{width:"75px",height:"75px","background-size":"cover","background-position":"50%","border-radius":"50%"},style:"background-image: url('"+e.root+e.readReviewsPhoto+"');"}),s("v-icon",{staticStyle:{"font-size":"50px!important",margin:"0!important"}},[e._v("mdi-chevron-right")]),s("div",{staticStyle:{width:"75px",height:"75px","background-size":"cover","background-position":"50%","border-radius":"50%"},style:"background-image: url('"+e.root+e.snapshot+"');"})],1),e._l(5,(function(t){return s("v-icon",{key:"w"+t,staticClass:"reviews onlyread star bigger",class:{active:t<=e.readReviewsInfo.score_given_to_student}},[e._v("mdi-star")])})),s("v-chip",{staticClass:"reviews onlyread items",class:{active:e.readReviewsInfo.is_student_late_for_lesson}},[e._v("上課延遲")]),s("v-chip",{staticClass:"reviews onlyread items",class:{active:e.readReviewsInfo.is_student_frivolous_in_lesson}},[e._v("態度不佳")]),s("v-chip",{staticClass:"reviews onlyread items",class:{active:e.readReviewsInfo.is_student_or_parents_not_friendly}},[e._v("備課不足")]),s("p",{staticStyle:{"word-break":"break-word","text-align":"justify","margin-bottom":"0"}},[e._v(e._s(e.readReviewsInfo.remark_given_to_student))])],2):e._e(),e.readReviewsInfo.score_given_to_student>=0&&e.readReviewsInfo.score_given_to_teacher>=0?s("div",{staticClass:"col-xs-12 col-md-12 border-bottom p-0"}):e._e(),e.readReviewsInfo.score_given_to_teacher>=0?s("div",{staticClass:"col-xs-12 col-md-12 text-center px-0 py-3"},[s("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[s("div",{staticStyle:{width:"75px",height:"75px","background-size":"cover","background-position":"50%","border-radius":"50%"},style:"background-image: url('"+e.root+e.snapshot+"');"}),s("v-icon",{staticStyle:{"font-size":"50px!important",margin:"0!important"}},[e._v("mdi-chevron-right")]),s("div",{staticStyle:{width:"75px",height:"75px","background-size":"cover","background-position":"50%","border-radius":"50%"},style:"background-image: url('"+e.root+e.readReviewsPhoto+"');"})],1),e._l(5,(function(t){return s("v-icon",{key:"w"+t,staticClass:"reviews onlyread star bigger",class:{active:t<=e.readReviewsInfo.score_given_to_teacher}},[e._v("mdi-star")])})),s("v-chip",{staticClass:"reviews onlyread items",class:{active:e.readReviewsInfo.is_teacher_late_for_lesson}},[e._v("上課延遲")]),s("v-chip",{staticClass:"reviews onlyread items",class:{active:e.readReviewsInfo.is_teacher_frivolous_in_lesson}},[e._v("態度不佳")]),s("v-chip",{staticClass:"reviews onlyread items",class:{active:e.readReviewsInfo.is_teacher_incapabale}},[e._v("干預授課")]),s("p",{staticStyle:{"word-break":"break-word","text-align":"justify","margin-bottom":"0"}},[e._v(e._s(e.readReviewsInfo.remark_given_to_teacher))])],2):e._e()])],1)],1),s("v-dialog",{attrs:{persistent:""},model:{value:e.loadingView,callback:function(t){e.loadingView=t},expression:"loadingView"}},[s("p",{staticStyle:{"letter-spacing":"5px","text-align":"center !important",color:"#ffffff","background-color":"#000000dd",padding:"15px",margin:"auto"}},[s("img",{staticStyle:{width:"2rem","margin-bottom":"10px"},attrs:{src:e.loading}}),s("br"),e._v(" "+e._s(e.loadingViewText)+" ")])]),s("v-snackbar",{attrs:{top:!0,color:e.color},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(" "+e._s(e.errorMessages)+" "),s("v-btn",{attrs:{dark:"",flat:""},on:{click:function(t){e.snackbar=!1}}},[e._v(" Close ")])],1)],1)},i=[],r=(s("8e6e"),s("ac6a"),s("456d"),s("c5f6"),s("bd86")),o=s("4328"),n=s.n(o),c=s("0b2b"),l=s.n(c),d=s("222d"),u=s.n(d),h=s("f6b8"),f=s.n(h),g=s("307a"),p=s.n(g),v=s("2ea1"),m=s.n(v),_=s("750f"),b=s.n(_),y=s("df25"),w=s.n(y),k=s("af05"),x=s.n(k),C=s("f8b2"),S=s.n(C),I=s("2f62");function M(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function O(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?M(Object(s),!0).forEach((function(t){Object(r["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):M(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var P={name:"LessonStudy",metaInfo:function(){return{title:this.appName+"｜學習歷程"}},data:function(){return{loadingView:!1,loadingViewText:"處理中",pageView:!0,status:"to_be_confirmed",filterCondition:"",keyword:"",timeStart:"",timeEnd:"",filter:!1,writeReviewsView:!1,readReviewsView:!1,writeReviewsScoreMove:0,writeReviewsInfo:{lesson_booking_info_id:0,score_given:0,remark_given:"",is_teacher_late_for_lesson:!1,is_teacher_frivolous_in_lesson:!1,is_teacher_incapable:!1},readReviewsPhoto:"",readReviewsInfo:{score_given_to_teacher:-1,remark_given_to_teacher:"",is_teacher_late_for_lesson:!1,is_teacher_frivolous_in_lesson:!1,is_teacher_incapabale:!1,score_given_to_student:-1,remark_given_to_student:"",is_student_late_for_lesson:!1,is_student_frivolous_in_lesson:!1,is_student_or_parents_not_friendly:!1},boyTeacher:l.a,girlTeacher:u.a,boyStudent:f.a,girlStudent:p.a,cardBg1:m.a,cardBg2:b.a,cardBg3:w.a,chatIconSmall:x.a,loading:S.a,loadingStatus:!0,snackbar:!1,color:"red",errorMessages:"",weekList:["日","一","二","三","四","五","六"],resLessonReservationDate:[]}},computed:O({},Object(I["c"])(["root","snapshot","appName","doChatView","doChatAction","doChatroomID"]),{userInfo:function(){return JSON.parse(localStorage.getItem("user"))}}),watch:{status:function(e){this.getStudentBookingHistory()},"writeReviewsInfo.lesson_booking_info_id":function(e){this.writeReviewsInfo.score_given=0,this.writeReviewsInfo.remark_given="",this.writeReviewsInfo.is_teacher_late_for_lesson=!1,this.writeReviewsInfo.is_teacher_frivolous_in_lesson=!1,this.writeReviewsInfo.is_teacher_incapable=!1}},mounted:function(){var e=this;if(localStorage.getItem("token")&&"student"===this.userInfo.type){var t={userId:this.userInfo?this.userInfo.user_id:-1,url:this.$route.path};this.$http.post("/api/account/authCheck/",n.a.stringify(t)).then((function(e){return e.data})).then((function(t){"success"===t.status?t.data.authority?e.getStudentBookingHistory():e.$router.push("/"):localStorage.getItem("user")&&e.$store.dispatch("logout").then((function(){e.$router.go(0)}))})).catch((function(t){console.log(t),localStorage.getItem("user")&&e.$store.dispatch("logout").then((function(){e.$router.go(0)}))}))}else this.$router.push("/")},methods:{test:function(){alert("未開放")},getStudentBookingHistory:function(){var e=this;this.resLessonReservationDate=[],this.loadingStatus=!0;var t={userID:this.userInfo?this.userInfo.user_id:-1,searched_by:this.keyword,filtered_by:this.status,registered_from_date:this.timeStart,registered_to_date:this.timeEnd};this.$http.post("/api/lesson/getStudentsBookingHistory/",n.a.stringify(t)).then((function(e){return e.data})).then((function(t){e.loadingStatus=!1,"success"===t.status?(e.filter=!1,"student"===e.userInfo.type?(e.pageView=!0,""!==e.keyword||""!==e.timeStart||""!==e.timeEnd?(e.filterCondition="以下為",""===e.timeStart&&""===e.timeEnd||(e.filterCondition=e.filterCondition+e.timeStart+"至"+e.timeEnd),""!==e.keyword&&(e.filterCondition=e.filterCondition+'符合"'+e.keyword+'"'),e.filterCondition=e.filterCondition+"的篩選結果"):e.filterCondition="",e.resLessonReservationDate=t.data):e.$router.push("/")):"failed"===t.status?(e.snackbar=!0,e.color="red",e.errorMessages=t.errMsg):(e.snackbar=!0,e.color="orange",e.errorMessages="發生錯誤，請稍後再試")})).catch((function(t){e.loadingView=!1,e.snackbar=!0,e.color="orange",e.errorMessages="發生錯誤，請稍後再試",console.log(t)}))},getReadReviewsOfCertainLessons:function(e,t,s,a){var i=this;this.loadingStatus=!0;var r={userID:this.userInfo?this.userInfo.user_id:-1,type:this.userInfo?this.userInfo.type:"",lesson_booking_info_id:e};this.$http.post("/api/lesson/readReviewsOfCertainLessons/",n.a.stringify(r)).then((function(e){return e.data})).then((function(e){i.loadingStatus=!1,"success"===e.status?(""===t||null===t?"teacher"===a?i.readReviewsPhoto=s?l.a:u.a:"student"===a&&(i.readReviewsPhoto=s?f.a:p.a):i.readReviewsPhoto=t,i.readReviewsInfo=e.data,i.readReviewsView=!0):"failed"===e.status?(i.snackbar=!0,i.color="red",i.errorMessages=e.errMsg):(i.snackbar=!0,i.color="orange",i.errorMessages="發生錯誤，請稍後再試")})).catch((function(e){i.loadingView=!1,i.snackbar=!0,i.color="orange",i.errorMessages="發生錯誤，請稍後再試",console.log(e)}))},doTimeConversion:function(e){var t=(Number(e[0])<20?"0":"")+parseInt(Number(e[0])/2)+":"+(Number(e[0])%2?"30":"00"),s=(Number(e[e.length-1])+1<20?"0":"")+parseInt((Number(e[e.length-1])+1)/2)+":"+((Number(e[e.length-1])+1)%2?"30":"00");return t+"-"+s},doCompletedTimeVerification:function(e,t,s){"agree"===t?confirm("確認時數後將無法再修正時數\n請問您是否要繼續？")&&this.doCompletedTime(e,t,s):"disagree"===t&&confirm("送出後將交由客服進行處理\n請問您是否要繼續？")&&this.doCompletedTime(e,t,s)},doCompletedTime:function(e,t,s){var a=this;this.confirmTimeView=!1,this.loadingViewText=s+"中",this.loadingView=!0;var i={userID:this.userInfo?this.userInfo.user_id:-1,lesson_booking_info_id:e,action:t};this.$http.post("/api/lesson/lessonCompletedConfirmationFromStudent/",n.a.stringify(i)).then((function(e){return e.data})).then((function(e){a.loadingView=!1,"success"===e.status?(a.getStudentBookingHistory(),a.snackbar=!0,a.color="green",a.errorMessages="已"+s):"failed"===e.status?(a.confirmTimeView=!0,a.snackbar=!0,a.color="red",a.errorMessages=e.errMsg):(a.confirmTimeView=!0,a.snackbar=!0,a.color="orange",a.errorMessages="發生錯誤，請稍後再試")})).catch((function(e){a.loadingView=!1,a.confirmTimeView=!0,a.snackbar=!0,a.color="orange",a.errorMessages="發生錯誤，請稍後再試",console.log(e)}))},doChangingStatus:function(e,t,s){var a=this;if(confirm("你確定要"+s+"預約嗎?")){this.loadingViewText=s+"預約中",this.loadingView=!0;var i={userID:this.userInfo?this.userInfo.user_id:-1,bookingID:e,bookingStatus:t};this.$http.post("/api/lesson/changingLessonBookingStatus/",n.a.stringify(i)).then((function(e){return e.data})).then((function(e){a.loadingView=!1,"success"===e.status?(a.getStudentBookingHistory(),a.snackbar=!0,a.color="green",a.errorMessages="已成功"+s+"預約"):"failed"===e.status?(a.snackbar=!0,a.color="red",a.errorMessages=e.errMsg):(a.snackbar=!0,a.color="orange",a.errorMessages="發生錯誤，請稍後再試")})).catch((function(e){a.loadingView=!1,a.snackbar=!0,a.color="orange",a.errorMessages="發生錯誤，請稍後再試",console.log(e)}))}},doStudentWriteTeacherReviews:function(){var e=this;if(this.writeReviewsInfo.score_given>0){if(confirm("你確定要送出評價嗎?")){this.writeReviewsView=!1,this.loadingViewText="送出評價中",this.loadingView=!0;var t={userID:this.userInfo?this.userInfo.user_id:-1,lesson_booking_info_id:this.writeReviewsInfo.lesson_booking_info_id,score_given:this.writeReviewsInfo.score_given,remark_given:this.writeReviewsInfo.remark_given,is_teacher_late_for_lesson:this.writeReviewsInfo.is_teacher_late_for_lesson,is_teacher_frivolous_in_lesson:this.writeReviewsInfo.is_teacher_frivolous_in_lesson,is_teacher_incapable:this.writeReviewsInfo.is_teacher_incapable};this.$http.post("/api/lesson/studentWriteTeacherReviews/",n.a.stringify(t)).then((function(e){return e.data})).then((function(t){e.loadingView=!1,"success"===t.status?(e.writeReviewsInfo.lesson_booking_info_id=0,e.getStudentBookingHistory(),e.snackbar=!0,e.color="green",e.errorMessages="已成功送出評價"):"failed"===t.status?(e.writeReviewsView=!0,e.snackbar=!0,e.color="red",e.errorMessages=t.errMsg):(e.writeReviewsView=!0,e.snackbar=!0,e.color="orange",e.errorMessages="發生錯誤，請稍後再試")})).catch((function(t){e.loadingView=!1,e.writeReviewsView=!0,e.snackbar=!0,e.color="orange",e.errorMessages="發生錯誤，請稍後再試",console.log(t)}))}}else this.snackbar=!0,this.color="red",this.errorMessages="尚未填寫評分"},doConnectChatroom:function(e){var t=this;if(localStorage.getItem("token")){var s={userID:this.userInfo?this.userInfo.user_id:-1,chatUserID:e};this.$http.post("/api/chat/checkOrCreateChatroom/",n.a.stringify(s)).then((function(e){return e.data})).then((function(e){"success"===e.status?(t.$store.state.doChatView=!0,t.$store.state.doChatroomID=e.data.chatID):"failed"===e.status?(t.snackbar=!0,t.color="red",t.errorMessages=e.errMsg):(t.snackbar=!0,t.color="orange",t.errorMessages="發生錯誤，請稍後再試")})).catch((function(e){t.snackbar=!0,t.color="orange",t.errorMessages="發生錯誤，請稍後再試",console.log(e)}))}else this.$store.state.dologinView=!0}}},E=P,T=s("2877"),V=Object(T["a"])(E,a,i,!1,null,null,null);t["default"]=V.exports},ab54:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},i=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"user-agreement"}},[s("ol",[s("li",[s("p",{staticClass:"title"},[e._v("認知與接受條款")]),s("ol",[s("li",[s("p",[s("strong",{staticClass:"company"},[e._v("豆沙科技股份有限公司(以下簡稱"),s("strong",{staticClass:"highlight"},[e._v("「Edony A.I.」")])]),e._v(")係依據本服務條款提供Quikok!開課（www.quikok.com）服務 (以下簡稱"),s("strong",{staticClass:"highlight"},[e._v("「本服務」")]),e._v(")。當會員完成"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("之會員註冊手續、或開始使用本服務時，即表示已閱讀、瞭解並同意接受本服務條款之所有內容，並完全接受本服務現有與未來衍生的服務項目及內容。"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("公司有權於任何時間修改或變更本服務條款之內容，修改後的服務條款內容將公佈網站上，"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("將不會個別通知會員，建議會員隨時注意該等修改或變更。會員於任何修改或變更後繼續使用本服務時，視為會員已閱讀、瞭解並同意接受該等修改或變更。若不同意上述的服務條款修訂或更新方式，或不接受本服務條款的其他任一約定，會員應立即停止使用本服務。")])]),s("li",[s("p",[e._v("若會員為未滿二十歲之未成年人，應於會員的家長（或監護人）閱讀、瞭解並同意本約定書之所有內容及其後修改變更後，方得註冊為會員、使用或繼續使用本服務。當會員使用或繼續使用"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("時，即推定會員的家長（或監護人）已閱讀、瞭解並同意接受本約定書之所有內容及其後修改變更。")])]),s("li",[s("p",[e._v("會員及"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("雙方同意使用本服務之所有內容包括意思表示等，以電子文件作為表示方式。")])]),s("li",[s("p",[e._v("為了確保會員之個人資料、隱私及消費者權益之保護，於交易過程中將使用會員之個人資料，謹依個人資料保護法第8條規定告知以下事項：")]),s("ol",[s("li",[s("p",{staticClass:"subtitle"},[e._v("蒐集目的及方式")]),s("p",[e._v("蒐集之目的在於進行行銷業務、消費者、客戶管理與服務、網路購物及其他電子商務服務及與調查、統計與研究分析(法定特定目的項目編號為Ｏ四Ｏ、Ｏ九Ｏ、一四八、一五七)。"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("將藉由加入會員之過程或進行交易之過程來蒐集個人資料。")])]),s("li",[s("p",{staticClass:"subtitle"},[e._v("蒐集之個人資料類別")]),s("p",[s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("於網站內蒐集的個人資料包括：")]),s("ol",[s("li",[s("p",[e._v("C001辨識個人者： 如會員之姓名、地址、電話、電子郵件等資訊。")])]),s("li",[s("p",[e._v("C002辨識財務者： 如信用卡或金融機構帳戶資訊。")])]),s("li",[s("p",[e._v("C011個人描述：例如：性別、出生年月日等。")])])])]),s("li",[s("p",{staticClass:"subtitle"},[e._v("利用期間、地區、對象及方式")]),s("ol",[s("li",[s("p",[e._v("期間：會員當事人要求停止使用或"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("停止提供服務之日為止。")])]),s("li",[s("p",[e._v("地區：會員之個人資料將使用於亞洲地區。")])]),s("li",[s("p",[e._v("利用對象及方式：會員之個人資料蒐集除用於"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("之會員管理、客戶管理之檢索查詢等功能外，亦將利用於辨識身份、金流服務、物流服務、行銷廣宣等。例示如下：")]),s("ol",[s("li",[s("p",[e._v("以會員身份使用"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("提供之各項服務時，於頁面中自動顯示會員資訊。")])]),s("li",[s("p",[e._v("為遂行交易行為：會員對商品或勞務為預約、下標、購買、參與贈獎等之活動或從事其他交易時，關於商品配送、勞務提供、價金給付、回覆客戶之詢問、"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("對會員之詢問、相關售後服務及其他遂行交易所必要之業務。")])]),s("li",[s("p",[e._v("宣傳廣告或行銷等：提供會員各種電子雜誌等資訊、透過電子郵件、郵件、電話等提供與服務有關之資訊。將會員所瀏覽之內容或廣告，依客戶之個人屬性或購買紀錄、"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("網站之瀏覽紀錄等項目，進行個人化作業、會員使用服務之分析、新服務之開發或既有服務之改善等。針對民調、活動、留言版等之意見，或其他服務關連事項，與會員進行聯繫。")])]),s("li",[s("p",[e._v("回覆客戶之詢問：針對會員透過電子郵件、郵件、、傳真、電話或其他任何直接間接連絡方式向"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("所提出之詢問進行回覆。")])]),s("li",[s("p",[e._v("其他業務附隨之事項：附隨於上述a至d.之利用目的而為"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("提供服務所必要之使用。")])]),s("li",[s("p",[e._v("對於各別服務提供者之資訊提供：會員對服務提供者之商品或勞務為預約、下標、購買、參加贈獎活動或申請其他交易時，"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("於該交易所必要之範圍內，得將會員之個人資料檔案提供予服務提供者，並由服務提供者負責管理該個人資料檔案。"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("將以規約課予服務提供者依保障會員隱私權之原則處理個人資料之義務，但無法保證服務提供者會必然遵守。詳細內容，請向各別服務提供者洽詢。")])]),s("li",[s("p",[e._v("其他：提供個別服務時，亦可能於上述規定之目的以外，利用個人資料。此時將在該個別服務之網頁載明其要旨。")])])])])])]),s("li",[s("p",{staticClass:"subtitle"},[e._v("利用期間、地區、對象及方式")]),s("p",[s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("所蒐集個人資料之當事人，依個人資料保護法得對"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("行使以下權利：")]),s("ol",[s("li",[s("p",[e._v("查詢或請求閱覽。")])]),s("li",[s("p",[e._v("請求製給複製本。")])]),s("li",[s("p",[e._v("請求補充或更正。")])]),s("li",[s("p",[e._v("請求停止蒐集、處理或利用。")])]),s("li",[s("p",[e._v("請求刪除。")])])]),s("p",[e._v("會員如欲行使上述權利，可與"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("客服連絡進行申請。")]),s("p",[e._v("請注意！如拒絕提供加入會員所需必要之資料，將可能導致無法享受完整服務或完全無法使用該項服務。")])])])])])]),s("li",[s("p",{staticClass:"title"},[e._v("會員的註冊義務")]),s("p",[e._v("為了能使用本服務，會員同意以下事項：")]),s("ol",[s("li",[s("p",[e._v("依本服務註冊表之提示提供會員本人正確、最新的資料，且不得以第三人之名義註冊為會員。每位會員僅能註冊登錄一個帳號，不可重覆註冊登錄。")])]),s("li",[s("p",[e._v("即時維持並更新會員個人資料，確保其正確性，以獲取最佳之服務。")])]),s("li",[s("p",[e._v("若會員提供任何錯誤或不實的資料、或未按指示提供資料、或欠缺必要之資料、或有重覆註冊帳號等情事時，"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("有權不經事先通知，逕行暫停或終止會員的帳號，並拒絕會員使用本服務之全部或一部。")])])])]),s("li",[s("p",{staticClass:"title"},[s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("隱私權政策")]),s("p",[e._v("關於會員的註冊以及其他特定資料依"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),s("strong",{staticClass:"highlight"},[e._v("「隱私權政策」")]),e._v("受到保護與規範。")])]),s("li",[s("p",{staticClass:"title"},[e._v("會員帳號、密碼及安全")]),s("ol",[s("li",[s("p",[e._v("完成本服務的登記程序之後，會員將取得一個特定之密碼及會員帳號，維持密碼及帳號之機密安全，是會員的責任。任何依照規定方法輸入會員帳號及密碼與登入資料一致時，無論是否由本人親自輸入，均將推定為會員本人所使用，利用該密碼及帳號所進行的一切行動，會員本人應負完全責任。")])]),s("li",[s("p",[e._v("會員同意以下事項：")]),s("ol",[s("li",[s("p",[e._v("會員的密碼或帳號遭到盜用或有其他任何安全問題發生時，會員將立即通知"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")])])]),s("li",[s("p",[e._v("每次連線完畢，均結束會員的帳號使用。")])]),s("li",[s("p",[e._v("會員的帳號、密碼及會員權益均僅供會員個人使用及享有，不得轉借、轉讓他人或與他人合用。")])]),s("li",[s("p",[e._v("帳號及密碼遭盜用、不當使用或其他"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("無法辯識是否為本人親自使用之情況時，對此所致之損害，除證明係因可歸責於"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("之事由所致，"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("將不負任何責任。")])]),s("li",[s("p",[s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("若知悉會員之帳號密碼確係遭他人冒用時，將立即暫停該帳號之使用(含該帳號所生交易之處理)。")])])])])])]),s("li",[s("p",{staticClass:"title"},[e._v("兒童及青少年之保護")]),s("p",[e._v("為確保兒童及青少年使用網路的安全，並避免隱私權受到侵犯，家長（或監護人）應盡到下列義務： 未滿十二歲之兒童使用本服務時時，應全程在旁陪伴，十二歲以上未滿十八歲之青少年使用本服務前亦應斟酌是否給予同意。")])]),s("li",[s("p",{staticClass:"title"},[e._v("使用者的守法義務及承諾")]),s("p",[e._v("會員承諾絕不為任何非法目的或以任何非法方式使用本服務，並承諾遵守中華民國相關法規及一切使用網際網路之國際慣例。會員若係中華民國以外之使用者，並同意遵守所屬國家或地域之法令。會員同意並保證不得利用本服務從事侵害他人權益或違法之行為，包括但不限於：")]),s("ol",[s("li",[s("p",[e._v("公布或傳送任何誹謗、侮辱、具威脅性、攻擊性、不雅、猥褻、不實、違反公共秩序或善良風俗或其他不法之文字、圖片或任何形式的檔案")])]),s("li",[s("p",[e._v("侵害或毀損"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("或他人名譽、隱私權、營業秘密、商標權、著作權、專利權、其他智慧財產權及其他權利")])]),s("li",[s("p",[e._v("違反依法律或契約所應負之保密義務")])]),s("li",[s("p",[e._v("冒用他人名義使用本服務")])]),s("li",[s("p",[e._v("傳輸或散佈電腦病毒")])]),s("li",[s("p",[e._v("從事未經"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("事前授權的商業行為")])]),s("li",[s("p",[e._v("刊載、傳輸、發送垃圾郵件、連鎖信、違法或未經"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("許可之多層次傳銷訊息及廣告等；或儲存任何侵害他人智慧財產權或違反法令之資料")])]),s("li",[s("p",[e._v("對本服務其他用戶或第三人產生困擾、不悅或違反一般網路禮節致生反感之行為")])]),s("li",[s("p",[e._v("其他不符本服務所提供的使用目的之行為或"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("有正當理由認為不適當之行為")])])])]),s("li",[s("p",{staticClass:"title"},[e._v("服務內容之變更與電子報及EDM發送")]),s("ol",[s("li",[s("p",[e._v("會員同意"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("所提供本服務之範圍，"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("均得視業務需要及實際情形，增減、變更或終止相關服務的項目或內容，且無需個別通知會員。")])]),s("li",[s("p",[e._v("會員同意"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("得依實際執行情形，增加、修改或終止相關活動，並選擇最適方式告知會員。")])]),s("li",[s("p",[e._v("會員同意"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("得不定期發送電子報或商品訊息(EDM)至會員所登錄的電子信箱帳號。當會員收到訊息後表示拒絕接受行銷時，"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("將停止繼續發送行銷訊息。")])])])]),s("li",[s("p",{staticClass:"title"},[e._v("服務之停止、中斷")]),s("p",[s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("將依一般合理之技術及方式，維持系統及服務之正常運作。但於以下各項情況時，"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("有權可以停止、中斷提供本服務：")]),s("ol",[s("li",[s("p",[s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("網站電子通信設備進行必要之保養及施工時")])]),s("li",[s("p",[e._v("發生突發性之電子通信設備故障時")])]),s("li",[s("p",[s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("網站申請之電子通信服務被停止，無法提供服務時")])]),s("li",[s("p",[e._v("由於天災等不可抗力之因素或其他不可歸責於"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("致使"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("網站無法提供服務時")])])])]),s("li",[s("p",{staticClass:"title"},[e._v("交易行為")]),s("ol",[s("li",[s("p",[e._v("會員使用本服務進行交易時，應依據"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("所提供之確認課程資訊進行。")])]),s("li",[s("p",[e._v("會員同意使用本服務訂購產品時，於"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("通知確認交易成立前，"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("仍保有不接受訂單或取消媒合之權利。會員向"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("發出訂購通知後，系統將自動發出接受通知，但此通知並非訂單確認通知，關於交易成立與否"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("將另行告知。若因訂單內容之標的商品或服務，其交易條件(包括但不限於規格、內容說明、圖片、)有誤時，"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("仍得於下單後二工作日內拒絕該筆訂單。")])]),s("li",[s("p",[e._v("會員若於使用本服務訂購產品後倘任意退換貨、取消訂單、或有任何"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("認為不適當而造成"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("作業上之困擾或損害之行為，"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("將可視情況採取拒絕交易、暫停取消7-11或客樂得配送付款方式，或永久取消會員資格辦理。若會員訂購之產品若屬於以下情形："),s("ol",{staticClass:"inline"},[s("li",[e._v("預購類商品")]),s("li",[e._v("商品頁顯示無庫存")]),s("li",[e._v("須向供應商調貨")]),s("li",[e._v("轉由廠商出貨")])]),e._v("，因商品交易特性之故，倘商品缺絕、或廠商因故無法順利供貨導致訂單無法成立時，"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("將以最適方式(以電子郵件為主，再輔以電話、郵遞或傳真等)告知。")])]),s("li",[s("p",[s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("會盡善良管理人義務提醒老師該預約學生的時數餘額狀態，但老師本人亦應該注意學生的時數餘額；若有因學生餘額不足、但老師仍延長上課時數的情況發生，"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("無法保證老師能收到超時費用。")])]),s("li",[s("p",[e._v("老師原則上每個月5號（遇假日順延）會收到上個月份的收入，"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("會支付轉帳手續費用(每個月一次)，並代為扣除營業稅等應繳交予政府的相關規稅，以及媒合、平台使用費用等等。")])]),s("li",[s("p",[e._v("老師與學生應該注意課程的預約、進行、收費狀態，"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("會盡善良管理人義務協助師、生注意，但若因不可歸咎於"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("的因素導致師、生權利受到損害，"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("不負責任。")])]),s("li",[s("p",[e._v("學生每個月可以享有一次免手續費的Q幣匯出服務，如果超過一次，"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("將收取匯款手續費用。")])]),s("li",[s("p",[e._v("會員使用本服務進行交易時，得依照消費者保護法之規定行使權利。因會員之交易行為而對本服務條款產生疑義時，應為有利於消費者之解釋。")])])])]),s("li",[s("p",{staticClass:"title"},[e._v("責任之限制與排除")]),s("ol",[s("li",[s("p",[e._v("本服務所提供之各項功能，均依該功能當時之現況提供使用，"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("對於其效能、速度、完整性、可靠性、安全性、正確性等，皆不負擔任何明示或默示之擔保責任。")])]),s("li",[s("p",[s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("並不保證本服務之網頁、伺服器、網域等所傳送的電子郵件或其內容不會含有電腦病毒等有害物；亦不保證郵件、檔案或資料之傳輸儲存均正確無誤不會斷線和出錯等，因各該郵件、檔案或資料傳送或儲存失敗、遺失或錯誤等所致之損害，"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("不負賠償責任。")])])])]),s("li",[s("p",{staticClass:"title"},[e._v("智慧財產權的保護")]),s("ol",[s("li",[s("p",[s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("所使用之軟體或程式、網站上所有內容，包括但不限於著作、圖片、檔案、資訊、資料、網站架構、網站畫面的安排、網頁設計，均由"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("或其他權利人依法擁有其智慧財產權，包括但不限於商標權、專利權、著作權、營業秘密與專有技術等。任何人不得逕自使用、修改、重製、公開播送、改作、散布、發行、公開發表、進行還原工程、解編或反向組譯。若會員欲引用或轉載前述軟體、程式或網站內容，必須依法取得"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("或其他權利人的事前書面同意。尊重智慧財產權是會員應盡的義務，如有違反，會員應對"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("負損害賠償責任（包括但不限於訴訟費用及律師費用等）。")])]),s("li",[s("p",[e._v("在尊重他人智慧財產權之原則下，會員同意在使用"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("之服務時，不作侵害他人智慧財產權之行為。")])]),s("li",[s("p",[e._v("若會員有涉及侵權之情事，"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("可暫停全部或部份之服務，或逕自以取消會員帳號之方式處理。")])])])]),s("li",[s("p",{staticClass:"title"},[e._v("會員對"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("之授權")]),s("p",[e._v("對於會員上載、傳送、輸入或提供之資料，會員同意"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("網站得於合理之範圍內蒐集、處理、保存、傳遞及使用該等資料，以提供使用者其他資訊或服務、或作成會員統計資料、或進行關於網路行為之調查或研究，或為任何之合法使用。 若會員無合法權利得授權他人使用、修改、重製、公開播送、改作、散布、發行、公開發表某資料，並將前述權利轉授權第三人，請勿擅自將該資料上載、傳送、輸入或提供至"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("。任何資料一經會員上載、傳送、輸入或提供至"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("時，視為會員已允許"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("無條件使用、修改、重製、公開播送、改作、散布、發行、公開發表該等資料，並得將前述權利轉授權他人，會員對此絕無異議。會員並應保證"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("使用、修改、重製、公開播送、改作、散布、發行、公開發表、轉授權該等資料，不致侵害任何第三人之智慧財產權，否則應對"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("負損害賠償責任（包括但不限於訴訟費用及律師費用等）。")])]),s("li",[s("p",{staticClass:"title"},[e._v("拒絕或終止會員的使用")]),s("p",[e._v("會員同意"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("得基於維護交易安全之考量，因任何理由，包含但不限於缺乏使用，或違反本服務條款的明文規定及精神，終止會員的密碼、帳號（或其任何部分）或本服務（或其任何部分）之使用，或將本服務內任何"),s("strong",{staticClass:"highlight"},[e._v("「會員內容」")]),e._v("加以移除並刪除。此外，會員同意若本服務（或其任何部分）之使用被終止，"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("對會員或任何第三人均不承擔責任。")])]),s("li",[s("p",{staticClass:"title"},[e._v("會員評價服務條款")]),s("ol",[s("li",[s("p",[e._v("當會員撰寫"),s("strong",{staticClass:"highlight"},[e._v("「會員評鑑」")]),e._v("並上傳送出，或開始使用本項服務功能時，即表示已閱讀、瞭解並同意接受本項服務功能條款約定之所有內容，並完全接受本項服務功能現有與未來衍生的項目及內容。")])]),s("li",[s("p",[s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("得依"),s("strong",{staticClass:"highlight"},[e._v("「會員評鑑」")]),e._v("內容，自行決定這篇"),s("strong",{staticClass:"highlight"},[e._v("「會員評鑑」")]),e._v("是否被刊登或刪除。")])]),s("li",[s("p",[e._v("對於會員上載、傳送、輸入或提供之資料，會員同意並授權"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("網站得於合理之範圍內蒐集、處理、保存、傳遞及使用該等資料，以提供使用者其他資訊或服務、或作成會員統計資料、或進行關於網路行為之調查或研究，或為任何之合法使用。")])]),s("li",[s("p",[e._v("任何資料一經會員上載、傳送、輸入或提供至"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("時，視為會員已允許並授權"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("得無條件使用、修改、重製、公開播送、改作、散布、發行、公開發表該等資料，並得將前述權利轉授權他人，會員對此絕無異議。")])]),s("li",[s("p",[e._v("若會員無合法權利得授權他人使用、修改、重製、公開播送、改作、散布、發行、公開發表某資料，並將前述權利轉授權第三人，請勿擅自將該資料上載、傳送、輸入或提供至"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("。")])]),s("li",[s("p",[s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("得依"),s("strong",{staticClass:"highlight"},[e._v("「會員評鑑」")]),e._v("內容，自行決定，是否將相關資料轉給出版社進一步處理。會員並授權"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("，得以依業務需求，自行決定將"),s("strong",{staticClass:"highlight"},[e._v("「會員評鑑」")]),e._v("之全部或部分內容，轉載刊登於他處。")])]),s("li",[s("p",[e._v("會員所提供之"),s("strong",{staticClass:"highlight"},[e._v("「會員評鑑」")]),e._v("內容，須保證絕無侵犯任何第三人之智慧財產權及其他權利等情事，若有違反，會員需自負所有民刑事責任，並對"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("因此所受之損害，負損害賠償責任。")])]),s("li",[s("p",[e._v("若檢警及司法單位因偵查之需要，會員在此授權"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("得將其個人資料，提供予相關檢警司法機關。")])])])]),s("li",[s("p",{staticClass:"title"},[e._v("準據法與管轄法院")]),s("p",[e._v("本服務條款之解釋與適用，以及與本服務條款有關或會員與"),s("strong",{staticClass:"company"},[e._v("Edony A.I.")]),e._v("間因交易行為而產生之爭議或糾紛，應依照中華民國法律予以處理，並以台灣台北地方法院為第一審管轄法院，但若法律對於管轄法院另有強制規定者，仍應依其規定。")])])])])}],r={name:"UserAgreement",data:function(){return{}},computed:{},watch:{},mounted:function(){},methods:{}},o=r,n=(s("1612"),s("2877")),c=Object(n["a"])(o,a,i,!1,null,null,null);t["default"]=c.exports},acbe:function(e,t,s){},ad73:function(e,t,s){e.exports=s.p+"img/beTeacherM.a758bcdf.jpg"},ae8c:function(e,t,s){e.exports=s.p+"img/searchLesson_hover.a8b8aef9.jpg"},af05:function(e,t,s){e.exports=s.p+"img/chat_icon_small.e896b56a.png"},af8b:function(e,t,s){e.exports=s.p+"img/searchLessonM.3b8824ce.jpg"},b07b:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-content",{staticClass:"bg-grey-full-page",attrs:{id:"lessonmanage"}},[e.pageView?s("div",{staticClass:"container",staticStyle:{"min-height":"calc(100vh - 70px - 145px)"}},[s("p",{staticClass:"mb-5 h3 font-weight-bold",staticStyle:{"word-wrap":"break-word","white-space":"pre-wrap","text-align":"center","font-weight":"500!important"}},[e._v("課程管理")]),s("v-btn",{staticClass:"p-4 h5 bg-button-color lesson-open",on:{click:function(t){return e.$router.push("/lesson/ready/add")}}},[s("v-icon",{staticClass:"mr-2"},[e._v("mdi-plus")]),e._v("立即開課 ")],1),s("div",{staticClass:"lesson-manage-area"},[s("div",{staticClass:"lesson-manage-title"},[s("div",{staticClass:"cursor-no-hover",class:{active:"selling"===e.type},on:{click:function(t){e.type="selling"}}},[s("span",[e._v("上架中")]),s("v-icon",[e._v("mdi-menu-up")])],1),s("div",{staticClass:"cursor-no-hover",class:{active:"draft"===e.type},on:{click:function(t){e.type="draft"}}},[s("span",[e._v("未上架")]),s("v-icon",[e._v("mdi-menu-up")])],1),s("div",{staticClass:"cursor-no-hover",class:{active:"notSelling"===e.type},on:{click:function(t){e.type="notSelling"}}},[s("span",[e._v("已下架")]),s("v-icon",[e._v("mdi-menu-up")])],1),s("div"),s("div",{staticClass:"p-0"},[s("v-btn",{staticClass:"m-auto px-3 py-2 h5 bg-button-color",on:{click:function(t){return e.$router.push("/lesson/ready/add")}}},[s("v-icon",{staticClass:"mr-1"},[e._v("mdi-plus")]),e._v("立即開課 ")],1)],1)]),s("div",{staticClass:"lesson-manage-item"},e._l(e.lessonList,(function(t,a){return s("div",{key:"l"+a,staticClass:"lesson-manage-unit",class:{"d-none":t.lesson_status!==e.type}},[s("div",{staticClass:"bg",style:"background-image: url('"+e.root+t.background_picture_path+"?t="+(new Date).getTime()+"');"}),s("div",{staticClass:"main"},[s("div",{staticClass:"title"},["selling"!==t.lesson_status?s("span",[e._v(e._s(t.lesson_title))]):e._e(),"selling"===t.lesson_status?s("span",{staticClass:"cursor-no-hover",on:{click:function(s){return e.$router.push("/lesson/main/view/"+t.lesson_id)}}},[e._v(e._s(t.lesson_title))]):e._e(),s("span",[e._v("鐘點費NT$"+e._s(t.price_per_hour))])]),s("div",{staticClass:"intro"},[e._v(" "+e._s(t.brief_lesson_intro)+"... ")]),s("div",{staticClass:"program"},e._l(t.sales_package,(function(t,a){return s("span",{key:"s"+a,staticClass:"bg-main-color"},[e._v(e._s(t))])})),0)]),s("div",{staticClass:"action"},[s("v-chip",{staticClass:"cursor-no-hover h5 cursor",on:{click:function(s){return e.$router.push("/lesson/main/preview/"+t.lesson_id)}}},[e._v("預覽")]),s("v-chip",{staticClass:"cursor-no-hover h5 cursor",on:{click:function(s){return e.$router.push("/lesson/ready/edit/"+t.lesson_id)}}},[e._v("編輯")]),"selling"!==t.lesson_status?s("v-chip",{staticClass:"cursor-no-hover h5 cursor",on:{click:function(s){return e.doLessonStatus(t.lesson_id,"selling")}}},[e._v("上架")]):e._e(),"selling"===t.lesson_status?s("v-chip",{staticClass:"cursor-no-hover h5 cursor",on:{click:function(s){return e.doLessonStatus(t.lesson_id,"notSelling")}}},[e._v("下架")]):e._e(),s("v-chip",{staticClass:"cursor-no-hover h5 cursor del",on:{click:function(s){return e.doLessonStatus(t.lesson_id,"donotShow")}}},[e._v("刪除")])],1),s("div",{staticClass:"delete"},[s("v-icon",{staticClass:"cursor",on:{click:function(s){return e.doLessonStatus(t.lesson_id,"donotShow")}}},[e._v("mdi-trash-can")])],1)])})),0)])],1):e._e(),s("v-dialog",{attrs:{persistent:""},model:{value:e.loadingView,callback:function(t){e.loadingView=t},expression:"loadingView"}},[s("p",{staticStyle:{"letter-spacing":"5px","text-align":"center !important",color:"#ffffff","background-color":"#000000dd",padding:"15px",margin:"auto"}},[s("img",{staticStyle:{width:"2rem","margin-bottom":"10px"},attrs:{src:e.loading}}),s("br"),e._v(" "+e._s(e.loadingViewText)+" ")])]),s("v-snackbar",{attrs:{top:!0,color:e.color},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(" "+e._s(e.errorMessages)+" "),s("v-btn",{attrs:{dark:"",flat:""},on:{click:function(t){e.snackbar=!1}}},[e._v(" Close ")])],1)],1)},i=[],r=(s("8e6e"),s("456d"),s("ac6a"),s("bd86")),o=s("4328"),n=s.n(o),c=s("34a4"),l=s.n(c),d=s("2ea1"),u=s.n(d),h=s("750f"),f=s.n(h),g=s("df25"),p=s.n(g),v=s("f8b2"),m=s.n(v),_=s("2f62");function b(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function y(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?b(Object(s),!0).forEach((function(t){Object(r["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):b(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var w={name:"LessonManage",metaInfo:function(){return{title:this.appName+"｜課程管理"}},data:function(){return{loadingView:!1,loadingViewText:"處理中",pageView:!1,type:"selling",prove:l.a,cardBg1:u.a,cardBg2:f.a,cardBg3:p.a,loading:m.a,snackbar:!1,color:"red",errorMessages:"",lessonList:[]}},computed:y({},Object(_["c"])(["root","appName"]),{userInfo:function(){return JSON.parse(localStorage.getItem("user"))}}),watch:{},mounted:function(){var e=this;if(localStorage.getItem("token")){var t={userId:this.userInfo?this.userInfo.user_id:-1,url:this.$route.path};this.$http.post("/api/account/authCheck/",n.a.stringify(t)).then((function(e){return e.data})).then((function(t){"success"===t.status?t.data.authority?e.getLessonListInfo():e.$router.push("/"):localStorage.getItem("user")&&e.$store.dispatch("logout").then((function(){e.$router.go(0)}))})).catch((function(t){console.log(t),localStorage.getItem("user")&&e.$store.dispatch("logout").then((function(){e.$router.go(0)}))}))}else this.$router.push("/")},methods:{test:function(){alert("未開放")},doLessonStatus:function(e,t){var s=this;if(localStorage.getItem("token")){this.loadingViewText=("selling"===t?"上架":"notSelling"===t?"下架":"刪除")+"課程中",this.loadingView=!0;var a={userID:this.userInfo?this.userInfo.user_id:-1,lessonID:e,selling_status:t};this.$http.post("/api/lesson/setLessonStatus/",n.a.stringify(a)).then((function(e){return e.data})).then((function(e){s.loadingView=!1,"success"===e.status?(s.getLessonListInfo(),s.snackbar=!0,s.color="green",s.errorMessages="已成功"+("selling"===t?"上架":"notSelling"===t?"下架":"刪除")+"課程"):"failed"===e.status?(s.snackbar=!0,s.color="red",s.errorMessages=e.errMsg):(s.snackbar=!0,s.color="orange",s.errorMessages="發生錯誤，請稍後再試")})).catch((function(e){s.loadingView=!1,s.snackbar=!0,s.color="orange",s.errorMessages="發生錯誤，請稍後再試",console.log(e)}))}else this.$store.state.dologinView=!0},getLessonListInfo:function(){var e=this;this.$http.get("/api/lesson/getLessonCardsForTheTeacherWhoCreatedThem/?action=showOpenLesson&teacherID=".concat(this.userInfo.user_id,"&userID=").concat(this.userInfo.user_id)).then((function(e){return e.data})).then((function(t){"success"===t.status?"teacher"===e.userInfo.type?(e.pageView=!0,e.lessonList=t.data,e.lessonList.forEach((function(t,s){0===t.background_picture_code?e.lessonList[s].background_picture_path=e.cardBg1:1===t.background_picture_code?e.lessonList[s].background_picture_path=e.cardBg2:2===t.background_picture_code&&(e.lessonList[s].background_picture_path=e.cardBg3)}))):e.$router.push("/"):(t.status,e.$router.go(-1))})).catch((function(t){console.log(t),e.$router.go(-1)}))}}},k=w,x=s("2877"),C=Object(x["a"])(k,a,i,!1,null,null,null);t["default"]=C.exports},b103:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-content",{staticClass:"register",attrs:{id:"info"}},[e.pageView?s("div",{staticClass:"container"},[s("p",{staticClass:"mb-5 h3 font-weight-bold",staticStyle:{"word-wrap":"break-word","white-space":"pre-wrap","text-align":"center","font-weight":"500!important"}},[e._v("會員中心")]),s("hr"),s("p",{staticClass:"h3"},[e._v("編輯個人資料 "),"teacher"===e.type?s("span",{staticClass:"h5 my-1 cursor main-color align-center d-inline-flex",on:{click:function(t){return e.$router.push("/account/profile/"+e.userInfo.user_id)}}},[e._v("(檢視個人公開資料)")]):e._e()]),s("div",{staticClass:"row my-2"},[s("div",{staticClass:"col-xs-12 col-md-4 teacher-info-left"},[s("div",{staticClass:"row p-0 m-0"},[s("div",{staticClass:"col-xs-12 col-md-12",staticStyle:{padding:"0 !important"}},[s("div",{staticClass:"teacher-photo m-auto",style:"background-image: url('"+(e.infoHeadshot[0].url?e.infoHeadshot[0].url:e.root+e.infoPhoto)+"');"},[s("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{id:"headshot-file",type:"file","data-target":"file-uploader",accept:"image/*","persistent-hint":""},on:{change:function(t){return e.setHeadshot(t)}}}),e.infoHeadshot[0].url?e._e():s("v-icon",{staticClass:"cursor upload",on:{click:function(t){return e.uploadHeadshot()}}},[e._v("mdi-camera")]),e.infoHeadshot[0].url?s("v-icon",{staticClass:"cursor cance",on:{click:function(t){return e.cancelHeadshot()}}},[e._v("mdi-close")]):e._e()],1)]),s("div",{staticClass:"col-xs-12 col-md-12",staticStyle:{padding:"0 !important"}},[s("v-text-field",{attrs:{label:"姓名",type:"text",disabled:"","persistent-hint":""},model:{value:e.infoName,callback:function(t){e.infoName=t},expression:"infoName"}})],1),s("div",{staticClass:"col-xs-12 col-md-12",staticStyle:{padding:"0 !important"}},[s("v-text-field",{class:{fail:-1!==e.infoNicknameMessages.indexOf("✖"),pass:-1!==e.infoNicknameMessages.indexOf("✔")},attrs:{hint:e.infoNicknameMessages,label:"暱稱",type:"text","persistent-hint":""},model:{value:e.infoNickname,callback:function(t){e.infoNickname=t},expression:"infoNickname"}})],1),s("div",{staticClass:"col-xs-12 col-md-12",staticStyle:{padding:"0 !important"}},[s("v-text-field",{staticClass:"required",class:{"required-fail":""===e.infoMobile,fail:-1!==e.infoMobileMessages.indexOf("✖"),pass:-1!==e.infoMobileMessages.indexOf("✔")},attrs:{hint:e.infoMobileMessages,label:"手機號碼",type:"text","persistent-hint":""},model:{value:e.infoMobile,callback:function(t){e.infoMobile=t},expression:"infoMobile"}})],1),"teacher"===e.type?s("div",{staticClass:"col-xs-12 col-md-12",staticStyle:{padding:"0 !important"}},[s("v-select",{staticClass:"required",class:{"required-fail":""===e.infoYear,fail:-1!==e.infoYearMessages.indexOf("✖"),pass:-1!==e.infoYearMessages.indexOf("✔")},attrs:{hint:e.infoYearMessages,items:[{text:"1年以內",value:"1年以內"},{text:"1-3年",value:"1-3年"},{text:"3-5年",value:"3-5年"},{text:"5-10年",value:"5-10年"},{text:"10年以上",value:"10年以上"}],label:"教學年資","persistent-hint":""},model:{value:e.infoYear,callback:function(t){e.infoYear=t},expression:"infoYear"}})],1):e._e()])]),s("div",{staticClass:"col-xs-12 col-md-8 teacher-info-right"},[s("div",{staticClass:"row p-0 m-0"},[s("div",{staticClass:"row p-0 m-0 a1col-xs-12 col-md-12"},[s("div",{staticClass:"col-xs-12 col-md-7 col-lg-9",staticStyle:{padding:"0 !important"}},[s("v-text-field",{attrs:{label:"Email (帳號)",type:"email",disabled:"","persistent-hint":""},model:{value:e.infoEmail,callback:function(t){e.infoEmail=t},expression:"infoEmail"}})],1),s("div",{staticClass:"col-xs-12 col-md-5 col-lg-3 text-right"},[s("v-btn",{staticClass:"p-2 h5 bg-button-color v-btn theme--light",on:{click:function(t){return e.doResetPwd()}}},[s("v-icon",{staticClass:"mr-"},[e._v("mdi-backup-restore")]),e._v("修改密碼 ")],1)],1)]),s("div",{staticClass:"col-xs-12 col-md-4",staticStyle:{padding:"0 !important"}},[s("v-select",{attrs:{items:[{text:"生理男",value:"1"},{text:"生理女",value:"0"}],label:"生理性別",disabled:"","persistent-hint":""},model:{value:e.infoGender,callback:function(t){e.infoGender=t},expression:"infoGender"}})],1),s("div",{staticClass:"col-xs-12 col-md-4",staticStyle:{padding:"0 !important"}},[s("v-text-field",{attrs:{label:"生日",type:"text",disabled:"","persistent-hint":""},model:{value:e.infoBirth,callback:function(t){e.infoBirth=t},expression:"infoBirth"}})],1),"student"===e.type?s("div",{staticClass:"col-xs-12 col-md-4",staticStyle:{padding:"0 !important"}},[s("v-text-field",{attrs:{label:"身分",type:"text",disabled:"","persistent-hint":""},model:{value:e.infoRole,callback:function(t){e.infoRole=t},expression:"infoRole"}})],1):e._e(),"teacher"===e.type?s("div",{staticClass:"col-xs-12 col-md-12"},[s("v-textarea",{class:{fail:-1!==e.infoIntroMessages.indexOf("✖"),pass:-1!==e.infoIntroMessages.indexOf("✔")},staticStyle:{padding:"0 !important"},attrs:{hint:e.infoIntroMessages,label:"自我介紹",rows:"5",type:"text","persistent-hint":""},model:{value:e.infoIntro,callback:function(t){e.infoIntro=t},expression:"infoIntro"}})],1):e._e(),"teacher"===e.type?s("div",{staticClass:"col-xs-12 col-md-12"},[s("v-textarea",{class:{fail:-1!==e.infoTagMessages.indexOf("✖"),pass:-1!==e.infoTagMessages.indexOf("✔")},staticStyle:{padding:"0 !important"},attrs:{hint:e.infoTagMessages,label:"授課科目與對象",rows:"5",type:"text","persistent-hint":""},model:{value:e.infoTag,callback:function(t){e.infoTag=t},expression:"infoTag"}})],1):e._e(),"student"===e.type?s("div",{staticClass:"col-xs-12 col-md-12"},[s("v-textarea",{class:{fail:-1!==e.infoNotifiemailMessages.indexOf("✖"),pass:-1!==e.infoNotifiemailMessages.indexOf("✔")},staticStyle:{padding:"0 !important"},attrs:{hint:e.infoNotifiemailMessages,label:"寄送對象",rows:"1",type:"text","persistent-hint":""},model:{value:e.infoNotifiemail,callback:function(t){e.infoNotifiemail=t},expression:"infoNotifiemail"}})],1):e._e()])])]),"teacher"===e.type?s("hr"):e._e(),"teacher"===e.type?s("p",{staticClass:"h3"},[e._v("編輯學經歷與證明")]):e._e(),"teacher"===e.type?s("div",{staticClass:"row"},[s("div",{staticClass:"col-xs-12 col-md-12"},[s("v-text-field",{class:{fail:-1!==e.infoEdu1Messages.indexOf("✖"),pass:-1!==e.infoEdu1Messages.indexOf("✔")},attrs:{hint:e.infoEdu1Messages,label:"最高學歷/科系",type:"text","persistent-hint":""},model:{value:e.infoEdu1,callback:function(t){e.infoEdu1=t},expression:"infoEdu1"}}),s("v-text-field",{class:{fail:-1!==e.infoEdu2Messages.indexOf("✖"),pass:-1!==e.infoEdu2Messages.indexOf("✔")},attrs:{hint:e.infoEdu2Messages,label:"次高學歷/科系",type:"text","persistent-hint":""},model:{value:e.infoEdu2,callback:function(t){e.infoEdu2=t},expression:"infoEdu2"}}),s("v-text-field",{class:{fail:-1!==e.infoEdu3Messages.indexOf("✖"),pass:-1!==e.infoEdu3Messages.indexOf("✔")},attrs:{hint:e.infoEdu3Messages,label:"第三學歷/科系",type:"text","persistent-hint":""},model:{value:e.infoEdu3,callback:function(t){e.infoEdu3=t},expression:"infoEdu3"}}),s("v-text-field",{class:{fail:-1!==e.infoJobMessages.indexOf("✖"),pass:-1!==e.infoJobMessages.indexOf("✔")},attrs:{hint:e.infoJobMessages,label:"現任單位/職位",type:"text","persistent-hint":""},model:{value:e.infoJob,callback:function(t){e.infoJob=t},expression:"infoJob"}}),s("v-text-field",{class:{fail:-1!==e.infoExpMessages.indexOf("✖"),pass:-1!==e.infoExpMessages.indexOf("✔")},attrs:{hint:e.infoExpMessages,label:"其他學經歷或特殊專長",type:"text","persistent-hint":""},model:{value:e.infoExp,callback:function(t){e.infoExp=t},expression:"infoExp"}})],1),e._l(e.uploadIMG,(function(t,a){return s("div",{key:"upload"+a,staticClass:"col-xs-12 col-md-6 col-xl-4 upload-img"},[s("div",{staticClass:"upload-file"},[s("input",{attrs:{id:"file"+a,type:"file","data-target":"file-uploader","persistent-hint":""},on:{change:function(t){return e.setImg(t,a)}}})])])})),s("div",{staticClass:"col-xs-12 col-md-6 col-xl-4 upload-plus"},[s("div",{staticClass:"cursor",on:{click:function(t){return e.addUploadItem()}}},[s("v-icon",{staticClass:"mr-2"},[e._v("mdi-plus")]),e._v("新增上傳項目 ")],1)])],2):e._e(),"teacher"===e.type?s("hr"):e._e(),"teacher"===e.type?s("p",{staticClass:"h3"},[e._v("編輯常態開課時段")]):e._e(),"teacher"===e.type?s("div",{staticClass:"row flex-center"},[s("div",{staticClass:"col-xs-12 col-md-8 col-lg-6"},[e.timeSelectorView?s("TimeSelector",{attrs:{"synchronize-time":!0,"select-time-default":e.infoSelectTime},on:{"res-select-time":e.resSelectTime}}):e._e()],1)]):e._e(),s("div",{staticClass:"row my-5"},[s("div",{staticClass:"col-xs-12 col-md-12 text-center"},["teacher"===e.type?s("v-btn",{staticClass:"mx-4 my-4 p-4 h5 bg-button-color",on:{click:function(t){return e.doSubmitTeacher("preview")}}},[s("v-icon",{staticClass:"mr-2"},[e._v("mdi-eye")]),e._v("儲存並檢視個人公開資料 ")],1):e._e(),"teacher"===e.type?s("v-btn",{staticClass:"mx-4 my-4 p-4 h5 bg-grey-color",on:{click:function(t){return e.doSubmitTeacher()}}},[s("v-icon",{staticClass:"mr-2"},[e._v("mdi-content-save")]),e._v("儲存 ")],1):e._e(),"student"===e.type?s("v-btn",{staticClass:"mx-4 my-4 p-4 h5 bg-button-color",on:{click:function(t){return e.doSubmitStudent()}}},[s("v-icon",{staticClass:"mr-2"},[e._v("mdi-content-save")]),e._v("儲存 ")],1):e._e()],1)]),"student"===e.type?s("hr"):e._e(),"student"===e.type?s("p",{staticClass:"h3"},[e._v("課程收藏")]):e._e(),"student"===e.type?s("div",{staticClass:"row",class:{loading:e.loadingStatus}},[e.loadingStatus||0!==e.resLessonFavoritesList.length?e._e():s("p",{staticClass:"text-center w-100"},[e._v("尚無收藏課程")]),e._l(e.resLessonFavoritesList,(function(t,a){return s("div",{key:"c"+a,staticClass:"item-cube col-xs-12 col-md-6 my-2"},[s("div",{staticClass:"teacher-photo",style:"background-image: url('"+e.root+(""!==t.teacher_thumbnail_path?t.teacher_thumbnail_path:t.is_this_teacher_male?e.boyTeacher:e.girlTeacher)+"');"}),""!==t.best_sale?s("div",{staticClass:"best_sale"},[e._v(e._s(t.best_sale))]):e._e(),s("v-layout",{attrs:{"item-cube-main":"","justify-center":""}},[s("v-flex",{staticClass:"top",style:"background-image: url('"+e.root+(99===t.background_picture_code?t.background_picture_path:0===t.background_picture_code?e.cardBg1:1===t.background_picture_code?e.cardBg2:e.cardBg3)+"');"},[s("div",{style:"color:"+t.title_color+";"},[e._v(e._s(t.big_title))]),s("div",{style:"color:"+t.title_color+";"},[e._v(e._s(t.little_title))]),t.is_this_my_favorite_lesson?e._e():s("v-icon",{staticClass:"cursor",staticStyle:{color:"coral"},on:{click:function(s){return e.doFavorite(t.lessonID,!0)}}},[e._v("mdi-heart-outline")]),t.is_this_my_favorite_lesson?s("v-icon",{staticClass:"cursor",staticStyle:{color:"coral"},on:{click:function(s){return e.doFavorite(t.lessonID,!1)}}},[e._v("mdi-heart")]):e._e()],1),s("v-flex",{staticClass:"middle"},[s("p",{staticClass:"fraction md-font-18 xs-font-10 word-keep-all"},[e._v("評價"+e._s(t.lesson_avg_score)+" ("+e._s(t.lesson_reviewed_times)+")")]),s("span",{staticClass:"xs-font-18 md-font-25 float-left word-keep-all cursor",on:{click:function(s){return e.$router.push("/account/profile/"+t.teacher_auth_id)}}},[e._v(e._s(t.teacher_nickname))]),s("span",{staticClass:"xs-font-18 md-font-25 float-right word-keep-all"},[e._v("鐘點費NT$"+e._s(t.price_per_hour))])]),s("v-flex",{staticClass:"bottom"},[s("div",{staticClass:"text-left mb-2"},[s("p",{staticClass:"title mb-2 cursor",on:{click:function(s){return e.$router.push("/lesson/main/view/"+t.lessonID)}}},[e._v(e._s(t.lesson_title))]),s("p",{staticClass:"prove"},[t.education_is_approved?s("img",{attrs:{src:e.prove}}):e._e(),e._v(e._s(t.education))]),s("p",{staticClass:"prove"},[t.working_experience_is_approved?s("img",{attrs:{src:e.prove}}):e._e(),e._v(e._s(t.working_experience))])]),s("div",{staticClass:"text-left"},[""!==t.highlight_1?s("span",{staticClass:"tag md-font-13 xs-font-9 word-keep-all"},[e._v(e._s(t.highlight_1))]):e._e(),""!==t.highlight_2?s("span",{staticClass:"tag md-font-13 xs-font-9 word-keep-all"},[e._v(e._s(t.highlight_2))]):e._e(),""!==t.highlight_3?s("span",{staticClass:"tag md-font-13 xs-font-9 word-keep-all"},[e._v(e._s(t.highlight_3))]):e._e()])])],1)],1)}))],2):e._e()]):e._e(),s("v-dialog",{attrs:{persistent:""},model:{value:e.loadingView,callback:function(t){e.loadingView=t},expression:"loadingView"}},[s("p",{staticStyle:{"letter-spacing":"5px","text-align":"center !important",color:"#ffffff","background-color":"#000000dd",padding:"15px",margin:"auto"}},[s("img",{staticStyle:{width:"2rem","margin-bottom":"10px"},attrs:{src:e.loading}}),s("br"),e._v(" "+e._s(e.loadingViewText)+" ")])]),s("v-snackbar",{attrs:{top:!0,color:e.color},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(" "+e._s(e.errorMessages)+" "),s("v-btn",{attrs:{dark:"",flat:""},on:{click:function(t){e.snackbar=!1}}},[e._v(" Close ")])],1)],1)},i=[],r=(s("8e6e"),s("456d"),s("7f7f"),s("ac6a"),s("28a5"),s("bd86")),o=s("4328"),n=s.n(o),c=s("1157"),l=s.n(c),d=s("0b2b"),u=s.n(d),h=s("222d"),f=s.n(h),g=s("f6b8"),p=s.n(g),v=s("307a"),m=s.n(v),_=s("34a4"),b=s.n(_),y=s("2ea1"),w=s.n(y),k=s("750f"),x=s.n(k),C=s("df25"),S=s.n(C),I=s("f8b2"),M=s.n(I),O=s("2f62"),P=s("77fc");function E(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function T(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?E(Object(s),!0).forEach((function(t){Object(r["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):E(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var V={name:"Info",components:{TimeSelector:P["default"]},metaInfo:function(){return{title:this.appName+"｜會員中心"}},data:function(){return{loadingView:!1,loadingViewText:"處理中",pageView:!1,timeSelectorView:!1,type:"",boyTeacher:u.a,girlTeacher:f.a,boyStudent:p.a,girlStudent:m.a,prove:b.a,cardBg1:w.a,cardBg2:x.a,cardBg3:S.a,loading:M.a,loadingStatus:!1,snackbar:!1,color:"red",errorMessages:"",infoPhoto:"",infoName:"",infoNickname:"",infoNicknameMessages:"",infoMobile:"",infoMobileMessages:"",infoYear:"",infoYearMessages:"",infoEmail:"",infoGender:"",infoBirth:"",infoRole:"",infoEdu1:"",infoEdu1Messages:"",infoEdu2:"",infoEdu2Messages:"",infoEdu3:"",infoEdu3Messages:"",infoJob:"",infoJobMessages:"",infoExp:"",infoExpMessages:"",infoIntro:"",infoIntroMessages:"",infoTag:"",infoTagMessages:"",infoNotifiemail:"",infoNotifiemailMessages:"",infoSelectTime:"",infoHeadshot:[{file:"",name:"",url:""}],uploadIMG:[{file:"",name:"",url:""},{file:"",name:"",url:""}],resLessonFavoritesList:[]}},computed:T({},Object(O["c"])(["root","snapshot","appName","dologinView","doResetPwdView"]),{userInfo:function(){return JSON.parse(localStorage.getItem("user"))}}),watch:{infoNickname:function(e){this.infoNicknameMessages=""===e?"請輸入您的暱稱":"✔"},infoMobile:function(e){var t=/^09[0-9]{2}-[0-9]{6}$/;""===e?this.infoMobileMessages="✖ 手機號碼不得為空，格式為09XX-XXXXXX":t.test(this.infoMobile)?this.infoMobileMessages="✔":this.infoMobileMessages="✖ 手機號碼輸入格式錯誤，格式為09XX-XXXXXX"},infoYear:function(e){this.infoYearMessages=""===e?"✖ 請選擇您的教學年資":"✔"},infoIntro:function(e){""===this.infoIntro?this.infoIntroMessages="請輸入自我介紹":this.infoIntroMessages="✔"},infoTag:function(e){e.length>500?this.infoTagMessages=e.length+"/500字":0===e.length?this.infoTagMessages="0/500字":this.infoTagMessages="✔ "+e.length+"/500字"},infoNotifiemail:function(e){""===e?this.infoNotifiemailMessages="請用分號『;』隔開Email，如：you@cool.com;we@awesome.com":this.infoNotifiemailArray()?this.infoNotifiemailMessages="✖ Email輸入格式錯誤，格式為：you@cool.com;we@awesome.com":this.infoNotifiemailMessages="✔"},infoEdu1:function(){this.infoEdu1Verify(),this.infoEdu2Verify(),this.infoEdu3Verify(),this.infoJobVerify(),this.infoExpVerify()},infoEdu2:function(){this.infoEdu1Verify(),this.infoEdu2Verify(),this.infoEdu3Verify(),this.infoJobVerify(),this.infoExpVerify()},infoEdu3:function(){this.infoEdu1Verify(),this.infoEdu2Verify(),this.infoEdu3Verify(),this.infoJobVerify(),this.infoExpVerify()},infoJob:function(){this.infoEdu1Verify(),this.infoEdu2Verify(),this.infoEdu3Verify(),this.infoJobVerify(),this.infoExpVerify()},infoExp:function(){this.infoEdu1Verify(),this.infoEdu2Verify(),this.infoEdu3Verify(),this.infoJobVerify(),this.infoExpVerify()}},mounted:function(){var e=this;if(this.infoNicknameMessages=""===this.infoNickname?"請輸入您的暱稱":"✔",this.infoIntroMessages=""===this.infoIntro?"請輸入自我介紹":"✔",this.infoTagMessages=this.infoTag.length+"/500字",this.infoNotifiemailMessages=""===this.infoNotifiemail?"請用分號『;』隔開Email，如：you@cool.com;we@awesome.com":"✔",localStorage.getItem("token")){var t={userId:this.userInfo?this.userInfo.user_id:-1,url:this.$route.path};this.$http.post("/api/account/authCheck/",n.a.stringify(t)).then((function(e){return e.data})).then((function(t){"success"===t.status?t.data.authority?(e.$route.params.type&&(e.type=e.$route.params.type),e.$route.params.type===e.userInfo.type?"teacher"===e.userInfo.type?e.getTeacherInfo():"student"===e.userInfo.type&&e.getStudentInfo():e.$router.push("/")):e.$router.push("/"):localStorage.getItem("user")&&e.$store.dispatch("logout").then((function(){e.$router.go(0)}))})).catch((function(t){console.log(t),localStorage.getItem("user")&&e.$store.dispatch("logout").then((function(){e.$router.go(0)}))}))}else this.$router.push("/")},methods:{test:function(){alert("未開放")},infoNotifiemailArray:function(){var e=!1,t=/^\w+((-\w+)|(\.\w+))*@[A-Za-z0-9]+((\.|-|_)[A-Za-z0-9]+)*\.[A-Za-z]+$/,s=this.infoNotifiemail.split(";");return s.forEach((function(s){t.test(s)||(e=!0)})),e},getTeacherInfo:function(){var e=this;this.infoHeadshot=[{file:"",name:"",url:""}],this.uploadIMG=[{file:"",name:"",url:""},{file:"",name:"",url:""}],this.$http.get("/api/account/returnTeacherProfileForOneselfViewing/?userID=".concat(this.userInfo.user_id)).then((function(e){return e.data})).then((function(t){if("success"===t.status){e.pageView=!0,e.infoEdu1=t.data.education_1,e.infoEdu2=t.data.education_2,e.infoEdu3=t.data.education_3,e.infoJob=t.data.company,e.infoExp=t.data.special_exp,e.infoName=t.data.name,e.infoNickname=t.data.nickname,e.infoEmail=t.data.username,e.infoMobile=t.data.mobile,e.infoBirth=t.data.birth_date,e.infoYear=t.data.tutor_experience,e.infoIntro=t.data.intro,e.infoTag=t.data.subject_type,e.infoGender=t.data.is_male?"1":"0",""!==t.data.thumbnail_dir?e.infoPhoto=t.data.thumbnail_dir+"?t="+(new Date).getTime():t.data.is_male?e.infoPhoto=e.boyTeacher:e.infoPhoto=e.girlTeacher,e.infoSelectTime=t.data.general_available_time,e.timeSelectorView=!0;var s=JSON.parse(localStorage.getItem("user"));s.nickname=e.infoNickname,s.picture=e.infoPhoto,e.$store.state.snapshot=e.infoPhoto,localStorage.setItem("user",JSON.stringify(s))}else t.status,e.$router.push("/")})).catch((function(t){console.log(t),e.$router.push("/")}))},getStudentInfo:function(){var e=this;this.infoHeadshot=[{file:"",name:"",url:""}],this.$http.get("/api/account/returnStudentProfileForOneselfViewing/?userID=".concat(this.userInfo.user_id)).then((function(e){return e.data})).then((function(t){if("success"===t.status){e.pageView=!0,e.infoName=t.data.name,e.infoNickname=t.data.nickname,e.infoEmail=t.data.username,e.infoMobile=t.data.mobile,e.infoBirth=t.data.birth_date,e.infoIntro=t.data.intro,e.infoRole=t.data.role,e.infoNotifiemail=t.data.update_someone_by_email,e.infoGender=t.data.is_male?"1":"0",""!==t.data.thumbnail_dir?e.infoPhoto=t.data.thumbnail_dir+"?t="+(new Date).getTime():t.data.is_male?e.infoPhoto=e.boyStudent:e.infoPhoto=e.girlStudent;var s=JSON.parse(localStorage.getItem("user"));s.nickname=e.infoNickname,s.picture=e.infoPhoto,e.$store.state.snapshot=e.infoPhoto,localStorage.setItem("user",JSON.stringify(s)),e.getLessonFavoritesList()}else t.status,e.$router.push("/")})).catch((function(t){console.log(t),e.$router.push("/")}))},getLessonFavoritesList:function(){var e=this;this.loadingStatus=!0;var t={userID:this.userInfo?this.userInfo.user_id:-1,qty:-1,keywords:"",only_show_ones_favorites:!0,only_show_lessons_by_this_teacher_s_auth_id:-1,ordered_by:"",filtered_by:""};this.$http.post("/api/lesson/getLessonCardsForCommonUsers/",n.a.stringify(t)).then((function(e){return e.data})).then((function(t){e.loadingStatus=!1,"success"===t.status?e.resLessonFavoritesList=t.data:"failed"===t.status?(e.snackbar=!0,e.color="red",e.errorMessages=t.errMsg):(e.snackbar=!0,e.color="orange",e.errorMessages="發生錯誤，請稍後再試")})).catch((function(t){e.snackbar=!0,e.color="orange",e.errorMessages="發生錯誤，請稍後再試",console.log(t)}))},doResetPwd:function(){this.$store.state.doResetPwdView=!0},doFavorite:function(e,t){var s=this;if(localStorage.getItem("token")){var a={userID:this.userInfo?this.userInfo.user_id:-1,lessonID:e,status:t};this.$http.post("/api/lesson/addOrRemoveFavoriteLessons/",n.a.stringify(a)).then((function(e){return e.data})).then((function(e){"success"===e.status?(s.getLessonFavoritesList(),s.snackbar=!0,s.color="green",s.errorMessages="已"+(t?"加入":"移除")+"收藏"):"failed"===e.status?(s.snackbar=!0,s.color="red",s.errorMessages=e.errMsg):(s.snackbar=!0,s.color="orange",s.errorMessages="發生錯誤，請稍後再試")})).catch((function(e){s.snackbar=!0,s.color="orange",s.errorMessages="發生錯誤，請稍後再試",console.log(e)}))}else this.$store.state.dologinView=!0},doSubmitTeacher:function(e){var t=this;if(-1===this.infoNicknameMessages.indexOf("✖")&&-1===this.infoMobileMessages.indexOf("✖")&&""!==this.infoMobile&&-1===this.infoYearMessages.indexOf("✖")&&""!==this.infoYear&&-1===this.infoIntroMessages.indexOf("✖")&&-1===this.infoTagMessages.indexOf("✖")&&-1===this.infoEdu1Messages.indexOf("✖")&&""!==this.infoEdu1&&-1===this.infoEdu2Messages.indexOf("✖")&&-1===this.infoEdu3Messages.indexOf("✖")&&-1===this.infoJobMessages.indexOf("✖")&&-1===this.infoExpMessages.indexOf("✖")){this.loadingViewText="更新會員資料中",this.loadingView=!0;var s=new FormData;s.append("userID",this.userInfo?this.userInfo.user_id:-1),s.append("type","teacher"),s.append("nickname",this.infoNickname||this.infoName),s.append("intro",this.infoIntro),s.append("mobile",this.infoMobile),s.append("tutor_experience",this.infoYear),s.append("subject_type",this.infoTag),s.append("education_1",this.infoEdu1),s.append("education_2",this.infoEdu2),s.append("education_3",this.infoEdu3),s.append("upload_snapshot",this.infoHeadshot[0].file),s.append("company",this.infoJob),s.append("special_exp",this.infoExp),s.append("teacher_general_availabale_time",this.resInfoSelectTime),this.uploadIMG.forEach((function(e){s.append("upload_cer",e.file)})),this.$http.post("/api/account/editTeacherProfile/",s).then((function(e){return e.data})).then((function(s){t.loadingView=!1,"success"===s.status?(t.timeSelectorView=!1,t.snackbar=!0,t.color="green",t.errorMessages="已成功修改資料",scroll(0,0),setTimeout((function(){t.getTeacherInfo()}),500),setTimeout((function(){"preview"===e&&t.$router.push("/account/profile/"+t.userInfo.user_id)}),1e3)):"failed"===s.status?(t.snackbar=!0,t.color="red",t.errorMessages=s.errMsg):(t.snackbar=!0,t.color="orange",t.errorMessages="發生錯誤，請稍後再試")})).catch((function(e){t.loadingView=!1,t.snackbar=!0,t.color="orange",t.errorMessages="發生錯誤，請稍後再試",console.log(e)}))}else this.submit=!1,this.snackbar=!0,this.color="red",this.errorMessages="請再次檢查欄位是否填妥"},doSubmitStudent:function(){var e=this;if(-1===this.infoNicknameMessages.indexOf("✖")&&-1===this.infoMobileMessages.indexOf("✖")&&""!==this.infoMobile&&-1===this.infoNotifiemailMessages.indexOf("✖")){this.loadingViewText="更新會員資料中",this.loadingView=!0;var t=new FormData;t.append("userID",this.userInfo?this.userInfo.user_id:-1),t.append("type","student"),t.append("nickname",this.infoNickname||this.infoName),t.append("intro",this.infoIntro),t.append("mobile",this.infoMobile),t.append("update_someone_by_email",this.infoNotifiemail),t.append("upload_snapshot",this.infoHeadshot[0].file),this.uploadIMG.forEach((function(e){t.append("upload_cer",e.file)})),this.$http.post("/api/account/editStudentProfile/",t).then((function(e){return e.data})).then((function(t){e.loadingView=!1,"success"===t.status?(e.snackbar=!0,e.color="green",e.errorMessages="已成功修改資料",scroll(0,0),setTimeout((function(){e.getStudentInfo()}),500)):"failed"===t.status?(e.snackbar=!0,e.color="red",e.errorMessages=t.errMsg):(e.snackbar=!0,e.color="orange",e.errorMessages="發生錯誤，請稍後再試")})).catch((function(t){e.loadingView=!1,e.snackbar=!0,e.color="orange",e.errorMessages="發生錯誤，請稍後再試",console.log(t)}))}else this.submit=!1,this.snackbar=!0,this.color="red",this.errorMessages="請再次檢查欄位是否填妥"},resSelectTime:function(e){this.resInfoSelectTime=e},uploadHeadshot:function(){this.infoHeadshot[0].url||l()("#headshot-file").click()},cancelHeadshot:function(){this.infoHeadshot[0].file=this.infoHeadshot[0].name=this.infoHeadshot[0].url="",l()("#headshot-file").val("")},setHeadshot:function(e){var t=e.target.files||e.dataTransfer.files;e.srcElement.files.item(0).size>4194304?(l()("#headshot-file").val(""),alert("上傳照片不得超過4MB")):(this.infoHeadshot[0].url=window.URL.createObjectURL(e.srcElement.files.item(0)),this.infoHeadshot[0].file=t[0],this.infoHeadshot[0].name=e.srcElement.files.item(0).name)},cancelHeadshotIMG:function(){this.infoHeadshot[0].file=this.infoHeadshot[0].name=this.infoHeadshot[0].url="",l()("#headshot-file").val("")},setImg:function(e,t){var s=e.target.files||e.dataTransfer.files;e.srcElement.files.item(0).size>10485760?(l()("#file"+t).val(""),alert("每個上傳檔案不得超過10MB")):(this.uploadIMG[t].url=window.URL.createObjectURL(e.srcElement.files.item(0)),this.uploadIMG[t].file=s[0],this.uploadIMG[t].name=e.srcElement.files.item(0).name)},cancelUploadIMG:function(e){this.uploadIMG[e].file=this.uploadIMG[e].name=this.uploadIMG[e].url="",l()("#file"+e).val("")},addUploadItem:function(){this.uploadIMG.push({file:"",name:"",url:""})},infoEdu1Verify:function(){""===this.infoEdu1?this.infoEdu1Messages="✖ 請輸入最高學歷/科系，如正在就讀中請加寫年級。":this.infoEdu1Messages="✔"},infoEdu2Verify:function(){""===this.infoEdu2?this.infoEdu2Messages="請輸入次高學歷/科系，如正在就讀中請加寫年級。":this.infoEdu2Messages="✔"},infoEdu3Verify:function(){""===this.infoEdu3?this.infoEdu3Messages="請輸入第三學歷/科系，如正在就讀中請加寫年級。":this.infoEdu3Messages="✔"},infoJobVerify:function(){""===this.infoJob?this.infoJobMessages="請輸入現任單位/職稱。":this.infoJobMessages="✔"},infoExpVerify:function(){""===this.infoExp?this.infoExpMessages="請輸入其他學經歷或特殊專長。":this.infoExpMessages="✔"}}},j=V,B=s("2877"),$=Object(B["a"])(j,a,i,!1,null,null,null);t["default"]=$.exports},b2ab:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-menu",{attrs:{"close-on-content-click":!1,bottom:"",left:"","min-width":"100","max-width":"100","nudge-left":"12","offset-x":"",transition:"slide-y-transition"}},[s("v-btn",{staticClass:"elevation-0",staticStyle:{top:"100px",left:"unset!important",right:"0px"},attrs:{slot:"activator",dark:"dark"===e.theme,light:"light"===e.theme,color:"grey",fab:"",fixed:"",top:""},slot:"activator"},[s("v-icon",[e._v("mdi-settings")])],1),s("v-card",[s("v-container",{attrs:{"grid-list-xl":""}},[s("v-layout",{attrs:{wrap:""}},[s("v-flex",{attrs:{xs12:""}},[s("v-btn",{attrs:{href:"",target:"_blank",color:"success",block:""}},[e._v(" 1 ")])],1),s("v-flex",{attrs:{xs12:""}},[s("v-btn",{staticClass:"white--text",attrs:{href:"",target:"_blank",color:"primary",block:""}},[e._v(" 2 ")])],1)],1)],1)],1)],1)},i=[],r=(s("8e6e"),s("ac6a"),s("456d"),s("bd86")),o=s("2f62");function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function c(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){Object(r["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var l={data:function(){return{colors:["primary","info","success","warning","danger","general"],images:["https://demos.creative-tim.com/vue-material-dashboard/img/sidebar-1.23832d31.jpg","https://demos.creative-tim.com/vue-material-dashboard/img/sidebar-2.32103624.jpg","https://demos.creative-tim.com/vue-material-dashboard/img/sidebar-3.3a54f533.jpg","https://demos.creative-tim.com/vue-material-dashboard/img/sidebar-4.3b7e38ed.jpg"]}},computed:c({},Object(o["c"])("app",["image","color","theme"]),{color:function(){return this.$store.state.app.color}}),methods:c({},Object(o["b"])("app",["setImage"]),{setColor:function(e){this.$store.state.app.color=e}})},d=l,u=(s("9cbf"),s("2877")),h=Object(u["a"])(d,a,i,!1,null,null,null);t["default"]=h.exports},b983:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-content",{attrs:{id:"checkout"}},[e.pageView?s("div",{staticClass:"container"},[s("p",{staticClass:"mb-5 h3 font-weight-bold",staticStyle:{"word-wrap":"break-word","white-space":"pre-wrap","text-align":"center","font-weight":"500!important"}},[e._v("商品結帳")]),s("hr"),s("p",{staticClass:"h3"},[e._v("商品清單")]),s("div",{staticClass:"product p-3 bg-grey"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-lg-5 col-xs-12 product-info"},[s("img",{staticClass:"product-img",attrs:{src:e.root+e.lessonCardBgPath}}),s("p",{staticClass:"title mt-2 mb-0"},[e._v(e._s(e.lessonName))]),s("p",{staticClass:"h5 mt-0 cursor main-color",on:{click:function(t){return e.$router.push("/account/profile/"+e.teacherId)}}},[e._v(e._s(e.teacherNickname))])]),s("div",{staticClass:"col-lg-7 col-xs-12"},[s("div",{staticClass:"program-list"},[e.lessonSaleTry?s("div",{staticClass:"program",class:{click:"trial"===e.lessonSaleCase}},[s("div",{staticClass:"cursor",on:{click:function(t){e.lessonSaleCase="trial",e.total=e.lessonSaleFeeTry}}},[s("div",{staticClass:"program-name h3 m-0 text-left"},[e._v(" 試課方案 "),s("span",{staticClass:"h6"},[e._v("30分鐘起")])]),s("div",{staticClass:"program-time h3 m-0 text-right"},[s("span",{staticClass:"h6"},[e._v("NT$")]),e._v(" "+e._s(e.lessonSaleFeeTry)+" "),s("span",{staticClass:"h6"},[e._v("/次")])]),s("div",{staticClass:"program-price h3 m-0 text-right"},[s("span",{staticClass:"h6"},[e._v("總計NT$")]),e._v(" "+e._s(e.lessonSaleFeeTry)+" ")])]),s("p",{staticClass:"discount text-danger"},[e._v("每位學生每門課限申請乙次")])]):e._e(),e.lessonSaleUnit?s("div",{staticClass:"program",class:{click:"no_discount"===e.lessonSaleCase}},[s("div",{staticClass:"cursor",on:{click:function(t){e.lessonSaleCase="no_discount",e.total=e.lessonFee}}},[s("div",{staticClass:"program-name h3 m-0 text-left"},[e._v(" 單節購買 "),s("span",{staticClass:"h6"},[e._v("60分鐘")])]),s("div",{staticClass:"program-time h3 m-0 text-right"},[s("span",{staticClass:"h6"},[e._v("NT$")]),e._v(" "+e._s(e.lessonFee)+" "),s("span",{staticClass:"h6"},[e._v("/小時")])]),s("div",{staticClass:"program-price h3 m-0 text-right"},[s("span",{staticClass:"h6"},[e._v("總計NT$")]),e._v(" "+e._s(e.lessonFee)+" ")])]),s("p",{staticClass:"discount"},[e._v("原價小額購買")])]):e._e(),e._l(e.lessonSale,(function(t,a){return s("div",{key:"c"+a,staticClass:"program",class:{click:e.lessonSaleCase===a}},[s("div",{staticClass:"cursor",on:{click:function(s){e.lessonSaleCase=a,e.total=Math.round(t.hour*e.lessonFee*t.off/100)}}},[s("div",{staticClass:"program-name h3 m-0 text-left"},[e._v(" "+e._s(t.hour)+"小時方案 ")]),s("div",{staticClass:"program-time h3 m-0 text-right"},[s("span",{staticClass:"h6"},[e._v("NT$")]),e._v(" "+e._s(Math.round(e.lessonFee*t.off/100))+" "),s("span",{staticClass:"h6"},[e._v("/小時")])]),s("div",{staticClass:"program-price h3 m-0 text-right"},[s("span",{staticClass:"h6"},[e._v("總計NT$")]),e._v(" "+e._s(Math.round(t.hour*e.lessonFee*t.off/100))+" ")])]),s("p",{staticClass:"discount"},[e._v(e._s(t.off.slice(0,1))+e._s(t.off.slice(1,2)>0?t.off.slice(1,2):"")+"折｜共省下NT$"+e._s(t.hour*(e.lessonFee-Math.round(e.lessonFee*t.off/100))))])])}))],2)])])]),s("hr"),s("p",{staticClass:"h3"},[e._v("匯款資訊")]),s("p",{staticClass:"content"},[e._v(" 金額："),s("span",{staticClass:"text-danger"},[e._v("NT$")]),s("span",{staticClass:"h3 text-danger"},[e._v(e._s(e.total))]),s("br"),e._v(" 銀行：國泰世華銀行 板橋分行(代號088)"),s("br"),e._v(" 帳號：012345-411153"),s("br"),e._v(" 戶名：豆沙科技有限公司"),s("br"),s("span",{staticClass:"tips"},[e._v("※完成匯款後，請務必於5天內，於本平台「帳務中心」頁面回填匯款末五碼，以利完成購買程序。")]),s("br"),s("span",{staticClass:"tips"},[e._v("※如發票有開立統編需求，請於匯款後5天內與我們聯絡")]),s("br"),s("span",{staticClass:"tips"},[e._v("※發票將依據國稅局公佈之統一發票中獎號碼自動進行對獎，若您幸運中獎屆時將會透過E-mail通知。")])]),s("div",{staticClass:"row mt-5"},[s("div",{staticClass:"col-xs-12 col-md-12 text-center"},[s("v-btn",{staticClass:"mx-4 mb-4 p-4 h5 bg-button-color",on:{click:function(t){return e.doSubmit()}}},[s("v-icon",{staticClass:"mr-2"},[e._v("mdi-shopping")]),e._v("確認結帳 ")],1)],1)])]):e._e(),s("v-dialog",{attrs:{persistent:""},model:{value:e.loadingView,callback:function(t){e.loadingView=t},expression:"loadingView"}},[s("p",{staticStyle:{"letter-spacing":"5px","text-align":"center !important",color:"#ffffff","background-color":"#000000dd",padding:"15px",margin:"auto"}},[s("img",{staticStyle:{width:"2rem","margin-bottom":"10px"},attrs:{src:e.loading}}),s("br"),e._v(" "+e._s(e.loadingViewText)+" ")])]),s("v-snackbar",{attrs:{top:!0,color:e.color},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(" "+e._s(e.errorMessages)+" "),s("v-btn",{attrs:{dark:"",flat:""},on:{click:function(t){e.snackbar=!1}}},[e._v(" Close ")])],1)],1)},i=[],r=(s("8e6e"),s("456d"),s("7cdf"),s("ac6a"),s("28a5"),s("c5f6"),s("bd86")),o=s("4328"),n=s.n(o),c=s("2ea1"),l=s.n(c),d=s("750f"),u=s.n(d),h=s("df25"),f=s.n(h),g=s("f8b2"),p=s.n(g),v=s("2f62");function m(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function _(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?m(Object(s),!0).forEach((function(t){Object(r["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):m(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var b={name:"Checkout",metaInfo:function(){return{title:this.appName+"｜結帳"}},data:function(){return{loadingViewText:"處理中",pageView:!1,cardBg1:l.a,cardBg2:u.a,cardBg3:f.a,loading:p.a,snackbar:!1,color:"red",errorMessages:"",teacherId:-1,teacherNickname:"",lessonId:"",lessonCardBgPath:"",lessonName:"",lessonFee:0,lessonSaleTry:!1,lessonSaleFeeTry:200,lessonSaleUnit:!1,lessonSale:[],lessonSaleCase:"",total:0}},computed:_({},Object(v["c"])(["root","appName"]),{userInfo:function(){return JSON.parse(localStorage.getItem("user"))},shoppingInfo:function(){return JSON.parse(localStorage.getItem("shopping"))}}),watch:{},mounted:function(){var e=this;if(localStorage.getItem("token")&&"student"===this.userInfo.type){var t={userId:this.userInfo?this.userInfo.user_id:-1,url:this.$route.path};this.$http.post("/api/account/authCheck/",n.a.stringify(t)).then((function(e){return e.data})).then((function(t){"success"===t.status?t.data.authority?e.shoppingInfo.item.length>0?(e.lessonSaleCase=e.shoppingInfo.item[0]?e.shoppingInfo.item[0].lessonSaleCase:"",e.total=e.shoppingInfo.item[0]?e.shoppingInfo.item[0].lessonSalePrice:"",e.getLessonInfo()):(e.snackbar=!0,e.color="red",e.errorMessages="您尚未選購商品",setTimeout((function(){e.$router.push("/")}),3e3)):e.$router.push("/"):localStorage.getItem("user")&&e.$store.dispatch("logout").then((function(){e.$router.go(0)}))})).catch((function(t){console.log(t),localStorage.getItem("user")&&e.$store.dispatch("logout").then((function(){e.$router.go(0)}))}))}else this.$router.push("/")},methods:{test:function(){alert("未開放")},getLessonInfo:function(){var e=this;this.$http.get("/api/lesson/returnLessonDetailsForBrowsing/?action=browsing&lessonID=".concat(this.shoppingInfo.item[0].lessonID,"&userID=").concat(this.userInfo?this.userInfo.user_id:-1)).then((function(e){return e.data})).then((function(t){if("success"===t.status){if(e.pageView=!0,e.lessonCardBg=t.data.background_picture_code,99===t.data.background_picture_code?e.lessonCardBgPath=t.data.background_picture_path:0===t.data.background_picture_code?e.lessonCardBgPath=e.cardBg1:1===t.data.background_picture_code?e.lessonCardBgPath=e.cardBg2:2===t.data.background_picture_code&&(e.lessonCardBgPath=e.cardBg3),e.teacherId=t.data.teacher_auth_id,e.teacherNickname=t.data.teacher_nickname,e.lessonName=t.data.lesson_title,e.lessonFee=t.data.price_per_hour,e.lessonSaleTry=Number(t.data.trial_class_price)>=0,e.lessonSaleFeeTry=Number(t.data.trial_class_price)>=0?Number(t.data.trial_class_price):200,e.lessonSaleUnit=t.data.lesson_has_one_hour_package,""!==t.data.discount_price&&null!==t.data.discount_price){var s=t.data.discount_price.split(";");e.lessonSale=[],s.forEach((function(t,s){if(""!==t){var a=t.split(":");e.lessonSale.push({hour:a[0],off:a[1]})}}))}}else t.status,e.$router.go(-1)})).catch((function(t){console.log(t),e.$router.go(-1)}))},doSubmit:function(){var e=this;this.loadingViewText="訂單處理中",this.loadingView=!0;var t=new FormData;t.append("teacherID",this.teacherId),t.append("lessonID",this.shoppingInfo.item[0].lessonID),t.append("userID",this.userInfo?this.userInfo.user_id:-1),t.append("sales_set",Number.isInteger(this.lessonSaleCase)?this.lessonSale[this.lessonSaleCase].hour+":"+this.lessonSale[this.lessonSaleCase].off:this.lessonSaleCase),t.append("total_amount_of_the_sales_set",this.total),t.append("q_discount",0),this.$http.post("api/account_finance/storageOrder/",t).then((function(e){return e.data})).then((function(t){e.loadingView=!1,"success"===t.status?(e.snackbar=!0,e.color="green",e.errorMessages="訂單已成立，即將自動前往帳務中心",setTimeout((function(){e.$router.push("/account/finance")}),3e3)):"failed"===t.status?(e.snackbar=!0,e.color="red",e.errorMessages=t.errMsg):(e.snackbar=!0,e.color="orange",e.errorMessages="發生錯誤，請稍後再試")})).catch((function(t){e.snackbar=!0,e.color="orange",e.errorMessages="發生錯誤，請稍後再試",console.log(t)}))}}},y=b,w=s("2877"),k=Object(w["a"])(y,a,i,!1,null,null,null);t["default"]=k.exports},bdda:function(e,t,s){},c01f:function(e,t,s){"use strict";var a=s("ef8d"),i=s.n(a);i.a},c559:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container my-0 p-0",attrs:{id:"blog-post"}},[s("div",{domProps:{innerHTML:e._s(e.resBlogPostData)}})])},i=[],r=(s("8e6e"),s("ac6a"),s("456d"),s("bd86")),o=s("4328"),n=s.n(o),c=s("2f62");function l(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function d(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?l(Object(s),!0).forEach((function(t){Object(r["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):l(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var u={name:"BlogPost",metaInfo:function(){return{title:this.appName+"｜Blog文章｜"+this.pageName}},data:function(){return{id:0,resBlogPostData:"",pageName:""}},computed:d({},Object(c["c"])(["appName"]),{userInfo:function(){return JSON.parse(localStorage.getItem("user"))}}),watch:{"$route.fullPath":function(e){this.doMounted()}},mounted:function(){this.doMounted()},methods:{doMounted:function(){var e=this,t=!0;if(localStorage.getItem("token")||t){var s={userId:this.userInfo?this.userInfo.user_id:-1,url:this.$route.path};this.$http.post("/api/account/authCheck/",n.a.stringify(s)).then((function(e){return e.data})).then((function(t){"success"===t.status?t.data.authority&&(e.$route.params.id?(e.id=e.$route.params.id,e.$http.get("/articles/article=".concat(e.id,"/")).then((function(e){return e.data})).then((function(t){e.resBlogPostData=t,setTimeout((function(){e.pageName=document.getElementsByClassName("card-title")[0].innerHTML}),0)}))):e.$router.push("/blog/main")):localStorage.getItem("user")&&e.$store.dispatch("logout").then((function(){e.$router.go(0)}))})).catch((function(t){console.log(t),localStorage.getItem("user")&&e.$store.dispatch("logout").then((function(){e.$router.go(0)}))}))}}}},h=u,f=s("2877"),g=Object(f["a"])(h,a,i,!1,null,null,null);t["default"]=g.exports},c653:function(e,t,s){var a={"./app/mutations.js":"6096","./app/state.js":"2609","./index.js":"2a74"};function i(e){var t=r(e);return s(t)}function r(e){if(!s.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}i.keys=function(){return Object.keys(a)},i.resolve=r,e.exports=i,i.id="c653"},cdc6:function(e,t,s){e.exports=s.p+"img/beTeacher.df78563d.jpg"},cea7:function(e,t,s){},d23b:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-toolbar",{staticClass:"p-0 m-0",attrs:{id:"toolbar",flat:""}},[s("v-container",{attrs:{fluid:"","grid-list-xl":"","p-0":""}},[s("v-layout",{attrs:{container:"","toolbar-layout":"",wrap:"","p-0":"","m-auto":""}},[s("v-flex",{attrs:{"d-flex":"","p-0":"","m-0":"",xs12:"",md12:""}},[s("div",{staticClass:"align-center d-flex flex-grow-0"},[s("img",{staticClass:"nav-logo cursor-no-hover",attrs:{src:e.logo},on:{click:function(t){"/"!==e.$router.history.current.path&&e.$router.push("/")}}}),e.isTeacherCB||e.isStudentCB?s("div",{staticClass:"top-search d-none d-lg-inline-flex d-xl-inline-flex"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.topSearch,expression:"topSearch"}],staticClass:"row-btn-50",attrs:{id:"top-search-input",placeholder:"請輸入科目或老師"},domProps:{value:e.topSearch},on:{keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.$router.push("/lesson/search?q="+(e.topSearch||"")),-1!==e.$router.history.current.path.indexOf("search")&&e.$router.go(0)},input:function(t){t.target.composing||(e.topSearch=t.target.value)}}}),s("button",{staticClass:"top-search-btn btn-50",on:{click:function(t){e.$router.push("/lesson/search?q="+(e.topSearch||"")),-1!==e.$router.history.current.path.indexOf("search")&&e.$router.go(0)}}},[s("v-icon",[e._v("mdi-magnify")])],1)]):e._e()]),s("div",{staticClass:"align-self-center align-items-center justify-end d-none d-lg-inline-flex d-xl-inline-flex"},[e._l(e.Allmenu,(function(t,a){return s("div",{key:a,staticClass:"nav-type d-inline-block position-relative"},[s("router-link",{staticClass:"nav-type-item cursor-no-hover d-inline-flex",attrs:{to:t.to},on:{click:function(s){e.navItem=e.navItem===t.text?"":t.text}}},[s("p",[e._v(e._s(t.text))])]),s("div",{staticClass:"nav-children w-100"},e._l(t.children,(function(t,a){return s("router-link",{key:a,staticClass:"nav-children-item cursor-no-hover d-block",attrs:{to:t.to}},[s("p",{staticClass:"text-center"},[e._v(" "+e._s(t.text)+" ")])])})),1)],1)})),e.loginStatus?e._e():s("div",{staticClass:"toolbar-items cursor-no-hover d-none d-md-flex",on:{click:function(t){e.registerView=!0}}},[s("div",[s("v-icon",{staticClass:"toolbar-icon"},[e._v(" mdi-account-plus ")]),e._v("註冊 ")],1)]),e.loginStatus?e._e():s("div",{staticClass:"toolbar-items cursor-no-hover d-none d-md-flex",on:{click:function(t){e.loginView=!0}}},[s("div",[s("v-icon",{staticClass:"toolbar-icon"},[e._v(" mdi-login ")]),e._v("登入 ")],1)]),e.loginStatus?s("div",{staticClass:"nav-type d-inline-flex position-relative",staticStyle:{width:"100px",height:"70px","justify-content":"center","align-items":"center",padding:"0 25px"}},[s("div",{staticStyle:{width:"50px",height:"50px","background-size":"cover","background-position":"50%","border-radius":"50%"},style:"background-image: url('"+e.root+e.snapshot+"');"}),"teacher"===e.userInfo.type?s("div",{staticClass:"nav-children w-100"},[e._l(e.teacherMenu,(function(t,a){return s("router-link",{key:a,staticClass:"nav-children-item cursor-no-hover d-block",class:{"bg-white-select-color":"white"===t.class},attrs:{to:t.to}},[s("p",{staticClass:"text-center"},[e._v(" "+e._s(t.text)+" ")])])})),s("a",{staticClass:"nav-children-item cursor-no-hover d-block",on:{click:function(t){return e.logout()}}},[s("p",{staticClass:"text-center"},[e._v(" 登出 ")])])],2):e._e(),"student"===e.userInfo.type?s("div",{staticClass:"nav-children w-100"},[e._l(e.studentMenu,(function(t,a){return s("router-link",{key:a,staticClass:"nav-children-item cursor-no-hover d-block",class:{"bg-white-select-color":"white"===t.class},attrs:{to:t.to}},[s("p",{staticClass:"text-center"},[e._v(" "+e._s(t.text)+" "),"/account/finance"===t.to&&"white"===t.class?s("span",[e._v(e._s(e.deposit))]):e._e()])])})),s("a",{staticClass:"nav-children-item cursor-no-hover d-block",on:{click:function(t){return e.logout()}}},[s("p",{staticClass:"text-center"},[e._v("登出")])])],2):e._e()]):e._e()],2),s("div",{staticClass:"toolbar-menu justify-end d-lg-none d-xl-none"},[s("v-icon",{staticClass:"toolbar-menu-icon",class:{"toolbar-menu-open":e.responsive},on:{click:function(t){e.responsive=!e.responsive}}},[e._v(" mdi-menu ")])],1),s("div",{staticClass:"toolbar-menu-area d-lg-none d-xl-none",class:{"toolbar-menu-area-open":e.responsive}},[e.loginStatus?e._e():s("div",{staticClass:"menu-type"},[s("div",{staticClass:"menu-type-item",on:{click:function(t){e.responsive=!e.responsive,e.loginView=!0}}},[s("p",[s("v-icon",{staticClass:"toolbar-icon"},[e._v(" mdi-login ")]),e._v("登 入 ")],1)])]),e.loginStatus?e._e():s("div",{staticClass:"menu-type"},[s("div",{staticClass:"menu-type-item cursor-no-hover",on:{click:function(t){e.responsive=!e.responsive,e.registerView=!0}}},[s("p",{staticStyle:{padding:"10px 20px !important",margin:"0 !important","font-weight":"bold !important","font-size":"20px !important",color:"#ffffff","word-spacing":"35px"}},[s("v-icon",{staticClass:"toolbar-icon",staticStyle:{color:"#ffffff","margin-right":"5px","line-height":"25px"}},[e._v(" mdi-account-plus ")]),e._v("註 冊 ")],1)])]),e.loginStatus?s("div",{staticClass:"menu-type d-flex",staticStyle:{"justify-content":"center","align-items":"center",padding:"10px"}},[s("div",{staticStyle:{"max-width":"75px",height:"75px","background-size":"cover","background-position":"50%","border-radius":"50%"},style:"background-image: url('"+e.root+e.snapshot+"');"})]):e._e(),e.loginStatus?s("div",{staticClass:"menu-type"},[s("div",{staticClass:"menu-type-item cursor-no-hover",on:{click:function(t){e.responsive=!e.responsive,e.logout()}}},[s("p",{staticStyle:{padding:"10px 20px !important",margin:"0 !important","font-weight":"bold !important","font-size":"20px !important",color:"#ffffff","word-spacing":"35px"}},[s("v-icon",{staticClass:"toolbar-icon",staticStyle:{color:"#ffffff","margin-right":"5px","line-height":"25px"}},[e._v(" mdi-logout ")]),e._v("登 出 ")],1)]),"teacher"===e.userInfo.type?s("div",{staticClass:"menu-children"},e._l(e.teacherMenu,(function(t,a){return s("router-link",{key:a,staticClass:"menu-children-item",class:{"bg-white-select-color":"white"===t.class},attrs:{to:t.to}},[s("p",[e._v(" "+e._s(t.text)+" "),s("v-icon",{staticClass:"toolbar-icon"},[e._v(" mdi-menu-right ")])],1)])})),1):e._e(),"student"===e.userInfo.type?s("div",{staticClass:"menu-children"},e._l(e.studentMenu,(function(t,a){return s("router-link",{key:a,staticClass:"menu-children-item",class:{"bg-white-select-color":"white"===t.class},attrs:{to:t.to}},[s("p",[e._v(" "+e._s(t.text)+" "),"/account/finance"===t.to&&"white"===t.class?s("span",[e._v(e._s(e.deposit))]):e._e(),s("v-icon",{staticClass:"toolbar-icon"},[e._v(" mdi-menu-right ")])],1)])})),1):e._e()]):e._e(),e._l(e.Allmenu,(function(t,a){return s("div",{key:a,staticClass:"menu-type"},[s("router-link",{staticClass:"menu-type-item",attrs:{to:t.to},on:{click:function(s){e.responsive=!e.responsive,e.navItem=e.navItem===t.text?"":t.text}}},[s("p",[s("v-icon",{staticClass:"toolbar-icon"},[e._v(" mdi-rhombus-medium ")]),e._v(e._s(t.text)+" ")],1)]),s("div",{staticClass:"menu-children"},e._l(t.children,(function(t,a){return s("router-link",{key:a,staticClass:"menu-children-item",attrs:{to:t.to}},[s("p",[e._v(" "+e._s(t.text)+" "),s("v-icon",{staticClass:"toolbar-icon"},[e._v(" mdi-menu-right ")])],1)])})),1)],1)}))],2)])],1),s("v-dialog",{attrs:{"max-width":"95%",width:"285px",persistent:""},model:{value:e.registerView,callback:function(t){e.registerView=t},expression:"registerView"}},[s("v-card",{staticStyle:{margin:"0 auto"},attrs:{"max-width":"100%"}},[s("v-card-text",{staticClass:"p-0"},[s("v-alert",{staticClass:"border-0",attrs:{color:"bg-main-color"},model:{value:e.registerView,callback:function(t){e.registerView=t},expression:"registerView"}},[s("strong",{staticClass:"h4"},[e._v("請選擇註冊類別")]),s("v-icon",{staticClass:"cursor float-right text-white",on:{click:function(t){e.registerView=!1}}},[e._v(" mdi-close ")])],1)],1),s("v-card-actions",{staticStyle:{padding:"25px 0","justify-content":"center"}},[s("v-btn",{staticClass:"hover-main-color mx-2 md-font-16",on:{click:function(t){e.doGtagsEvent("目錄選單-按鈕：註冊-學生","直接註冊"),e.registerView=!1,"/account/register/student"!==e.$router.history.current.path&&e.$router.push("/account/register/student")}}},[e._v(" 學生/家長 ")]),s("v-btn",{staticClass:"hover-main-color mx-2 md-font-16",on:{click:function(t){e.doGtagsEvent("目錄選單-按鈕：註冊-老師","直接註冊"),e.registerView=!1,"/account/register/teacher"!==e.$router.history.current.path&&e.$router.push("/account/register/teacher")}}},[e._v(" 老師 ")])],1)],1)],1),s("v-dialog",{attrs:{"max-width":"95%",width:"285px",persistent:""},model:{value:e.loginView,callback:function(t){e.loginView=t},expression:"loginView"}},[s("v-card",{staticStyle:{margin:"0 auto"},attrs:{"max-width":"100%"}},[s("v-card-text",{staticClass:"p-0"},[s("v-alert",{staticClass:"border-0",attrs:{color:"bg-main-color"},model:{value:e.loginView,callback:function(t){e.loginView=t},expression:"loginView"}},[s("strong",{staticClass:"h4"},[e._v("登入")]),s("v-icon",{staticClass:"cursor float-right text-white",on:{click:function(t){e.loginView=!1}}},[e._v(" mdi-close ")])],1)],1),s("v-card-actions",{staticStyle:{"justify-content":"center","flex-flow":"column"}},[s("div",{staticClass:"w-100"},[s("div",[s("v-text-field",{class:{fail:-1!==e.userEmailFailMsg().indexOf("✖"),pass:"✔"===e.userEmailFailMsg()},attrs:{hint:e.userEmailFailMsg(),label:"*Email (帳號)",type:"email","persistent-hint":""},model:{value:e.userEmail,callback:function(t){e.userEmail=t},expression:"userEmail"}})],1),s("div",[s("v-text-field",{class:{fail:-1!==e.userPwdFailMsg().indexOf("✖"),pass:"✔"===e.userPwdFailMsg()},attrs:{hint:e.userPwdFailMsg(),label:"*密碼",type:"password","persistent-hint":""},model:{value:e.userPwd,callback:function(t){e.userPwd=t},expression:"userPwd"}})],1)]),s("div",{staticClass:"mt-3 text-center"},[s("v-btn",{staticClass:"hover-main-color mx-2 md-font-16",on:{click:function(t){return e.login()}}},[e._v(" 登入 ")]),s("v-btn",{staticClass:"hover-main-color mx-2 md-font-16",on:{click:function(t){e.loginView=!1,e.registerView=!0}}},[e._v(" 註冊 ")]),s("br"),s("br"),s("span",{staticClass:"mx-3 main-color cursor",on:{click:function(t){e.loginView=!1,e.forgetPwdView=!0}}},[e._v(" 忘記密碼 ")])],1)])],1)],1),s("v-dialog",{attrs:{"max-width":"95%",width:"285px",persistent:""},model:{value:e.forgetPwdView,callback:function(t){e.forgetPwdView=t},expression:"forgetPwdView"}},[s("v-card",{staticStyle:{margin:"0 auto"},attrs:{"max-width":"100%"}},[s("v-card-text",{staticClass:"p-0"},[s("v-alert",{staticClass:"border-0",attrs:{color:"bg-main-color"},model:{value:e.forgetPwdView,callback:function(t){e.forgetPwdView=t},expression:"forgetPwdView"}},[s("strong",{staticClass:"h4"},[e._v("忘記密碼")]),s("v-icon",{staticClass:"cursor float-right text-white",on:{click:function(t){e.forgetPwdView=!1}}},[e._v(" mdi-close ")])],1)],1),s("v-card-actions",{staticStyle:{"justify-content":"center","flex-flow":"column"}},[s("div",{staticClass:"w-100"},[s("div",[s("v-text-field",{class:{fail:-1!==e.userEmailFailMsg().indexOf("✖"),pass:"✔"===e.userEmailFailMsg()},attrs:{hint:e.userEmailFailMsg(),label:"*Email (帳號)",type:"email","persistent-hint":""},model:{value:e.userEmail,callback:function(t){e.userEmail=t},expression:"userEmail"}})],1),s("div",[s("v-text-field",{class:{fail:-1!==e.userBirthFailMsg().indexOf("✖"),pass:"✔"===e.userBirthFailMsg()},attrs:{hint:e.userBirthFailMsg(),label:"*生日",type:"text","persistent-hint":""},model:{value:e.userBirth,callback:function(t){e.userBirth=t},expression:"userBirth"}})],1),s("div",[s("v-text-field",{class:{fail:-1!==e.userMobileFailMsg().indexOf("✖"),pass:"✔"===e.userMobileFailMsg()},attrs:{hint:e.userMobileFailMsg(),label:"*手機",type:"text","persistent-hint":""},model:{value:e.userMobile,callback:function(t){e.userMobile=t},expression:"userMobile"}})],1)]),s("div",{staticClass:"mt-3 text-center"},[s("v-btn",{staticClass:"hover-main-color mx-2 md-font-16",on:{click:function(t){return e.identity()}}},[e._v(" 身份驗證 ")]),s("br"),s("br"),s("span",{staticClass:"mx-3 main-color cursor",on:{click:function(t){e.forgetPwdView=!1,e.registerView=!0}}},[e._v("立即註冊 ")]),s("span",{staticClass:"mx-3 main-color cursor",on:{click:function(t){e.forgetPwdView=!1,e.loginView=!0}}},[e._v("返回登入 ")])],1)])],1)],1),s("v-dialog",{attrs:{"max-width":"95%",width:"285px",persistent:""},model:{value:e.resetForgetPwdView,callback:function(t){e.resetForgetPwdView=t},expression:"resetForgetPwdView"}},[s("v-card",{staticStyle:{margin:"0 auto"},attrs:{"max-width":"100%"}},[s("v-card-text",{staticClass:"p-0"},[s("v-alert",{staticClass:"border-0",attrs:{color:"bg-main-color"},model:{value:e.resetForgetPwdView,callback:function(t){e.resetForgetPwdView=t},expression:"resetForgetPwdView"}},[s("strong",{staticClass:"h4"},[e._v("重置密碼")]),s("v-icon",{staticClass:"cursor float-right text-white",on:{click:function(t){e.resetForgetPwdView=!1}}},[e._v(" mdi-close ")])],1)],1),s("v-card-actions",{staticStyle:{"justify-content":"center","flex-flow":"column"}},[s("div",{staticClass:"w-100"},[s("div",[s("v-text-field",{class:{fail:-1!==e.userResetPwdFailMsg().indexOf("✖"),pass:"✔"===e.userResetPwdFailMsg()},attrs:{hint:e.userResetPwdFailMsg(),label:"*密碼",type:"password","persistent-hint":""},model:{value:e.userResetPwd,callback:function(t){e.userResetPwd=t},expression:"userResetPwd"}})],1),s("div",[s("v-text-field",{class:{fail:-1!==e.userResetConfirmPwdFailMsg().indexOf("✖"),pass:"✔"===e.userResetConfirmPwdFailMsg()},attrs:{hint:e.userResetConfirmPwdFailMsg(),label:"*確認密碼",type:"password","persistent-hint":""},model:{value:e.userResetConfirmPwd,callback:function(t){e.userResetConfirmPwd=t},expression:"userResetConfirmPwd"}})],1)]),s("div",{staticClass:"my-3 text-center"},[s("v-btn",{staticClass:"hover-main-color mx-2 md-font-16",on:{click:function(t){return e.doForgetResetPwd()}}},[e._v(" 重置密碼 ")])],1)])],1)],1),s("v-dialog",{attrs:{"max-width":"95%",width:"285px",persistent:""},model:{value:e.resetPwdView,callback:function(t){e.resetPwdView=t},expression:"resetPwdView"}},[s("v-card",{staticStyle:{margin:"0 auto"},attrs:{"max-width":"100%"}},[s("v-card-text",{staticClass:"p-0"},[s("v-alert",{staticClass:"border-0",attrs:{color:"bg-main-color"},model:{value:e.resetPwdView,callback:function(t){e.resetPwdView=t},expression:"resetPwdView"}},[s("strong",{staticClass:"h4"},[e._v("重設密碼")]),s("v-icon",{staticClass:"cursor float-right text-white",on:{click:function(t){e.resetPwdView=!1}}},[e._v(" mdi-close ")])],1)],1),s("v-card-actions",{staticStyle:{"justify-content":"center","flex-flow":"column"}},[s("div",{staticClass:"w-100"},[s("div",[s("v-text-field",{class:{fail:-1!==e.userOldPwdFailMsg().indexOf("✖"),pass:"✔"===e.userOldPwdFailMsg()},attrs:{hint:e.userOldPwdFailMsg(),label:"*目前密碼",type:"password","persistent-hint":""},model:{value:e.userOldPwd,callback:function(t){e.userOldPwd=t},expression:"userOldPwd"}})],1),s("div",[s("v-text-field",{class:{fail:-1!==e.userNewPwdFailMsg().indexOf("✖"),pass:"✔"===e.userNewPwdFailMsg()},attrs:{hint:e.userNewPwdFailMsg(),label:"*新密碼",type:"password","persistent-hint":""},model:{value:e.userNewPwd,callback:function(t){e.userNewPwd=t},expression:"userNewPwd"}})],1),s("div",[s("v-text-field",{class:{fail:-1!==e.userNewConfirmPwdFailMsg().indexOf("✖"),pass:"✔"===e.userNewConfirmPwdFailMsg()},attrs:{hint:e.userNewConfirmPwdFailMsg(),label:"*確認新密碼",type:"password","persistent-hint":""},model:{value:e.userNewConfirmPwd,callback:function(t){e.userNewConfirmPwd=t},expression:"userNewConfirmPwd"}})],1)]),s("div",{staticClass:"my-3 text-center"},[s("v-btn",{staticClass:"hover-main-color mx-2 md-font-16",on:{click:function(t){return e.doResetPwd()}}},[e._v(" 重設密碼 ")])],1)])],1)],1),s("v-dialog",{attrs:{persistent:""},model:{value:e.loadingView,callback:function(t){e.loadingView=t},expression:"loadingView"}},[s("p",{staticStyle:{"letter-spacing":"5px","text-align":"center !important",color:"#ffffff","background-color":"#000000dd",padding:"15px",margin:"auto"}},[s("img",{staticStyle:{width:"2rem","margin-bottom":"10px"},attrs:{src:e.loading}}),s("br"),e._v(" "+e._s(e.loadingViewText)+" ")])])],1),s("v-snackbar",{attrs:{top:!0,color:e.color},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(" "+e._s(e.errorMessages)+" "),s("v-btn",{attrs:{dark:"",flat:""},on:{click:function(t){e.snackbar=!1}}},[e._v(" Close ")])],1)],1)},i=[],r=(s("8e6e"),s("ac6a"),s("456d"),s("bd86")),o=s("4328"),n=s.n(o),c=s("0b26"),l=s.n(c),d=s("4ffd"),u=s.n(d),h=s("0b2b"),f=s.n(h),g=s("222d"),p=s.n(g),v=s("f6b8"),m=s.n(v),_=s("307a"),b=s.n(_),y=s("f8b2"),w=s.n(y),k=s("2f62");function x(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function C(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?x(Object(s),!0).forEach((function(t){Object(r["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):x(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var S={data:function(){return{logo:u.a,loadingView:!1,loadingViewText:"處理中",loading:w.a,boyTeacher:f.a,girlTeacher:p.a,boyStudent:m.a,girlStudent:b.a,snackbar:!1,color:"red",errorMessages:"",topSearch:"",registerView:!1,loginView:!1,forgetPwdView:!1,resetForgetPwdView:!1,resetPwdView:!1,responsive:!1,userID:"",userEmail:"",userEmailVerify:!1,userPwd:"",userPwdVerify:!1,userBirth:"",userBirthVerify:!1,userMobile:"",userMobileVerify:!1,userResetPwd:"",userResetPwdVerify:!1,userResetConfirmPwd:"",userResetConfirmPwdVerify:!1,userOldPwd:"",userOldPwdVerify:!1,userNewPwd:"",userNewPwdVerify:!1,userNewConfirmPwd:"",userNewConfirmPwdVerify:!1,loginError:!1,verifyError:!1,resetError:!1,modifyError:!1,loginStatus:!1,userInfo:{},responsiveInput:!1,navItem:"",teacherMenu:[{to:"/lesson/ready/add",icon:"",text:"我要開課",class:"white"},{to:"/account/info/teacher",icon:"",text:"會員中心"},{to:"/account/finance",icon:"",text:"帳務中心"},{to:"/account/reservation",icon:"",text:"預約管理"},{to:"/account/lesson",icon:"",text:"課程管理"}],studentMenu:[{to:"/account/finance",icon:"",text:"QB",class:"white"},{to:"/account/info/student",icon:"",text:"會員中心"},{to:"/account/finance",icon:"",text:"帳務中心"},{to:"/account/study",icon:"",text:"學習歷程"}],Allmenu:[{to:"/blog/main",icon:"mdi-circle",text:"blog"}]}},computed:C({},Object(k["c"])(["root","snapshot","appName","deposit","isProduction","dologinView","doResetPwdView"]),{isTeacherCB:function(){return!!this.userInfo.group&&this.userInfo.group.indexOf("test_teacher")>-1},isStudentCB:function(){return!!this.userInfo.group&&this.userInfo.group.indexOf("test_student")>-1}}),watch:{"$route.fullPath":function(e){this.responsive=!1;var t=this.$route.query.q;this.topSearch=t},dologinView:function(e){this.loginView=e},loginView:function(e){this.$store.state.dologinView=e},doResetPwdView:function(e){this.resetPwdView=e},resetPwdView:function(e){this.$store.state.doResetPwdView=e}},mounted:function(){var e=this;localStorage.getItem("token")?(this.loginStatus=!0,this.userInfo=JSON.parse(localStorage.getItem("user")),this.$store.state.snapshot=JSON.parse(localStorage.getItem("user")).picture+"?t="+(new Date).getTime()):localStorage.getItem("user")&&this.$store.dispatch("logout").then((function(){e.$router.go(0)}));var t=this.$route.query.q;this.topSearch=t,this.$store.state.root=this.$http.defaults.baseURL},methods:{doGtagsEvent:function(e,t,s){this.isProduction&&this.$gtag.event(e,{description:t,remarks:t,page_path:this.$route.fullPath,hostname:this.root,user_id:this.userInfo?this.userInfo.user_id:-1})},userEmailFailMsg:function(){return this.loginError&&""===this.userEmail?"✖ 請輸入帳號(Email)":""===this.userEmail?(this.userEmailVerify=!0,""):(this.userEmailVerify=!1,"")},userPwdFailMsg:function(){return this.loginError&&""===this.userPwd?"✖ 請輸入密碼":""===this.userPwd?(this.userPwdVerify=!0,""):(this.userPwdVerify=!1,"")},userBirthFailMsg:function(){var e=/^[0-9]{4}-[0-9]{2}-[0-9]{2}$/;return""===this.userBirth||e.test(this.userBirth)?""!==this.userBirth?(this.userBirthVerify=!1,"✔"):this.verifyError&&""===this.userBirth?(this.userBirthVerify=!0,"✖ 請輸入您的生日，格式為1900-01-01"):(this.userBirthVerify=!0,"請輸入您的生日，格式為1900-01-01"):(this.userBirthVerify=!0,"✖ 生日輸入格式錯誤，格式為1900-01-01")},userMobileFailMsg:function(){var e=/^09[0-9]{2}-[0-9]{6}$/;return this.verifyError&&""===this.userMobile?(this.userMobileVerify=!0,"✖ 請輸入您的手機號碼，格式為09XX-XXXXXX"):""===this.userMobile?(this.userMobileVerify=!0,"請輸入您的手機號碼，格式為09XX-XXXXXX"):e.test(this.userMobile)?(this.userMobileVerify=!1,"✔"):(this.userMobileVerify=!0,"✖ 手機號碼格式錯誤，格式為09XX-XXXXXX")},userResetPwdFailMsg:function(){return this.resetError&&""===this.userResetPwd?(this.regResetPwdVerify=!0,"✖ 請輸入密碼"):""===this.userResetPwd?(this.userResetPwdVerify=!0,"請輸入密碼"):this.userResetPwd.length<8?(this.regResetPwdVerify=!0,"✖ 密碼請勿少於8個字"):(this.userResetPwdVerify=!1,"✔")},userResetConfirmPwdFailMsg:function(){return this.resetError&&""===this.userResetConfirmPwd?(this.userResetConfirmPwdVerify=!0,"✖ 請再次輸入密碼"):""===this.userResetConfirmPwd?(this.userResetConfirmPwdVerify=!0,"請再次輸入密碼"):this.userResetConfirmPwd.length<8?(this.userResetConfirmPwdVerify=!0,"✖ 密碼請勿少於8個字"):this.userResetPwd!==this.userResetConfirmPwd?(this.userResetConfirmPwdVerify=!0,"✖ 密碼輸入不一致"):(this.userResetConfirmPwdVerify=!1,"✔")},userOldPwdFailMsg:function(){return this.modifyError&&""===this.userOldPwd?(this.userOldPwdVerify=!0,"✖ 請輸入目前密碼"):""===this.userOldPwd?(this.userOldPwdVerify=!0,"請輸入目前密碼"):(this.userOldPwdVerify=!1,"✔")},userNewPwdFailMsg:function(){return this.modifyError&&""===this.userNewPwd?(this.userNewPwdVerify=!0,"✖ 請輸入新密碼"):""===this.userNewPwd?(this.userNewPwdVerify=!0,"請輸入新密碼"):this.userNewPwd.length<8?(this.userNewPwdVerify=!0,"✖ 新密碼請勿少於8個字"):(this.userNewPwdVerify=!1,"✔")},userNewConfirmPwdFailMsg:function(){return this.modifyError&&""===this.userNewConfirmPwd?(this.userNewConfirmPwdVerify=!0,"✖ 請再次輸入新密碼"):""===this.userNewConfirmPwd?(this.userNewConfirmPwdVerify=!0,"請再次輸入新密碼"):this.userNewConfirmPwd.length<8?(this.userNewConfirmPwdVerify=!0,"✖ 新密碼請勿少於8個字"):this.userNewPwd!==this.userNewConfirmPwd?(this.userNewConfirmPwdVerify=!0,"✖ 新密碼輸入不一致"):(this.userNewConfirmPwdVerify=!1,"✔")},login:function(){var e=this;if(""!==this.userEmail&&""!==this.userPwd){this.loginView=!1,this.loadingViewText="登入帳戶中",this.loadingView=!0;var t={userName:this.userEmail,userPwd:l()(this.userPwd).toUpperCase()};this.$http.post("/api/account/signin/",n.a.stringify(t)).then((function(e){return e.data})).then((function(t){if(e.loadingView=!1,"success"===t.status){e.loginStatus=!0,e.userInfo={user_id:t.data.user_id,username:t.data.username,type:t.data.type,group:t.data.user_group,deposit:t.data.deposit,is_male:t.data.is_male,nickname:t.data.nickname,picture:t.data.picture+"?t="+(new Date).getTime()},""===t.data.picture||null===t.data.picture?"teacher"===t.data.type?t.data.is_male?e.userInfo.picture=f.a:e.userInfo.picture=p.a:"student"===t.data.type&&(t.data.is_male?e.userInfo.picture=m.a:e.userInfo.picture=b.a):e.$store.state.snapshot=e.userInfo.picture,e.$store.state.deposit=t.data.deposit,localStorage.setItem("user",JSON.stringify(e.userInfo));var s={updateTime:(new Date).getTime(),item:[]};localStorage.setItem("shopping",JSON.stringify(s)),e.snackbar=!0,e.color="green",e.errorMessages="登入成功",localStorage.setItem("token",t.data.user_token),localStorage.setItem("systemChatroomID",t.data.system_chatrooID),e.$store.state.loginStatus=!0,e.$router.go(0)}else"failed"===t.status?(scroll(0,0),e.loginView=!0,e.snackbar=!0,e.color="red",e.errorMessages=t.errMsg):(scroll(0,0),e.loginView=!0,e.snackbar=!0,e.color="orange",e.errorMessages="發生錯誤，請稍後再試")})).catch((function(t){scroll(0,0),e.loadingView=!1,e.loginView=!0,e.snackbar=!0,e.color="orange",e.errorMessages="發生錯誤，請稍後再試",console.log(t)}))}else this.loginError=!0},logout:function(){this.loadingViewText="登出帳戶中",this.loadingView=!0;var e=JSON.parse(localStorage.getItem("user"))?JSON.parse(localStorage.getItem("user")).user_id:"",t={userId:e};this.$http.post("/api/account/logout/",n.a.stringify(t)),localStorage.removeItem("token"),localStorage.removeItem("user"),this.$store.state.loginStatus=!1,delete this.$http.defaults.headers.common["Authorization"],this.loadingView=!1,this.$router.go(0)},identity:function(){var e=this;if(""!==this.userEmail&&-1!==this.userBirthFailMsg().indexOf("✔")&&-1!==this.userMobileFailMsg().indexOf("✔")){this.forgetPwdView=!1,this.loadingViewText="身份驗證中",this.loadingView=!0;var t={userName:this.userEmail,userBirth:this.userBirth,userMobile:this.userMobile};scroll(0,0),this.$http.post("/api/account/memberForgotPassword/",n.a.stringify(t)).then((function(e){return e.data})).then((function(t){e.loadingView=!1,"success"===t.status?(e.snackbar=!0,e.color="green",e.errorMessages="身份驗證成功",e.userID=t.data.userID,localStorage.setItem("token",t.data.token),e.resetForgetPwdView=!0):"failed"===t.status?(e.forgetPwdView=!0,e.snackbar=!0,e.color="red",e.errorMessages=t.errMsg):(e.forgetPwdView=!0,e.snackbar=!0,e.color="orange",e.errorMessages="發生錯誤，請稍後再試")})).catch((function(t){e.loadingView=!1,e.forgetPwdView=!0,e.snackbar=!0,e.color="orange",e.errorMessages="發生錯誤，請稍後再試",console.log(t)}))}else this.verifyError=!0},doForgetResetPwd:function(){var e=this;if(-1!==this.userResetPwdFailMsg().indexOf("✔")&&-1!==this.userResetConfirmPwdFailMsg().indexOf("✔")){this.resetForgetPwdView=!1,this.loadingViewText="密碼重置中",this.loadingView=!0;var t={userID:this.userID,newUserPwd:l()(this.userResetPwd).toUpperCase()};this.$http.post("/api/account/memberResetPassword/",n.a.stringify(t)).then((function(e){return e.data})).then((function(t){e.loadingView=!1,"success"===t.status?(e.snackbar=!0,e.color="green",e.errorMessages="重置密碼成功，請使用新密碼登入",localStorage.removeItem("token"),e.loginView=!0):"failed"===t.status?(e.resetForgetPwdView=!0,e.snackbar=!0,e.color="red",e.errorMessages=t.errMsg):(e.resetForgetPwdView=!0,e.snackbar=!0,e.color="orange",e.errorMessages="發生錯誤，請稍後再試")})).catch((function(t){e.loadingView=!1,e.resetForgetPwdView=!0,e.snackbar=!0,e.color="orange",e.errorMessages="發生錯誤，請稍後再試",console.log(t)}))}else this.resetError=!0},doResetPwd:function(){var e=this;if(-1!==this.userOldPwdFailMsg().indexOf("✔")&&-1!==this.userNewPwdFailMsg().indexOf("✔")&&-1!==this.userNewConfirmPwdFailMsg().indexOf("✔")){this.resetPwdView=!1,this.loadingViewText="密碼更新中",this.loadingView=!0;var t={userID:this.userInfo?this.userInfo.user_id:-1,oldUserPwd:l()(this.userOldPwd).toUpperCase(),newUserPwd:l()(this.userNewPwd).toUpperCase()};scroll(0,0),this.$http.post("/api/account/memberChangePassword/",n.a.stringify(t)).then((function(e){return e.data})).then((function(t){e.loadingView=!1,"success"===t.status?(e.snackbar=!0,e.color="green",e.errorMessages="修改密碼成功，下次登入請記得改用新密碼",e.$store.state.doResetPwdView=!1):"failed"===t.status?(e.resetPwdView=!0,e.snackbar=!0,e.color="red",e.errorMessages=t.errMsg):(e.resetPwdView=!0,e.snackbar=!0,e.color="orange",e.errorMessages="發生錯誤，請稍後再試")})).catch((function(t){e.loadingView=!1,e.resetPwdView=!0,e.snackbar=!0,e.color="orange",e.errorMessages="發生錯誤，請稍後再試",console.log(t)}))}else this.modifyError=!0}}},I=S,M=s("2877"),O=Object(M["a"])(I,a,i,!1,null,"63cdc166",null);t["default"]=O.exports},db67:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-content",{staticClass:"bg-grey-full-page",attrs:{id:"finance"}},[s("div",{staticClass:"container",staticStyle:{"min-height":"calc(100vh - 70px - 145px)"}},[s("p",{staticClass:"mb-5 h3 font-weight-bold",staticStyle:{"word-wrap":"break-word","white-space":"pre-wrap","text-align":"center","font-weight":"500!important"}},[e._v("帳務中心")]),"student"===this.userInfo.type?s("hr"):e._e(),"student"===this.userInfo.type?s("p",{staticClass:"h3"},[e._v("訂單記錄")]):e._e(),"student"===this.userInfo.type?s("div",{staticClass:"order-area sales"},[s("div",{staticClass:"order-title"},[s("div",[e._v("狀態")]),s("div",[e._v("日期")]),s("div",[e._v("老師")]),s("div",[e._v("課程")]),s("div",[e._v("購買方案")]),s("div",[e._v("金額")]),s("div",[e._v("剩餘時數")])]),s("div",{staticClass:"row",class:{loading:e.loadingBuyOrderStatus}}),e.loadingBuyOrderStatus||0!==e.buyOrderList.length?e._e():s("p",{staticClass:"text-muted text-center p-3"},[e._v("目前尚無記錄")]),e._l(e.buyOrderList,(function(t,a){return s("div",{key:"b"+a,staticClass:"order-item"},[s("div",{staticClass:"order-info"},[s("div",{class:{"reservation-main-color":"unpaid"===t.purchase_status||"reconciliation"===t.purchase_status,"main-color":"paid"===t.purchase_status,"not-select-color":"refunded"===t.purchase_status||"unpaid_cancel"===t.purchase_status}},[e._v(" "+e._s("paid"===t.purchase_status?"已付款":"unpaid"===t.purchase_status?"待付款":"reconciliation"===t.purchase_status?"對帳中":"refunded"===t.purchase_status?"已退款":"已取消")+" ")]),s("div",[e._v(e._s(t.purchase_date))]),s("div",[e._v(e._s(t.teacher_nickname))]),s("div",{staticClass:"cursor-no-hover",on:{click:function(s){return e.$router.push("/lesson/main/view/"+t.lessonID)}}},[e._v(" "+e._s(t.lesson_title)),s("span",[e._v(e._s("trial"===t.lesson_sales_set?"試課體驗":"no_discount"===t.lesson_sales_set?"單節購買":t.lesson_sales_set.split(":")[0]+"小時方案"))])]),s("div",[e._v(e._s("trial"===t.lesson_sales_set?"試課體驗":"no_discount"===t.lesson_sales_set?"單節購買":t.lesson_sales_set.split(":")[0]+"小時方案"))]),s("div",[s("span",{staticClass:"h6 my-0 mr-1"},[e._v("NT$")]),e._v(e._s(t.purchased_with_money))]),s("div",[e._v(e._s(t.teacher_nickname))]),"paid"===t.purchase_status?s("div",[s("span",{staticClass:"h6 my-0 mr-1"},[e._v("剩餘")]),e._v(e._s(t.available_remaining_minutes>0?t.available_remaining_minutes:0)),s("span",{staticClass:"h6 my-0 ml-1"},[e._v("分鐘")])]):e._e()]),"unpaid_cancel"!==t.purchase_status?s("div",{staticClass:"order-status"},[s("div",["unpaid"===t.purchase_status?s("span",{staticClass:"cursor btn h6 m-0 px-1",on:{click:function(s){return e.doOrderCancel(t.purchase_recordID,2,"取消訂單")}}},[e._v("取消訂單")]):e._e(),"paid"===t.purchase_status&&t.available_remaining_minutes>0?s("span",{staticClass:"cursor btn h6 m-0 px-1",on:{click:function(s){return e.doOrderCancel(t.purchase_recordID,1,"申請退款")}}},[e._v("申請退款")]):e._e()]),s("div",["unpaid"===t.purchase_status?s("input",{directives:[{name:"model",rawName:"v-model",value:t.pay_bank_code,expression:"buy.pay_bank_code"}],attrs:{placeholder:"請輸入匯款帳號末五碼"},domProps:{value:t.pay_bank_code},on:{input:function(s){s.target.composing||e.$set(t,"pay_bank_code",s.target.value)}}}):e._e(),"unpaid"===t.purchase_status?s("button",{staticClass:"button-border-reservation-main-color",on:{click:function(s){return e.doOrderPayConfirm(t)}}},[e._v(" 確認對帳 ")]):e._e(),"unpaid"===t.purchase_status?s("button",{staticClass:"button-border-select-color",on:{click:function(s){return e.openOrderBankInfo(t)}}},[e._v(" 顯示匯款資訊 ")]):e._e(),"paid"===t.purchase_status?s("button",{class:{"bg-light-grey-color":t.available_remaining_minutes<=0,"button-border-select-color":t.available_remaining_minutes>0},attrs:{disabled:t.available_remaining_minutes<=0},on:{click:function(s){return e.getLessonReservationTime(t.lessonID,t.teacher_authID)}}},[e._v(" 立即預約 ")]):e._e(),"reconciliation"===t.purchase_status?s("span",[e._v("目前正在核對帳款中")]):e._e(),"refunded"===t.purchase_status?s("span",[e._v("退款金額已轉換為Q幣："+e._s(t.refunded_price))]):e._e()])]):e._e()])}))],2):e._e(),"teacher"===this.userInfo.type?s("hr"):e._e(),"teacher"===this.userInfo.type?s("p",{staticClass:"h3"},[e._v("售課記錄")]):e._e(),"teacher"===this.userInfo.type?s("div",{staticClass:"order-area buy"},[s("div",{staticClass:"order-title"},[s("div",[e._v("狀態")]),s("div",[e._v("日期")]),s("div",[e._v("學生")]),s("div",[e._v("課程")]),s("div",[e._v("購買方案")]),s("div",[e._v("金額")]),s("div",[e._v("剩餘時數")])]),s("div",{staticClass:"row",class:{loading:e.loadingSalesOrderStatus}}),e.loadingSalesOrderStatus||0!==e.salesOrderList.length?e._e():s("p",{staticClass:"text-muted text-center p-3"},[e._v("目前尚無記錄")]),e._l(e.salesOrderList,(function(t,a){return s("div",{key:"s"+a,staticClass:"order-item"},[s("div",{staticClass:"order-info"},[s("div",{class:{"reservation-main-color":"on_going"===t.purchased_lesson_sales_set_status,"main-color":"finished"===t.purchased_lesson_sales_set_status,"not-select-color":"refunded"===t.purchased_lesson_sales_set_status}},[e._v(" "+e._s("on_going"===t.purchased_lesson_sales_set_status?"進行中":"finished"===t.purchased_lesson_sales_set_status?"已結案":"已退費")+" ")]),s("div",[e._v(e._s(t.created_date))]),s("div",[e._v(e._s(t.student_nickname))]),s("div",{staticClass:"cursor-no-hover",on:{click:function(s){return e.$router.push("/lesson/main/view/"+t.lessonID)}}},[e._v(" "+e._s(t.lesson_title)),s("span",[e._v(e._s("trial"===t.lesson_sales_set?"試課體驗":"no_discount"===t.lesson_sales_set?"單節購買":t.lesson_sales_set.split(":")[0]+"小時方案"))])]),s("div",[e._v(e._s("trial"===t.lesson_sales_set?"試課體驗":"no_discount"===t.lesson_sales_set?"單節購買":t.lesson_sales_set.split(":")[0]+"小時方案"))]),s("div",[s("span",{staticClass:"h6 my-0 mr-1"},[e._v("NT$")]),e._v(e._s(t.total_amount))]),s("div",[e._v(e._s(t.student_nickname))]),s("div",[s("span",{staticClass:"h6 my-0 mr-1"},[e._v("剩餘")]),e._v(e._s(t.total_non_confirmed_minutes)),s("span",{staticClass:"h6 my-0 ml-1"},[e._v("分鐘")])])])])}))],2):e._e(),s("hr"),s("div",{staticClass:"bankbook-title"},[s("div",[s("p",{staticClass:"h3"},[e._v("請款記錄 "),e.loadingQPWithdrawalStatus?e._e():s("strong",{staticClass:"h5 main-color"},[e._v("可提領Q幣："+e._s(e.userBalance))])])]),s("div",[s("v-btn",{staticClass:"hover-main-color my-0 mr-0",on:{click:function(t){return e.getBankingInfomation("withdrawal_after_editting")}}},[e._v(" 申請Q幣提領 ")]),s("v-btn",{staticClass:"hover-main-color my-0 mr-0",on:{click:function(t){return e.getBankingInfomation("only_editting")}}},[e._v(" 提領帳號設定 ")])],1)]),s("div",{staticClass:"row",class:{loading:e.loadingQPWithdrawalStatus}}),e.loadingQPWithdrawalStatus||0!==e.QPWithdrawalList.length?e._e():s("p",{staticClass:"text-muted text-center p-3 border-top"},[e._v("目前尚無記錄")]),e.QPWithdrawalList.length>0?s("div",{staticClass:"bankbook-area"},[s("div",{staticClass:"bankbook-page"},e._l(e.QPWithdrawalList,(function(t,a){return s("div",{key:"w"+a,staticClass:"bankbook-item"},[s("div",[e._v(e._s("paid"===t.withdrawal_status?"已請款":"請款中"))]),s("div",[e._v(e._s(t.application_date))]),s("div",[e._v(e._s(t.bank_code)+e._s(t.bank_name))]),s("div",[e._v(e._s(t.bank_account_code))]),s("div",[s("span",{staticClass:"h6 my-0 mr-1"},[e._v("NT$")]),e._v(e._s(t.amount))])])})),0)]):e._e()]),s("v-dialog",{attrs:{width:"290px",persistent:""},model:{value:e.userBankInfoView,callback:function(t){e.userBankInfoView=t},expression:"userBankInfoView"}},[s("v-card",{staticStyle:{margin:"0 auto"},attrs:{"max-width":"100%"}},[s("v-card-text",{staticClass:"p-0"},[s("v-alert",{staticClass:"border-0",attrs:{color:"bg-main-color"},model:{value:e.userBankInfoView,callback:function(t){e.userBankInfoView=t},expression:"userBankInfoView"}},[s("strong",{staticClass:"h4"},[e._v("提領帳號設定")]),s("v-icon",{staticClass:"cursor float-right text-white",on:{click:function(t){e.userBankInfoView=!1}}},[e._v(" mdi-close ")])],1)],1),s("v-card-actions",{staticStyle:{padding:"25px 0","justify-content":"center","flex-flow":"wrap"}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-xs-12 col-md-12"},[s("p",{staticClass:"m-0 mb-3 h6",staticStyle:{"word-wrap":"break-word","white-space":"pre-wrap","text-align":"center"}},[e._v("您填寫的銀行帳戶資訊將作為Q幣提領時使用。"),s("br"),s("strong",{staticStyle:{color:"red"}},[e._v("請填寫您的銀行帳戶資訊並確認內容無誤！")])])]),s("div",{staticClass:"col-xs-12 col-md-12 p-0"},[s("v-autocomplete",{class:{fail:-1!==e.userBankCodeMessages.indexOf("✖"),pass:-1!==e.userBankCodeMessages.indexOf("✔")},attrs:{items:e.userBankCodeList,hint:e.userBankCodeMessages,label:"銀行代碼","persistent-hint":""},model:{value:e.userBankCode,callback:function(t){e.userBankCode=t},expression:"userBankCode"}})],1),s("div",{staticClass:"col-xs-12 col-md-12 p-0"},[s("v-text-field",{class:{fail:-1!==e.userBankMessages.indexOf("✖"),pass:-1!==e.userBankMessages.indexOf("✔")},attrs:{hint:e.userBankMessages,label:"銀行名稱",type:"text","persistent-hint":""},model:{value:e.userBank,callback:function(t){e.userBank=t},expression:"userBank"}})],1),s("div",{staticClass:"col-xs-12 col-md-12 p-0"},[s("v-text-field",{class:{fail:-1!==e.userBankAccountMessages.indexOf("✖"),pass:-1!==e.userBankAccountMessages.indexOf("✔")},attrs:{hint:e.userBankAccountMessages,label:"銀行帳號",type:"text","persistent-hint":""},model:{value:e.userBankAccount,callback:function(t){e.userBankAccount=t},expression:"userBankAccount"}})],1)]),s("v-btn",{staticClass:"hover-main-color mt-3",on:{click:function(t){return e.doEditUserBankInfo()}}},[e._v(" 儲存設定 ")])],1)],1)],1),s("v-dialog",{attrs:{width:"290px",persistent:""},model:{value:e.withdrawalView,callback:function(t){e.withdrawalView=t},expression:"withdrawalView"}},[s("v-card",{staticStyle:{margin:"0 auto"},attrs:{"max-width":"100%"}},[s("v-card-text",{staticClass:"p-0"},[s("v-alert",{staticClass:"border-0",attrs:{color:"bg-main-color"},model:{value:e.withdrawalView,callback:function(t){e.withdrawalView=t},expression:"withdrawalView"}},[s("strong",{staticClass:"h4"},[e._v("申請Q幣提領")]),s("v-icon",{staticClass:"cursor float-right text-white",on:{click:function(t){e.withdrawalView=!1}}},[e._v(" mdi-close ")])],1)],1),s("v-card-actions",{staticStyle:{padding:"25px 0","justify-content":"center","flex-flow":"wrap"}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-xs-12 col-md-12"},[s("p",{staticClass:"m-0 mb-3 h6",staticStyle:{"word-wrap":"break-word","white-space":"pre-wrap","text-align":"center"}},[e._v("您填寫的銀行帳戶資訊將作為Q幣提領時使用。"),s("br"),s("strong",{staticStyle:{color:"red"}},[e._v("請填寫您的銀行帳戶資訊並確認內容無誤！")])])]),s("div",{staticClass:"col-xs-12 col-md-12 p-0"},[s("v-autocomplete",{class:{fail:-1!==e.userBankCodeMessages.indexOf("✖"),pass:-1!==e.userBankCodeMessages.indexOf("✔")},attrs:{items:e.userBankCodeList,hint:e.userBankCodeMessages,label:"銀行代碼","persistent-hint":""},model:{value:e.userBankCode,callback:function(t){e.userBankCode=t},expression:"userBankCode"}})],1),s("div",{staticClass:"col-xs-12 col-md-12 p-0"},[s("v-text-field",{class:{fail:-1!==e.userBankMessages.indexOf("✖"),pass:-1!==e.userBankMessages.indexOf("✔")},attrs:{hint:e.userBankMessages,label:"銀行名稱",type:"text","persistent-hint":""},model:{value:e.userBank,callback:function(t){e.userBank=t},expression:"userBank"}})],1),s("div",{staticClass:"col-xs-12 col-md-12 p-0"},[s("v-text-field",{class:{fail:-1!==e.userBankAccountMessages.indexOf("✖"),pass:-1!==e.userBankAccountMessages.indexOf("✔")},attrs:{hint:e.userBankAccountMessages,label:"銀行帳號",type:"text","persistent-hint":""},model:{value:e.userBankAccount,callback:function(t){e.userBankAccount=t},expression:"userBankAccount"}})],1),s("div",{staticClass:"col-xs-12 col-md-12"},[s("p",{staticClass:"m-0 mt-3 h4",staticStyle:{"word-wrap":"break-word","white-space":"pre-wrap","text-align":"center","font-weight":"700!important"}},[e._v("本次預計提領Q幣： "),s("span",{staticStyle:{color:"red","font-weight":"700!important"}},[e._v(e._s(e.userBalance-e.userTxnFee))])]),e.userTxnFee>0?s("p",{staticClass:"text-center"},[e._v("(已預扣提領手續費"+e._s(e.userTxnFee)+"元)")]):e._e(),0===e.userTxnFee?s("p",{staticClass:"text-center"},[e._v("(每月享提領免手續費乙次)")]):e._e()])]),s("v-btn",{staticClass:"hover-main-color mt-3",on:{click:function(t){return e.doQPWithdrawal()}}},[e._v(" 申請提領 ")])],1)],1)],1),s("v-dialog",{attrs:{width:"290px",persistent:""},model:{value:e.orderBankInfoView,callback:function(t){e.orderBankInfoView=t},expression:"orderBankInfoView"}},[s("v-card",{staticStyle:{margin:"0 auto"},attrs:{"max-width":"100%"}},[s("v-card-text",{staticClass:"p-0"},[s("v-alert",{staticClass:"border-0",attrs:{color:"bg-main-color"},model:{value:e.orderBankInfoView,callback:function(t){e.orderBankInfoView=t},expression:"orderBankInfoView"}},[s("strong",{staticClass:"h4"},[e._v("款項匯款資訊")]),s("v-icon",{staticClass:"cursor float-right text-white",on:{click:function(t){e.orderBankInfoView=!1}}},[e._v(" mdi-close ")])],1)],1),s("v-card-actions",{staticStyle:{"flex-flow":"wrap"}},[s("p",[e._v(" 銀行代碼："),s("span",{staticClass:"h4"},[e._v(e._s(e.orderBankInfo.bank_code))]),s("br"),e._v(" 銀行名稱："),s("span",{staticClass:"h4"},[e._v(e._s(e.orderBankInfo.bank_name))]),s("br"),e._v(" 銀行分行："),s("span",{staticClass:"h4"},[e._v(e._s(e.orderBankInfo.bank_branches))]),s("br"),e._v(" 銀行帳號："),s("span",{staticClass:"h4"},[e._v(e._s(e.orderBankInfo.bank_account))]),s("br"),e._v(" 銀行戶名："),s("span",{staticClass:"h4"},[e._v(e._s(e.orderBankInfo.bank_account_name))]),s("br"),s("br"),s("span",{staticClass:"h6"},[e._v("※完成匯款後請務必於5天內回填匯款帳號末五碼，以便完成購買程序。如發票有開立統編需求，請於回填匯款帳號後5天內與我們聯絡。")])])])],1)],1),s("v-dialog",{attrs:{persistent:""},model:{value:e.loadingView,callback:function(t){e.loadingView=t},expression:"loadingView"}},[s("p",{staticStyle:{"letter-spacing":"5px","text-align":"center !important",color:"#ffffff","background-color":"#000000dd",padding:"15px",margin:"auto"}},[s("img",{staticStyle:{width:"2rem","margin-bottom":"10px"},attrs:{src:e.loading}}),s("br"),e._v(" "+e._s(e.loadingViewText)+" ")])]),s("v-snackbar",{attrs:{top:!0,color:e.color},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(" "+e._s(e.errorMessages)+" "),s("v-btn",{attrs:{dark:"",flat:""},on:{click:function(t){e.snackbar=!1}}},[e._v(" Close ")])],1)],1)},i=[],r=(s("8e6e"),s("456d"),s("ac6a"),s("bd86")),o=s("4328"),n=s.n(o),c=s("f8b2"),l=s.n(c),d=s("2f62");function u(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function h(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?u(Object(s),!0).forEach((function(t){Object(r["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):u(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var f={name:"Finance",metaInfo:function(){return{title:this.appName+"｜帳務中心"}},data:function(){return{loadingView:!1,loadingViewText:"處理中",userBankInfoView:!1,withdrawalView:!1,orderBankInfoView:!1,snackbar:!1,color:"red",errorMessages:"",loading:l.a,loadingSalesOrderStatus:!0,loadingBuyOrderStatus:!0,loadingQPWithdrawalStatus:!0,orderBankInfo:{},salesOrderList:[],buyOrderList:[],QPWithdrawalList:[],userBalance:0,userWithholdingBalance:0,userTxnFee:0,userBankCode:"",userBank:"",userBankAccount:"",userBankCodeMessages:"請輸入您的銀行代碼",userBankMessages:"請輸入您的銀行帳號所屬銀行名稱",userBankAccountMessages:"請輸入您的銀行帳號",userBankCodeList:[{value:"004",text:"004"},{value:"005",text:"005"},{value:"006",text:"006"},{value:"007",text:"007"},{value:"008",text:"008"},{value:"009",text:"009"},{value:"011",text:"011"},{value:"012",text:"012"},{value:"013",text:"013"},{value:"015",text:"015"},{value:"016",text:"016"},{value:"017",text:"017"},{value:"018",text:"018"},{value:"021",text:"021"},{value:"039",text:"039"},{value:"048",text:"048"},{value:"050",text:"050"},{value:"052",text:"052"},{value:"053",text:"053"},{value:"054",text:"054"},{value:"081",text:"081"},{value:"101",text:"101"},{value:"102",text:"102"},{value:"103",text:"103"},{value:"108",text:"108"},{value:"118",text:"118"},{value:"147",text:"147"},{value:"700",text:"700"},{value:"803",text:"803"},{value:"805",text:"805"},{value:"806",text:"806"},{value:"803",text:"803"},{value:"807",text:"807"},{value:"808",text:"808"},{value:"809",text:"809"},{value:"810",text:"810"},{value:"812",text:"812"},{value:"814",text:"814"},{value:"815",text:"815"},{value:"816",text:"816"},{value:"822",text:"822"},{value:"其他",text:"其他"}],userBankNameList:[{value:"004",text:"臺灣銀行"},{value:"005",text:"土地銀行"},{value:"006",text:"合作金庫"},{value:"007",text:"最高銀行"},{value:"008",text:"華南銀行"},{value:"009",text:"彰化銀行"},{value:"011",text:"上海商銀"},{value:"012",text:"富邦銀行"},{value:"013",text:"國泰世華"},{value:"015",text:"輸出入銀行"},{value:"016",text:"高雄銀行"},{value:"017",text:"兆豐銀行"},{value:"018",text:"農業金庫"},{value:"021",text:"花旗台灣"},{value:"039",text:"澳盛台灣"},{value:"048",text:"王道銀行"},{value:"050",text:"臺企銀行"},{value:"052",text:"渣打銀行"},{value:"053",text:"台中商銀"},{value:"054",text:"京城銀行"},{value:"081",text:"滙豐台灣"},{value:"101",text:"瑞興銀行"},{value:"102",text:"華泰銀行"},{value:"103",text:"新光銀行"},{value:"108",text:"陽信銀行"},{value:"118",text:"板信銀行"},{value:"147",text:"三信銀行"},{value:"700",text:"中華郵政"},{value:"803",text:"聯邦銀行"},{value:"805",text:"遠東銀行"},{value:"806",text:"元大銀行"},{value:"803",text:"聯邦銀行"},{value:"807",text:"永豐銀行"},{value:"808",text:"玉山銀行"},{value:"809",text:"凱基銀行"},{value:"810",text:"星展台灣"},{value:"812",text:"台新銀行"},{value:"814",text:"大眾銀行"},{value:"815",text:"日盛銀行"},{value:"816",text:"安泰銀行"},{value:"822",text:"中國信託"}]}},computed:h({},Object(d["c"])(["root","appName","deposit"]),{userInfo:function(){return JSON.parse(localStorage.getItem("user"))}}),watch:{userBank:function(e){""!==this.userBank?this.userBankMessages="✔":this.userBankMessages="✖ 請輸入您的銀行帳號所屬銀行名稱"},userBankAccount:function(e){""!==this.userBankAccount?this.userBankAccountMessages="✔":this.userBankAccountMessages="✖ 請輸入您的銀行帳號"},userBankCode:function(e){var t=this;""!==this.userBankCode?(this.userBankCodeMessages="✔",this.userBankNameList.forEach((function(s){s.value===e&&(t.userBank=s.text)}))):this.userBankCodeMessages="✖ 請輸入您的銀行代碼"}},mounted:function(){var e=this;if(localStorage.getItem("token")){var t={userId:this.userInfo?this.userInfo.user_id:-1,url:this.$route.path};this.$http.post("/api/account/authCheck/",n.a.stringify(t)).then((function(e){return e.data})).then((function(t){"success"===t.status?t.data.authority?("teacher"===e.userInfo.type&&(e.getLessonSalesHistory(),e.getQPointsWtihdrawalHistory(),e.getBankingInfomation()),"student"===e.userInfo.type&&(e.getStudentOrderHistory(),e.getQPointsWtihdrawalHistory(),e.getBankingInfomation())):e.$router.push("/"):localStorage.getItem("user")&&e.$store.dispatch("logout").then((function(){e.$router.go(0)}))})).catch((function(t){console.log(t),localStorage.getItem("user")&&e.$store.dispatch("logout").then((function(){e.$router.go(0)}))}))}else this.$router.push("/")},methods:{test:function(){alert("未開放")},getLessonSalesHistory:function(){var e=this;this.loadingSalesOrderStatus=!0;var t={userID:this.userInfo?this.userInfo.user_id:-1,type:this.userInfo?this.userInfo.type:""};this.$http.post("/api/account_finance/getLessonSalesHistory/",n.a.stringify(t)).then((function(e){return e.data})).then((function(t){e.loadingSalesOrderStatus=!1,"success"===t.status?e.salesOrderList=t.data:"failed"===t.status?(e.snackbar=!0,e.color="red",e.errorMessages=t.errMsg):(e.snackbar=!0,e.color="orange",e.errorMessages="發生錯誤，請稍後再試")})).catch((function(t){e.snackbar=!0,e.color="orange",e.errorMessages="發生錯誤，請稍後再試",console.log(t)}))},getStudentOrderHistory:function(){var e=this;this.loadingBuyOrderStatus=!0;var t={userID:this.userInfo?this.userInfo.user_id:-1,type:this.userInfo?this.userInfo.type:""};this.$http.post("/api/account_finance/studentOrderHistory/",n.a.stringify(t)).then((function(e){return e.data})).then((function(t){e.loadingBuyOrderStatus=!1,"success"===t.status?e.buyOrderList=t.data:"failed"===t.status?(e.snackbar=!0,e.color="red",e.errorMessages=t.errMsg):(e.snackbar=!0,e.color="orange",e.errorMessages="發生錯誤，請稍後再試")})).catch((function(t){e.snackbar=!0,e.color="orange",e.errorMessages="發生錯誤，請稍後再試",console.log(t)}))},getQPointsWtihdrawalHistory:function(){var e=this;this.loadingQPWithdrawalStatus=!0;var t={userID:this.userInfo?this.userInfo.user_id:-1,type:this.userInfo?this.userInfo.type:""};this.$http.post("/api/account_finance/getQPointsWithdrawalHistory/",n.a.stringify(t)).then((function(e){return e.data})).then((function(t){e.loadingQPWithdrawalStatus=!1,"success"===t.status?e.QPWithdrawalList=t.data:"failed"===t.status?(e.snackbar=!0,e.color="red",e.errorMessages=t.errMsg):(e.snackbar=!0,e.color="orange",e.errorMessages="發生錯誤，請稍後再試")})).catch((function(t){e.snackbar=!0,e.color="orange",e.errorMessages="發生錯誤，請稍後再試",console.log(t)}))},getBankingInfomation:function(e){var t=this;this.userBankCodeMessages="請輸入您的銀行代碼",this.userBankMessages="請輸入您的銀行帳號所屬銀行名稱",this.userBankAccountMessages="請輸入您的銀行帳號";var s={userID:this.userInfo?this.userInfo.user_id:-1,type:this.userInfo?this.userInfo.type:""};this.$http.post("/api/account/getBankingInfomation/",n.a.stringify(s)).then((function(e){return e.data})).then((function(e){"success"===e.status?(t.userBankCode=e.data.bank_code,t.userBank=e.data.bank_name,t.userBankAccount=e.data.bank_account_code,t.userBalance=e.data.balance,t.userWithholdingBalance=e.data.withholding_balance,t.userTxnFee=e.data.txn_fee,t.$store.state.deposit=e.data.balance):"failed"===e.status?(t.snackbar=!0,t.color="red",t.errorMessages=e.errMsg):(t.snackbar=!0,t.color="orange",t.errorMessages="發生錯誤，請稍後再試")})).catch((function(e){t.snackbar=!0,t.color="orange",t.errorMessages="發生錯誤，請稍後再試",console.log(e)})),"only_editting"===e?this.userBankInfoView=!0:"withdrawal_after_editting"===e&&(0===this.userBalance?alert("您目前尚無Q幣可提領"):this.userBalance-this.userTxnFee>0?this.withdrawalView=!0:alert("您目前剩餘Q幣不足扣除提領手續費"))},getLessonReservationTime:function(e,t){var s=this;if(localStorage.getItem("token")&&"student"===this.userInfo.type){var a={userID:this.userInfo?this.userInfo.user_id:-1,lessonID:e};this.$http.post("/api/lesson/getStudentsAvailableRemainingMinutes/",n.a.stringify(a)).then((function(e){return e.data})).then((function(a){if("success"===a.status)if(a.data.all_available_remaining_minutes_of_this_lesson>0){a.data.student_has_unused_trial_lesson_sales_set&&alert("因您尚有「試課方案」未使用，故本次預約僅能先使用「試課方案」時數");var i={teacherID:t,lessonID:e,time:a.data.student_has_unused_trial_lesson_sales_set?30:a.data.all_available_remaining_minutes_of_this_lesson,trial:a.data.student_has_unused_trial_lesson_sales_set};localStorage.setItem("reservation",JSON.stringify(i)),s.$router.push("/lesson/appointment")}else alert("目前您尚無可用的預約時數，請先購買課程方案");else"failed"===a.status?(s.snackbar=!0,s.color="red",s.errorMessages=a.errMsg):(s.snackbar=!0,s.color="orange",s.errorMessages="發生錯誤，請稍後再試")})).catch((function(e){s.snackbar=!0,s.color="orange",s.errorMessages="發生錯誤，請稍後再試",console.log(e)}))}else alert("目前無法預約")},openOrderBankInfo:function(e){this.orderBankInfo=e.edony_bank_info,this.orderBankInfoView=!0},doOrderPayConfirm:function(e){var t=this,s=/^[0-9]{5}$/;if(s.test(e.pay_bank_code)){this.loadingViewText="申請對帳中",this.loadingView=!0;var a={userID:this.userInfo?this.userInfo.user_id:-1,type:this.userInfo?this.userInfo.type:"",purchase_recordID:e.purchase_recordID,status_update:0,part_of_bank_account_code:e.pay_bank_code};this.$http.post("/api/account_finance/studentEditOrder/",n.a.stringify(a)).then((function(e){return e.data})).then((function(e){t.loadingView=!1,"success"===e.status?t.getStudentOrderHistory():"failed"===e.status?(t.snackbar=!0,t.color="red",t.errorMessages=e.errMsg):(t.snackbar=!0,t.color="orange",t.errorMessages="發生錯誤，請稍後再試")})).catch((function(e){t.loadingView=!1,t.snackbar=!0,t.color="orange",t.errorMessages="發生錯誤，請稍後再試",console.log(e)}))}else this.snackbar=!0,this.color="red",this.errorMessages="匯款帳號末五碼輸入錯誤"},doOrderCancel:function(e,t,s){var a=this;if(confirm("請問您是否確認要"+s+"？")){this.loadingViewText=s+"中",this.loadingView=!0;var i={userID:this.userInfo?this.userInfo.user_id:-1,type:this.userInfo?this.userInfo.type:"",purchase_recordID:e,status_update:t,part_of_bank_account_code:""};this.$http.post("/api/account_finance/studentEditOrder/",n.a.stringify(i)).then((function(e){return e.data})).then((function(e){a.loadingView=!1,"success"===e.status?(a.snackbar=!0,a.color="green",a.errorMessages="已"+s,a.getStudentOrderHistory(),a.getBankingInfomation()):"failed"===e.status?(a.snackbar=!0,a.color="red",a.errorMessages=e.errMsg):(a.snackbar=!0,a.color="orange",a.errorMessages="發生錯誤，請稍後再試")})).catch((function(e){a.loadingView=!1,a.snackbar=!0,a.color="orange",a.errorMessages="發生錯誤，請稍後再試",console.log(e)}))}},doSubmitVerify:function(){var e=!1;return""===this.userBank&&(this.userBankMessages="✖ 請輸入您的銀行帳號所屬銀行名稱",e=!0),""===this.userBankAccount&&(this.userBankAccountMessages="✖ 請輸入您的銀行帳號",e=!0),""===this.userBankCode&&(this.userBankCodeMessages="✖ 請輸入您的銀行代碼",e=!0),e},doEditUserBankInfo:function(){var e=this;if(this.doSubmitVerify())this.snackbar=!0,this.color="red",this.errorMessages="請修正錯誤欄位後再送出";else{this.userBankInfoView=!1,this.loadingViewText="銀行帳戶更新中",this.loadingView=!0;var t={userID:this.userInfo?this.userInfo.user_id:-1,type:this.userInfo?this.userInfo.type:"",bank_code:this.userBankCode,bank_name:this.userBank,bank_account_code:this.userBankAccount,action:"only_editting",amount:0};this.$http.post("/api/account_finance/withdrawQPoints/",n.a.stringify(t)).then((function(e){return e.data})).then((function(t){e.loadingView=!1,"success"===t.status?(e.snackbar=!0,e.color="green",e.errorMessages="銀行帳戶更新成功"):"failed"===t.status?(e.userBankInfoView=!0,e.snackbar=!0,e.color="red",e.errorMessages=t.errMsg):(e.userBankInfoView=!0,e.snackbar=!0,e.color="orange",e.errorMessages="發生錯誤，請稍後再試")})).catch((function(t){e.loadingView=!1,e.userBankInfoView=!0,e.snackbar=!0,e.color="orange",e.errorMessages="發生錯誤，請稍後再試",console.log(t)}))}},doQPWithdrawal:function(){var e=this;if(this.doSubmitVerify())this.snackbar=!0,this.color="red",this.errorMessages="請修正錯誤欄位後再送出";else if(confirm("你確定要提領Q幣嗎?"))if(this.userBalance-this.userTxnFee>0){this.withdrawalView=!1,this.loadingViewText="申請提領中",this.loadingView=!0;var t={userID:this.userInfo?this.userInfo.user_id:-1,type:this.userInfo?this.userInfo.type:"",bank_code:this.userBankCode,bank_name:this.userBank,bank_account_code:this.userBankAccount,action:"withdrawal_after_editting",amount:this.userBalance-this.userTxnFee};this.$http.post("/api/account_finance/withdrawQPoints/",n.a.stringify(t)).then((function(e){return e.data})).then((function(t){e.loadingView=!1,"success"===t.status?(e.snackbar=!0,e.color="green",e.errorMessages="申請提領已送出，將於七個工作日內匯入您的銀行帳戶",e.getQPointsWtihdrawalHistory(),e.getBankingInfomation()):"failed"===t.status?(e.withdrawalView=!0,e.snackbar=!0,e.color="red",e.errorMessages=t.errMsg):(e.withdrawalView=!0,e.snackbar=!0,e.color="orange",e.errorMessages="發生錯誤，請稍後再試")})).catch((function(t){e.loadingView=!1,e.withdrawalView=!0,e.snackbar=!0,e.color="orange",e.errorMessages="發生錯誤，請稍後再試",console.log(t)}))}else alert("您目前剩餘Q幣不足扣除提領手續費"),this.withdrawalView=!1}}},g=f,p=s("2877"),v=Object(p["a"])(g,a,i,!1,null,null,null);t["default"]=v.exports},dd83:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-content",{staticClass:"bg-grey-full-page",attrs:{id:"lessonreservation"}},[e.pageView?s("div",{staticClass:"container",staticStyle:{"min-height":"calc(100vh - 70px - 145px)"}},[s("p",{staticClass:"mb-5 h3 font-weight-bold",staticStyle:{"word-wrap":"break-word","white-space":"pre-wrap","text-align":"center","font-weight":"500!important"}},[e._v("預約管理")]),s("div",{staticClass:"lesson-reservation-area"},[s("div",{staticClass:"lesson-reservation-title"},[s("div",{staticClass:"lesson-reservation-status cursor-no-hover",class:{active:"to_be_confirmed"===e.status},on:{click:function(t){e.status=e.loadingStatus?e.status:"to_be_confirmed"}}},[s("span",[e._v("待回覆")])]),s("div",{staticClass:"lesson-reservation-status cursor-no-hover",class:{active:"confirmed"===e.status},on:{click:function(t){e.status=e.loadingStatus?e.status:"confirmed"}}},[s("span",[e._v("預約成功")])]),s("div",{staticClass:"lesson-reservation-status cursor-no-hover",class:{active:"finished"===e.status},on:{click:function(t){e.status=e.loadingStatus?e.status:"finished"}}},[s("span",[e._v("已完課")])]),s("div",{staticClass:"lesson-reservation-status curso-no-hover",class:{active:"canceled"===e.status},on:{click:function(t){e.status=e.loadingStatus?e.status:"canceled"}}},[s("span",[e._v("已取消")])]),s("v-icon",{staticClass:"cursor",on:{click:function(t){e.filter=!e.filter}}},[e._v("mdi-filter")])],1),e.filter?s("div",{staticClass:"lesson-reservation-filter"},[s("div",[s("v-icon",{staticClass:"cursor"},[e._v("mdi-magnify")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.keyword,expression:"keyword"}],attrs:{placeholder:"請輸入關鍵字篩選課程或老師",type:"text"},domProps:{value:e.keyword},on:{input:function(t){t.target.composing||(e.keyword=t.target.value)}}})],1),s("v-btn",{staticClass:"h4 bg-main-color",on:{click:function(t){return e.getTeachersBookingHistory()}}},[e._v(" 篩選 ")])],1):e._e(),e.filter&&e.filterCondition.length>0?s("hr"):e._e(),""!==e.filterCondition?s("h6",{staticClass:"text-center text-danger"},[s("strong",[e._v(e._s(e.filterCondition))])]):e._e(),s("div",{staticClass:"row",class:{loading:e.loadingStatus}}),e.loadingStatus||0!==e.resLessonReservationDate.length?e._e():s("hr"),e.loadingStatus||0!==e.resLessonReservationDate.length?e._e():s("h4",{staticClass:"text-center"},[e._v("無符合條件之預約資訊")]),e._l(e.resLessonReservationDate,(function(t,a){return s("div",{key:"r"+a,staticClass:"lesson-reservation-item",class:{xxx:!0}},[s("div",{staticClass:"information"},[s("div",{staticClass:"no"},[e._v(e._s(a+1))]),s("div",{staticClass:"case"},[e._v(e._s("trial"===t.discount_price?"試課體驗":"no_discount"===t.discount_price?"單節購買":t.discount_price.split(":")[0]+"小時方案"))]),s("div",{staticClass:"lesson"},[s("p",[s("span",[e._v(e._s(t.booked_date))]),s("span",[e._v(e._s(e.weekList[new Date(t.booked_date).getDay()]))]),s("span",[e._v(e._s(e.doTimeConversion(t.booked_time)))]),s("span",[e._v("預計"+e._s(30*t.booked_time.length)+"分鐘")])]),s("p",{staticClass:"cursor-no-hover",on:{click:function(s){return e.$router.push("/lesson/main/view/"+t.lesson_id)}}},[e._v(e._s(t.lesson_title))])]),s("div",{staticClass:"name"},[s("span",[e._v(e._s(t.student_nickname))]),s("img",{staticClass:"cursor",attrs:{src:e.chatIconSmall},on:{click:function(s){return e.doConnectChatroom(t.student_auth_id)}}})])]),s("hr"),s("div",{staticClass:"status"},[s("div",{staticClass:"remarks"},["quikok_dealing_for_student_disagreed"===t.booked_status?s("div",{staticClass:"bg-reservation-main-color"},[e._v("客服處理中")]):e._e(),"student_not_yet_confirmed"===t.booked_status?s("div",{staticClass:"bg-deep-grey-color"},[e._v("時數確認中")]):e._e(),"finished"===t.booked_status||"student_not_yet_confirmed"===t.booked_status||"quikok_dealing_for_student_disagreed"===t.booked_status?s("span",[e._v("實際上課時間 11:00~02:30｜共計210分鐘 "),"student_not_yet_confirmed"===t.booked_status?s("span",{staticClass:"text-danger"},[e._v("(最遲將於"+e._s(t.student_confirmed_deadline)+"前確認時數)")]):e._e()]):e._e(),"canceled"===t.booked_status?s("span",{class:{"not-select-color":"canceled"===t.booked_status}},[e._v(e._s(t.remark))]):e._e()]),s("div",{staticClass:"action"},["to_be_confirmed"===t.booked_status?s("button",{staticClass:"button-border-reservation-main-color",on:{click:function(s){return e.doChangingStatus(t.lesson_booking_info_id,"canceled","婉拒")}}},[e._v("婉拒預約")]):e._e(),"to_be_confirmed"===t.booked_status?s("button",{staticClass:"button-border-select-color",on:{click:function(s){return e.doChangingStatus(t.lesson_booking_info_id,"confirmed","確認")}}},[e._v("確認預約")]):e._e(),"confirmed"===t.booked_status?s("button",{staticClass:"button-border-reservation-main-color",on:{click:function(s){return e.doChangingStatus(t.lesson_booking_info_id,"canceled","取消")}}},[e._v("取消預約")]):e._e(),"confirmed"===t.booked_status?s("button",{staticClass:"button-border-select-color",on:{click:function(s){return e.finishTime(t.lesson_booking_info_id,t.booked_date,t.booked_time)}}},[e._v("結算時數")]):e._e(),t.is_teacher_given_feedback||"finished"!==t.booked_status&&"student_not_yet_confirmed"!==t.booked_status&&"quikok_dealing_for_student_disagreed"!==t.booked_status?e._e():s("button",{staticClass:"button-border-select-color",on:{click:function(s){e.writeReviewsInfo.lesson_booking_info_id=t.lesson_booking_info_id,e.writeReviewsView=!0}}},[e._v("進行評價")]),t.is_teacher_given_feedback?s("button",{staticClass:"button-border-select-color",on:{click:function(s){return e.getReadReviewsOfCertainLessons(t.lesson_booking_info_id,t.student_thumbnail_path,t.student_is_male,t.student_s_user_type_for_double_check)}}},[e._v("查看評價")]):e._e()])])])}))],2)]):e._e(),s("v-dialog",{attrs:{width:"290px",persistent:""},model:{value:e.finishTimeView,callback:function(t){e.finishTimeView=t},expression:"finishTimeView"}},[s("v-card",{staticStyle:{margin:"0 auto"},attrs:{"max-width":"100%"}},[s("v-card-text",{staticClass:"p-0"},[s("v-alert",{staticClass:"border-0",attrs:{color:"bg-main-color"},model:{value:e.finishTimeView,callback:function(t){e.finishTimeView=t},expression:"finishTimeView"}},[s("strong",{staticClass:"h4"},[e._v("請確認實際上課時間")]),s("v-icon",{staticClass:"cursor float-right text-white",on:{click:function(t){e.finishTimeView=!1}}},[e._v(" mdi-close ")])],1)],1),s("v-card-actions",{staticStyle:{padding:"25px 0","justify-content":"center","flex-flow":"wrap"}},[s("v-text-field",{attrs:{label:"開始時間",type:"time"},model:{value:e.finishTimeStart,callback:function(t){e.finishTimeStart=t},expression:"finishTimeStart"}}),s("v-text-field",{attrs:{label:"結束時間",type:"time"},model:{value:e.finishTimeEnd,callback:function(t){e.finishTimeEnd=t},expression:"finishTimeEnd"}}),s("h5",[e._v("實際上課時間共"),s("strong",{staticClass:"h5 text-danger"},[e._v(e._s((new Date(this.$moment(new Date).format("YYYY/MM/DD")+" "+e.finishTimeEnd).getTime()-new Date(this.$moment(new Date).format("YYYY/MM/DD")+" "+e.finishTimeStart).getTime())/1e3/60))]),e._v("分鐘")]),s("v-btn",{staticClass:"hover-main-color mt-3",on:{click:function(t){return e.doCompletedTime()}}},[e._v(" 時數確認 ")])],1)],1)],1),s("v-dialog",{attrs:{persistent:"",width:"290px"},model:{value:e.finishTimeStartView,callback:function(t){e.finishTimeStartView=t},expression:"finishTimeStartView"}},[e.finishTimeStartView?s("v-time-picker",{attrs:{"allowed-minutes":function(e){return e%10===0},format:"24hr"},model:{value:e.finishTimeStart,callback:function(t){e.finishTimeStart=t},expression:"finishTimeStart"}},[s("v-spacer"),s("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(t){e.finishTimeView=!0,e.finishTimeStartView=!1}}},[e._v("確認")])],1):e._e()],1),s("v-dialog",{attrs:{persistent:"",width:"290px"},model:{value:e.finishTimeEndView,callback:function(t){e.finishTimeEndView=t},expression:"finishTimeEndView"}},[e.finishTimeEndView?s("v-time-picker",{attrs:{"allowed-minutes":function(e){return e%10===0},format:"24hr"},model:{value:e.finishTimeEnd,callback:function(t){e.finishTimeEnd=t},expression:"finishTimeEnd"}},[s("v-spacer"),s("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(t){e.finishTimeView=!0,e.finishTimeEndView=!1}}},[e._v("確認")])],1):e._e()],1),s("v-dialog",{attrs:{width:"290px",persistent:""},model:{value:e.writeReviewsView,callback:function(t){e.writeReviewsView=t},expression:"writeReviewsView"}},[s("v-card",{staticStyle:{margin:"0 auto",background:"#eeeeee"},attrs:{"max-width":"100%"}},[s("v-card-text",{staticClass:"p-0"},[s("v-alert",{staticClass:"border-0",attrs:{color:"bg-main-color"},model:{value:e.writeReviewsView,callback:function(t){e.writeReviewsView=t},expression:"writeReviewsView"}},[s("strong",{staticClass:"h4"},[e._v("進行課程評價")]),s("v-icon",{staticClass:"cursor float-right text-white",on:{click:function(t){e.writeReviewsView=!1}}},[e._v(" mdi-close ")])],1)],1),s("v-card-actions",{staticStyle:{"padding-bottom":"25px","justify-content":"center","flex-flow":"wrap"}},[s("div",{staticClass:"col-xs-12 col-md-12 border-bottom text-center px-0 py-2"},[s("h5",[e._v("請為本次課程評分")]),e._l(5,(function(t){return s("v-icon",{key:"w"+t,staticClass:"cursor-no-hover reviews star bigger",class:{active:t<=e.writeReviewsInfo.score_given||t<=e.writeReviewsScoreMove},on:{mousemove:function(s){e.writeReviewsScoreMove=t},mouseleave:function(t){e.writeReviewsScoreMove=0},click:function(s){e.writeReviewsInfo.score_given=t}}},[e._v("mdi-star")])}))],2),s("div",{staticClass:"col-xs-12 col-md-12 border-bottom text-center px-0 py-2"},[s("h5",[e._v("本次課程狀況回報")]),s("v-chip",{staticClass:"cursor-no-hover reviews items",class:{active:e.writeReviewsInfo.is_student_late_for_lesson},on:{click:function(t){e.writeReviewsInfo.is_student_late_for_lesson=!e.writeReviewsInfo.is_student_late_for_lesson}}},[e._v("上課延遲")]),s("v-chip",{staticClass:"cursor-no-hover reviews items",class:{active:e.writeReviewsInfo.is_student_frivolous_in_lesson},on:{click:function(t){e.writeReviewsInfo.is_student_frivolous_in_lesson=!e.writeReviewsInfo.is_student_frivolous_in_lesson}}},[e._v("態度不佳")]),s("v-chip",{staticClass:"cursor-no-hover reviews items",class:{active:e.writeReviewsInfo.is_student_or_parents_not_friendly},on:{click:function(t){e.writeReviewsInfo.is_student_or_parents_not_friendly=!e.writeReviewsInfo.is_student_or_parents_not_friendly}}},[e._v("干預授課")])],1),s("div",{staticClass:"col-xs-12 col-md-12 border-bottom text-center px-0 py-2"},[s("h5",[e._v("分享本次課程感想")]),s("v-textarea",{staticClass:"reviews textarea",attrs:{label:"",placeholder:"請留下感想讓我們知道",rows:"3",type:"text","persistent-hint":""},model:{value:e.writeReviewsInfo.remark_given,callback:function(t){e.$set(e.writeReviewsInfo,"remark_given",t)},expression:"writeReviewsInfo.remark_given"}})],1),s("v-btn",{staticClass:"hover-main-color mt-3",on:{click:function(t){return e.doTeacherWriteStudentReviews()}}},[e._v(" 送出評價 ")])],1)],1)],1),s("v-dialog",{attrs:{width:"290px",persistent:""},model:{value:e.readReviewsView,callback:function(t){e.readReviewsView=t},expression:"readReviewsView"}},[s("v-card",{staticStyle:{margin:"0 auto",background:"#eeeeee"},attrs:{"max-width":"100%"}},[s("v-card-text",{staticClass:"p-0"},[s("v-alert",{staticClass:"border-0",attrs:{color:"bg-main-color"},model:{value:e.readReviewsView,callback:function(t){e.readReviewsView=t},expression:"readReviewsView"}},[s("strong",{staticClass:"h4"},[e._v("課程評價詳情")]),s("v-icon",{staticClass:"cursor float-right text-white",on:{click:function(t){e.readReviewsView=!1}}},[e._v(" mdi-close ")])],1)],1),s("v-card-actions",{staticStyle:{padding:"0","justify-content":"center","flex-flow":"wrap"}},[e.readReviewsInfo.score_given_to_teacher>=0?s("div",{staticClass:"col-xs-12 col-md-12 text-center px-0 py-3"},[s("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[s("div",{staticStyle:{width:"75px",height:"75px","background-size":"cover","background-position":"50%","border-radius":"50%"},style:"background-image: url('"+e.root+e.snapshot+"');"}),s("v-icon",{staticStyle:{"font-size":"50px!important",margin:"0!important"}},[e._v("mdi-chevron-right")]),s("div",{staticStyle:{width:"75px",height:"75px","background-size":"cover","background-position":"50%","border-radius":"50%"},style:"background-image: url('"+e.root+e.readReviewsPhoto+"');"})],1),e._l(5,(function(t){return s("v-icon",{key:"w"+t,staticClass:"reviews onlyread star bigger",class:{active:t<=e.readReviewsInfo.score_given_to_teacher}},[e._v("mdi-star")])})),s("v-chip",{staticClass:"reviews onlyread items",class:{active:e.readReviewsInfo.is_teacher_late_for_lesson}},[e._v("上課延遲")]),s("v-chip",{staticClass:"reviews onlyread items",class:{active:e.readReviewsInfo.is_teacher_frivolous_in_lesson}},[e._v("態度不佳")]),s("v-chip",{staticClass:"reviews onlyread items",class:{active:e.readReviewsInfo.is_teacher_incapabale}},[e._v("干預授課")]),s("p",{staticStyle:{"word-break":"break-word","text-align":"justify","margin-bottom":"0"}},[e._v(e._s(e.readReviewsInfo.remark_given_to_teacher))])],2):e._e(),e.readReviewsInfo.score_given_to_student>=0&&e.readReviewsInfo.score_given_to_teacher>=0?s("div",{staticClass:"col-xs-12 col-md-12 border-bottom p-0"}):e._e(),e.readReviewsInfo.score_given_to_student>=0?s("div",{staticClass:"col-xs-12 col-md-12 text-center px-0 py-3"},[s("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[s("div",{staticStyle:{width:"75px",height:"75px","background-size":"cover","background-position":"50%","border-radius":"50%"},style:"background-image: url('"+e.root+e.readReviewsPhoto+"');"}),s("v-icon",{staticStyle:{"font-size":"50px!important",margin:"0!important"}},[e._v("mdi-chevron-right")]),s("div",{staticStyle:{width:"75px",height:"75px","background-size":"cover","background-position":"50%","border-radius":"50%"},style:"background-image: url('"+e.root+e.snapshot+"');"})],1),e._l(5,(function(t){return s("v-icon",{key:"w"+t,staticClass:"reviews onlyread star bigger",class:{active:t<=e.readReviewsInfo.score_given_to_student}},[e._v("mdi-star")])})),s("v-chip",{staticClass:"reviews onlyread items",class:{active:e.readReviewsInfo.is_student_late_for_lesson}},[e._v("上課延遲")]),s("v-chip",{staticClass:"reviews onlyread items",class:{active:e.readReviewsInfo.is_student_frivolous_in_lesson}},[e._v("態度不佳")]),s("v-chip",{staticClass:"reviews onlyread items",class:{active:e.readReviewsInfo.is_student_or_parents_not_friendly}},[e._v("備課不足")]),s("p",{staticStyle:{"word-break":"break-word","text-align":"justify","margin-bottom":"0"}},[e._v(e._s(e.readReviewsInfo.remark_given_to_student))])],2):e._e()])],1)],1),s("v-dialog",{attrs:{persistent:""},model:{value:e.loadingView,callback:function(t){e.loadingView=t},expression:"loadingView"}},[s("p",{staticStyle:{"letter-spacing":"5px","text-align":"center !important",color:"#ffffff","background-color":"#000000dd",padding:"15px",margin:"auto"}},[s("img",{staticStyle:{width:"2rem","margin-bottom":"10px"},attrs:{src:e.loading}}),s("br"),e._v(" "+e._s(e.loadingViewText)+" ")])]),s("v-snackbar",{attrs:{top:!0,color:e.color},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(" "+e._s(e.errorMessages)+" "),s("v-btn",{attrs:{dark:"",flat:""},on:{click:function(t){e.snackbar=!1}}},[e._v(" Close ")])],1)],1)},i=[],r=(s("8e6e"),s("ac6a"),s("456d"),s("28a5"),s("c5f6"),s("bd86")),o=s("4328"),n=s.n(o),c=s("0b2b"),l=s.n(c),d=s("222d"),u=s.n(d),h=s("f6b8"),f=s.n(h),g=s("307a"),p=s.n(g),v=s("2ea1"),m=s.n(v),_=s("750f"),b=s.n(_),y=s("df25"),w=s.n(y),k=s("af05"),x=s.n(k),C=s("f8b2"),S=s.n(C),I=s("2f62");function M(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function O(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?M(Object(s),!0).forEach((function(t){Object(r["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):M(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var P={name:"LessonReservation",metaInfo:function(){return{title:this.appName+"｜預約管理"}},data:function(){return{loadingView:!1,loadingViewText:"處理中",pageView:!0,status:"to_be_confirmed",filterCondition:"",keyword:"",timeStart:"",timeEnd:"",filter:!1,finishTimeView:!1,finishTimeStartView:!1,finishTimeEndView:!1,finishTimeStart:"",finishTimeEnd:"",writeReviewsView:!1,readReviewsView:!1,writeReviewsScoreMove:0,writeReviewsInfo:{lesson_booking_info_id:0,score_given:0,remark_given:"",is_student_late_for_lesson:!1,is_student_frivolous_in_lesson:!1,is_student_or_parents_not_friendly:!1},readReviewsPhoto:"",readReviewsInfo:{score_given_to_teacher:-1,remark_given_to_teacher:"",is_teacher_late_for_lesson:!1,is_teacher_frivolous_in_lesson:!1,is_teacher_incapabale:!1,score_given_to_student:-1,remark_given_to_student:"",is_student_late_for_lesson:!1,is_student_frivolous_in_lesson:!1,is_student_or_parents_not_friendly:!1},boyTeacher:l.a,girlTeacher:u.a,boyStudent:f.a,girlStudent:p.a,cardBg1:m.a,cardBg2:b.a,cardBg3:w.a,chatIconSmall:x.a,loading:S.a,loadingStatus:!0,snackbar:!1,color:"red",errorMessages:"",weekList:["日","一","二","三","四","五","六"],resLessonReservationDate:[]}},computed:O({},Object(I["c"])(["root","snapshot","appName","doChatView","doChatAction","doChatroomID"]),{userInfo:function(){return JSON.parse(localStorage.getItem("user"))}}),watch:{status:function(e){this.getTeachersBookingHistory()},"writeReviewsInfo.lesson_booking_info_id":function(e){this.writeReviewsInfo.score_given=0,this.writeReviewsInfo.remark_given="",this.writeReviewsInfo.is_student_late_for_lesson=!1,this.writeReviewsInfo.is_student_frivolous_in_lesson=!1,this.writeReviewsInfo.is_student_or_parents_not_friendly=!1}},mounted:function(){var e=this;if(localStorage.getItem("token")&&"teacher"===this.userInfo.type){var t={userId:this.userInfo?this.userInfo.user_id:-1,url:this.$route.path};this.$http.post("/api/account/authCheck/",n.a.stringify(t)).then((function(e){return e.data})).then((function(t){"success"===t.status?t.data.authority?e.getTeachersBookingHistory():e.$router.push("/"):localStorage.getItem("user")&&e.$store.dispatch("logout").then((function(){e.$router.go(0)}))})).catch((function(t){console.log(t),localStorage.getItem("user")&&e.$store.dispatch("logout").then((function(){e.$router.go(0)}))}))}else this.$router.push("/")},methods:{test:function(){alert("未開放")},getTeachersBookingHistory:function(){var e=this;this.resLessonReservationDate=[],this.loadingStatus=!0;var t={userID:this.userInfo?this.userInfo.user_id:-1,searched_by:this.keyword,filtered_by:this.status,registered_from_date:this.timeStart,registered_to_date:this.timeEnd};this.$http.post("/api/lesson/getTeachersBookingHistory/",n.a.stringify(t)).then((function(e){return e.data})).then((function(t){e.loadingStatus=!1,"success"===t.status?(e.filter=!1,"teacher"===e.userInfo.type?(e.pageView=!0,""===e.keyword&&""===e.timeStart&&""===e.timeEnd||(e.filterCondition="以下為",""===e.timeStart&&""===e.timeEnd||(e.filterCondition=e.filterCondition+e.timeStart+"至"+e.timeEnd),""!==e.keyword&&(e.filterCondition=e.filterCondition+'符合"'+e.keyword+'"'),e.filterCondition=e.filterCondition+"的篩選結果"),e.resLessonReservationDate=t.data):e.$router.push("/")):"failed"===t.status?(e.snackbar=!0,e.color="red",e.errorMessages=t.errMsg):(e.snackbar=!0,e.color="orange",e.errorMessages="發生錯誤，請稍後再試")})).catch((function(t){e.snackbar=!0,e.color="orange",e.errorMessages="發生錯誤，請稍後再試",console.log(t)}))},getReadReviewsOfCertainLessons:function(e,t,s,a){var i=this;this.loadingStatus=!0;var r={userID:this.userInfo?this.userInfo.user_id:-1,type:this.userInfo?this.userInfo.type:"",lesson_booking_info_id:e};this.$http.post("/api/lesson/readReviewsOfCertainLessons/",n.a.stringify(r)).then((function(e){return e.data})).then((function(e){i.loadingStatus=!1,"success"===e.status?(""===t||null===t?"teacher"===a?i.readReviewsPhoto=s?l.a:u.a:"student"===a&&(i.readReviewsPhoto=s?f.a:p.a):i.readReviewsPhoto=t,i.readReviewsInfo=e.data,i.readReviewsView=!0):"failed"===e.status?(i.snackbar=!0,i.color="red",i.errorMessages=e.errMsg):(i.snackbar=!0,i.color="orange",i.errorMessages="發生錯誤，請稍後再試")})).catch((function(e){i.snackbar=!0,i.color="orange",i.errorMessages="發生錯誤，請稍後再試",console.log(e)}))},doTimeConversion:function(e){var t=(Number(e[0])<20?"0":"")+parseInt(Number(e[0])/2)+":"+(Number(e[0])%2?"30":"00"),s=(Number(e[e.length-1])+1<20?"0":"")+parseInt((Number(e[e.length-1])+1)/2)+":"+((Number(e[e.length-1])+1)%2?"30":"00");return t+"-"+s},finishTime:function(e,t,s){confirm("請確認是否已完成課程，結算後將無法進入課程！\n請問您是否要繼續？")&&(this.finishLessonID=e,this.finishLessonDate=t,this.finishTimeStart=(Number(s[0])<20?"0":"")+parseInt(Number(s[0])/2)+":"+(Number(s[0])%2?"30":"00"),this.finishTimeEnd=(Number(s[s.length-1])+1<20?"0":"")+parseInt((Number(s[s.length-1])+1)/2)+":"+((Number(s[s.length-1])+1)%2?"30":"00"),this.finishTimeView=!0)},doCompletedTime:function(){var e=this;if(this.finishTimeStart.split(":")[1]%10===0&&this.finishTimeEnd.split(":")[1]%10===0){var t=(new Date(this.$moment(new Date).format("YYYY/MM/DD")+" "+this.finishTimeEnd).getTime()-new Date(this.$moment(new Date).format("YYYY/MM/DD")+" "+this.finishTimeStart).getTime())/1e3/60;if(t>=10){if(confirm("送出時數後將交由學生進行核對\n請問您是否要繼續？")){this.finishTimeView=!1,this.loadingViewText="送出時數中",this.loadingView=!0;var s={userID:this.userInfo?this.userInfo.user_id:-1,lesson_booking_info_id:this.finishLessonID,lesson_date:this.finishLessonDate,start_time:this.finishTimeStart,end_time:this.finishTimeEnd,time_interval_in_minutes:t};this.$http.post("/api/lesson/lessonCompletedNotificationFromTeacher/",n.a.stringify(s)).then((function(e){return e.data})).then((function(t){e.loadingView=!1,"success"===t.status?(e.getTeachersBookingHistory(),e.finishLessonID="",e.finishLessonDate="",e.finishTimeStart="",e.finishTimeEnd="",e.snackbar=!0,e.color="green",e.errorMessages="時數已送出並已通知學生確認時數"):"failed"===t.status?(e.finishTimeView=!0,e.snackbar=!0,e.color="red",e.errorMessages=t.errMsg):(e.finishTimeView=!0,e.snackbar=!0,e.color="orange",e.errorMessages="發生錯誤，請稍後再試")})).catch((function(t){e.loadingView=!1,e.finishTimeView=!0,e.snackbar=!0,e.color="orange",e.errorMessages="發生錯誤，請稍後再試",console.log(t)}))}}else this.snackbar=!0,this.color="red",this.errorMessages="時數異常，請再次確認"}else this.snackbar=!0,this.color="red",this.errorMessages="開始時間及結束時間最小單位須為10分鐘"},doChangingStatus:function(e,t,s){var a=this;if(confirm("你確定要"+s+"預約嗎?")){this.loadingViewText=s+"預約中",this.loadingView=!0;var i={userID:this.userInfo?this.userInfo.user_id:-1,bookingID:e,bookingStatus:t};this.$http.post("/api/lesson/changingLessonBookingStatus/",n.a.stringify(i)).then((function(e){return e.data})).then((function(e){a.loadingView=!1,"success"===e.status?(a.getTeachersBookingHistory(),a.snackbar=!0,a.color="green",a.errorMessages="已成功"+s+"預約"):"failed"===e.status?(a.snackbar=!0,a.color="red",a.errorMessages=e.errMsg):(a.snackbar=!0,a.color="orange",a.errorMessages="發生錯誤，請稍後再試")})).catch((function(e){a.loadingView=!1,a.snackbar=!0,a.color="orange",a.errorMessages="發生錯誤，請稍後再試",console.log(e)}))}},doTeacherWriteStudentReviews:function(){var e=this;if(this.writeReviewsInfo.score_given>0){if(confirm("你確定要送出評價嗎?")){this.writeReviewsView=!1,this.loadingViewText="送出評價中",this.loadingView=!0;var t={userID:this.userInfo?this.userInfo.user_id:-1,lesson_booking_info_id:this.writeReviewsInfo.lesson_booking_info_id,score_given:this.writeReviewsInfo.score_given,remark_given:this.writeReviewsInfo.remark_given,is_student_late_for_lesson:this.writeReviewsInfo.is_student_late_for_lesson,is_student_frivolous_in_lesson:this.writeReviewsInfo.is_student_frivolous_in_lesson,is_student_or_parents_not_friendly:this.writeReviewsInfo.is_student_or_parents_not_friendly};this.$http.post("/api/lesson/teacherWriteStudentReviews/",n.a.stringify(t)).then((function(e){return e.data})).then((function(t){e.loadingView=!1,"success"===t.status?(e.writeReviewsInfo.lesson_booking_info_id=0,e.getTeachersBookingHistory(),e.snackbar=!0,e.color="green",e.errorMessages="已成功送出評價"):"failed"===t.status?(e.writeReviewsView=!0,e.snackbar=!0,e.color="red",e.errorMessages=t.errMsg):(e.writeReviewsView=!0,e.snackbar=!0,e.color="orange",e.errorMessages="發生錯誤，請稍後再試")})).catch((function(t){e.loadingView=!1,e.writeReviewsView=!0,e.snackbar=!0,e.color="orange",e.errorMessages="發生錯誤，請稍後再試",console.log(t)}))}}else this.snackbar=!0,this.color="red",this.errorMessages="尚未填寫評分"},doConnectChatroom:function(e){var t=this;if(localStorage.getItem("token")){var s={userID:this.userInfo?this.userInfo.user_id:-1,chatUserID:e};this.$http.post("/api/chat/checkOrCreateChatroom/",n.a.stringify(s)).then((function(e){return e.data})).then((function(e){"success"===e.status?(t.$store.state.doChatView=!0,t.$store.state.doChatroomID=e.data.chatID):"failed"===e.status?(t.snackbar=!0,t.color="red",t.errorMessages=e.errMsg):(t.snackbar=!0,t.color="orange",t.errorMessages="發生錯誤，請稍後再試")})).catch((function(e){t.snackbar=!0,t.color="orange",t.errorMessages="發生錯誤，請稍後再試",console.log(e)}))}else this.$store.state.dologinView=!0}}},E=P,T=s("2877"),V=Object(T["a"])(E,a,i,!1,null,null,null);t["default"]=V.exports},df25:function(e,t,s){e.exports=s.p+"img/lesson_card_bg3.521fd050.jpg"},ef8d:function(e,t,s){},f6b8:function(e,t,s){e.exports=s.p+"img/boy_student.fa98adf7.jpg"},f8b2:function(e,t,s){e.exports=s.p+"img/loading.47f6ffc4.gif"},fe9b:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-content",{attrs:{id:"profile"}},[s("div",{staticClass:"container"},[s("div",{staticClass:"row my-2 border-bottom"},[s("div",{staticClass:"col-xs-12 col-md-4 teacher-profile-left"},[s("div",{staticClass:"teacher-photo",style:"background-image: url('"+e.root+e.profilePhoto+"');"}),s("div",{staticClass:"teacher-name"},[s("span",[s("img",{attrs:{src:e.profileGender}}),e._v(e._s(e.profileNickname))])]),s("span",{staticClass:"teacher-seniority bg-main-color"},[e._v("教學年資："+e._s(e.profileYear))]),s("div",{staticClass:"prove-area"},[""!==e.profileEdu1?s("p",{staticClass:"prove"},[e.profileEduApproved?s("img",{attrs:{src:e.prove}}):e._e(),e._v(e._s(e.profileEdu1))]):e._e(),""!==e.profileEdu2?s("p",{staticClass:"prove"},[e.profileEduApproved?s("img",{attrs:{src:e.prove}}):e._e(),e._v(e._s(e.profileEdu2))]):e._e(),""!==e.profileEdu3?s("p",{staticClass:"prove"},[e.profileEduApproved?s("img",{attrs:{src:e.prove}}):e._e(),e._v(e._s(e.profileEdu3))]):e._e(),""!==e.profileJob?s("p",{staticClass:"prove"},[e.profileJobApproved?s("img",{attrs:{src:e.prove}}):e._e(),e._v(e._s(e.profileJob))]):e._e(),""!==e.profileExp?s("p",{staticClass:"prove"},[e.profileExpApproved?s("img",{attrs:{src:e.prove}}):e._e(),e._v(e._s(e.profileExp))]):e._e()])]),s("div",{staticClass:"col-xs-12 col-md-8 teacher-profile-right"},[s("div",{staticClass:"text-left"},[s("p",{staticClass:"subtitle mb-2 xs-font-20 md-font-30"},[e._v("關於老師")]),s("p",{staticClass:"content xs-font-15 md-font-20",staticStyle:{"white-space":"pre-line !important"}},[e._v(e._s(e.profileIntro||"老師尚未填寫相關資訊"))])]),s("div",{staticClass:"text-left"},[s("p",{staticClass:"subtitle mb-2 xs-font-20 md-font-30"},[e._v("授課科目與對象")]),s("p",{staticClass:"content xs-font-15 md-font-20",staticStyle:{"white-space":"pre-line !important"}},[e._v(e._s(e.profileTag||"老師尚未填寫相關資訊"))])]),e.userInfo&&"teacher"!==e.userInfo.type?s("v-btn",{staticClass:"my-3 mx-0 px-4 h5 bg-chat-color v-btn float-right theme--light",on:{click:function(t){return e.doConnectChatroom()}}},[s("v-icon",{staticClass:"mr-2"},[e._v("mdi-comment-text-multiple")]),e._v("聯絡老師 ")],1):e._e()],1)]),s("div",{staticClass:"row",class:{loading:e.loadingStatus}},[e.loadingStatus||0!==e.resLessonList.length?e._e():s("p",{staticClass:"text-center w-100"},[e._v("尚無開設課程")]),e._l(e.resLessonList,(function(t,a){return s("div",{key:"c"+a,staticClass:"item-cube col-xs-12 col-md-6 my-2"},[s("div",{staticClass:"teacher-photo",style:"background-image: url('"+e.root+(""!==t.teacher_thumbnail_path?t.teacher_thumbnail_path:t.is_this_teacher_male?e.boyTeacher:e.girlTeacher)+"');"}),""!==t.best_sale?s("div",{staticClass:"best_sale"},[e._v(e._s(t.best_sale))]):e._e(),s("v-layout",{attrs:{"item-cube-main":"","justify-center":""}},[s("v-flex",{staticClass:"top",style:"background-image: url('"+e.root+(99===t.background_picture_code?t.background_picture_path:0===t.background_picture_code?e.cardBg1:1===t.background_picture_code?e.cardBg2:e.cardBg3)+"');"},[s("div",{style:"color:"+t.title_color+";"},[e._v(e._s(t.big_title))]),s("div",{style:"color:"+t.title_color+";"},[e._v(e._s(t.little_title))])]),s("v-flex",{staticClass:"middle"},[s("span",{staticClass:"xs-font-18 md-font-25 float-left word-keep-all cursor",on:{click:function(t){return e.scrollTop()}}},[e._v(e._s(t.teacher_nickname))]),s("span",{staticClass:"xs-font-18 md-font-25 float-right word-keep-all"},[e._v("鐘點費NT$"+e._s(t.price_per_hour))])]),s("v-flex",{staticClass:"bottom"},[s("div",{staticClass:"text-left mb-2"},[s("p",{staticClass:"title mb-2 cursor",on:{click:function(s){return e.$router.push("/lesson/main/view/"+t.lessonID)}}},[e._v(e._s(t.lesson_title))]),s("p",{staticClass:"prove"},[t.education_is_approved?s("img",{attrs:{src:e.prove}}):e._e(),e._v(e._s(t.education))]),s("p",{staticClass:"prove"},[t.working_experience_is_approved?s("img",{attrs:{src:e.prove}}):e._e(),e._v(e._s(t.working_experience))])]),s("div",{staticClass:"text-left"},[""!==t.highlight_1?s("span",{staticClass:"tag md-font-13 xs-font-9 word-keep-all"},[e._v(e._s(t.highlight_1))]):e._e(),""!==t.highlight_2?s("span",{staticClass:"tag md-font-13 xs-font-9 word-keep-all"},[e._v(e._s(t.highlight_2))]):e._e(),""!==t.highlight_3?s("span",{staticClass:"tag md-font-13 xs-font-9 word-keep-all"},[e._v(e._s(t.highlight_3))]):e._e()])])],1)],1)}))],2)]),s("v-snackbar",{attrs:{top:!0,color:e.color},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(" "+e._s(e.errorMessages)+" "),s("v-btn",{attrs:{dark:"",flat:""},on:{click:function(t){e.snackbar=!1}}},[e._v(" Close ")])],1)],1)},i=[],r=(s("8e6e"),s("ac6a"),s("456d"),s("bd86")),o=s("4328"),n=s.n(o),c=s("9814"),l=s.n(c),d=s("6905"),u=s.n(d),h=s("0b2b"),f=s.n(h),g=s("222d"),p=s.n(g),v=s("34a4"),m=s.n(v),_=s("2ea1"),b=s.n(_),y=s("750f"),w=s.n(y),k=s("df25"),x=s.n(k),C=s("f8b2"),S=s.n(C),I=s("2f62");function M(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function O(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?M(Object(s),!0).forEach((function(t){Object(r["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):M(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var P={name:"Profile",metaInfo:function(){return{title:this.appName+"｜老師資訊"}},data:function(){return{boyTeacher:f.a,girlTeacher:p.a,boyIcon:l.a,girlIcon:u.a,prove:m.a,cardBg1:b.a,cardBg2:w.a,cardBg3:x.a,loading:S.a,loadingStatus:!1,snackbar:!1,color:"red",errorMessages:"",profileId:-1,profileApproved:!1,profileAvgScore:0,profileReviewedTimes:0,profileEduApproved:!1,profileEdu1:"",profileEdu2:"",profileEdu3:"",profileJobApproved:!1,profileJob:"",profileExpApproved:!1,profileExp:"",profileAllApproved:!1,profileNickname:"",profileYear:"",profileIntro:"",profileTag:"",profileGender:null,profilePhoto:"",profileSelectTime:[],resLessonList:[]}},computed:O({},Object(I["c"])(["root","appName","dologinView","doChatView","doChatAction","doChatroomID"]),{userInfo:function(){return JSON.parse(localStorage.getItem("user"))}}),watch:{"$route.fullPath":function(e){this.$route.params.id?this.profileId=this.$route.params.id:this.profileId=-1,this.resLessonList=[],this.getTeacherProfile(),this.getLessonList()}},mounted:function(){var e=this,t=!0;if(localStorage.getItem("token")||t){var s={userId:this.userInfo?this.userInfo.user_id:-1,url:this.$route.path};this.$http.post("/api/account/authCheck/",n.a.stringify(s)).then((function(e){return e.data})).then((function(t){"success"===t.status?t.data.authority&&(e.$route.params.id?e.profileId=e.$route.params.id:e.profileId=-1,e.getTeacherProfile(),e.getLessonList()):localStorage.getItem("user")&&e.$store.dispatch("logout").then((function(){e.$router.go(0)}))})).catch((function(t){console.log(t),localStorage.getItem("user")&&e.$store.dispatch("logout").then((function(){e.$router.go(0)}))}))}},methods:{test:function(){alert("未開放")},scrollTop:function(){scroll(0,0)},getTeacherProfile:function(){var e=this;this.$http.get("/api/account/returnTeacherProfileForPublicViewing/?userID=".concat(this.profileId,"&type=teacher")).then((function(e){return e.data})).then((function(t){"success"===t.status?(e.profileApproved=t.data.id_approved,e.profileAvgScore=t.data.all_lesson_score_mean,e.profileReviewedTimes=t.data.total_number_of_remark,e.profileEdu1=t.data.education_1,e.profileEdu2=t.data.education_2,e.profileEdu3=t.data.education_3,e.profileEduApproved=t.data.education_approved,e.profileJob=t.data.company,e.profileJobApproved=t.data.work_approved,e.profileExp=t.data.special_exp,e.profileExpApproved=t.data.other_approved,e.profileAllApproved=t.data.is_approved,e.profileNickname=t.data.nickname,e.profileYear=t.data.tutor_experience,e.profileIntro=t.data.intro,e.profileTag=t.data.subject_type,e.profileGender=t.data.is_male?l.a:u.a,""!==t.data.thumbnail_dir?e.profilePhoto=t.data.thumbnail_dir:t.data.is_male?e.profilePhoto=e.boyTeacher:e.profilePhoto=e.girlTeacher,e.profileSelectTime=t.data.general_available_time):(t.status,e.$router.push("/"))})).catch((function(t){console.log(t),e.$router.push("/")}))},getLessonList:function(){var e=this;this.loadingStatus=!0;var t={userID:this.userInfo?this.userInfo.user_id:-1,qty:-1,keywords:"",only_show_ones_favorites:!1,only_show_lessons_by_this_teacher_s_auth_id:this.profileId,ordered_by:"",filtered_by:""};this.$http.post("/api/lesson/getLessonCardsForCommonUsers/",n.a.stringify(t)).then((function(e){return e.data})).then((function(t){e.loadingStatus=!1,"success"===t.status?e.resLessonList=t.data:(t.status,e.$router.push("/"))})).catch((function(t){console.log(t),e.$router.push("/")}))},doFavorite:function(e,t){var s=this;if(localStorage.getItem("token")){var a={userID:this.userInfo?this.userInfo.user_id:-1,lessonID:e,status:t};this.$http.post("/api/lesson/addOrRemoveFavoriteLessons/",n.a.stringify(a)).then((function(e){return e.data})).then((function(e){"success"===e.status?(s.getLessonList(),s.snackbar=!0,s.color="green",s.errorMessages="已"+(t?"加入":"移除")+"收藏"):"failed"===e.status?(s.snackbar=!0,s.color="red",s.errorMessages=e.errMsg):(s.snackbar=!0,s.color="orange",s.errorMessages="發生錯誤，請稍後再試")})).catch((function(e){s.snackbar=!0,s.color="orange",s.errorMessages="發生錯誤，請稍後再試",console.log(e)}))}else this.$store.state.dologinView=!0},doConnectChatroom:function(){var e=this;if(localStorage.getItem("token")){var t={userID:this.userInfo?this.userInfo.user_id:-1,chatUserID:this.profileId};this.$http.post("/api/chat/checkOrCreateChatroom/",n.a.stringify(t)).then((function(e){return e.data})).then((function(t){"success"===t.status?(e.$store.state.doChatView=!0,e.$store.state.doChatroomID=t.data.chatID):"failed"===t.status?(e.snackbar=!0,e.color="red",e.errorMessages=t.errMsg):(e.snackbar=!0,e.color="orange",e.errorMessages="發生錯誤，請稍後再試")})).catch((function(t){e.snackbar=!0,e.color="orange",e.errorMessages="發生錯誤，請稍後再試",console.log(t)}))}else this.$store.state.dologinView=!0}}},E=P,T=s("2877"),V=Object(T["a"])(E,a,i,!1,null,null,null);t["default"]=V.exports},ff57:function(e,t,s){"use strict";var a=s("acbe"),i=s.n(a);i.a},ffe0:function(e,t,s){var a={"./Account/Finance.vue":"db67","./Account/Info.vue":"b103","./Account/LessonManage.vue":"b07b","./Account/LessonReservation.vue":"dd83","./Account/LessonStudy.vue":"a8cb","./Account/Profile.vue":"fe9b","./Account/StudentRegister.vue":"8651","./Account/TeacherRegister.vue":"9515","./Blog/BlogMain.vue":"4cba","./Blog/BlogPost.vue":"c559","./Homepage.vue":"3b15","./Landing.vue":"4d55","./Lesson/GuestReady.vue":"a40b","./Lesson/Main.vue":"3d75","./Lesson/Ready.vue":"5651","./Lesson/Reservation.vue":"482c","./Lesson/Search.vue":"78ab","./NoEnter.vue":"a3564","./Plugins/Chatroom.vue":"2f77","./Plugins/TimeSelector.vue":"77fc","./Plugins/UserAgreement.vue":"ab54","./Store/Checkout.vue":"b983","./core/Drawer.vue":"41c0","./core/Filter.vue":"b2ab","./core/Footer.vue":"7a74","./core/Toolbar.vue":"d23b"};function i(e){var t=r(e);return s(t)}function r(e){if(!s.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}i.keys=function(){return Object.keys(a)},i.resolve=r,e.exports=i,i.id="ffe0"}});
//# sourceMappingURL=app.f35c8956.js.map